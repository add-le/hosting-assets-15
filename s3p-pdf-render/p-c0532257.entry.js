import{r as t,c as i,g as e,h as n,a as r}from"./p-d5a6e412.js";import{b as s}from"./p-6f5893c5.js";import{b as o,r as a,d as h,t as u,p as l,a as c,e as f,s as d}from"./p-98feef0c.js";import{i as v}from"./p-924cb6ab.js";import{c as p,a as m,g}from"./p-3e8ff66b.js";const y=".s3pChartComponent .container-dateChange{display:flex;justify-content:center;margin:10px;align-items:baseline !important}.s3pChartComponent .element-dateChange{display:flex;align-items:center;margin:0px 5px}.s3pChartComponent .element-dateChange label{margin-right:5px}.s3pChartComponent .containerRepeat{width:330px;margin:5px;display:flex;flex-direction:column;justify-content:center}.s3pChartComponent .containerRepeat label{margin:5px}.s3pChartComponent .containerNbDays{display:flex;align-items:center;width:330px}.s3pChartComponent .containerWeekButton{display:flex;flex-wrap:wrap}.s3pChartComponent .weekButton{margin:5px;border:2px solid var(--secondary-color, #1e49a5);padding:5px;color:var(--secondary-color, #1e49a5);border-radius:5px;text-align:center;flex:1}.s3pChartComponent .weekButton.selected{background-color:var(--secondary-color, #1e49a5) !important;color:white !important}.s3pChartComponent .input-duration{width:50px}.s3pChartComponent .container-dateChange .select-custom{max-width:800px;flex:1}";const b=class{constructor(n){t(this,n);this.sendEventsAdd=i(this,"sendEventsAdd",7);this.activitiesOutsideVehicle=[];this.activityAdd={activity:null,start:null,end:null,nbDays:1,except:[],startMax:null,durante:0};this.resourcesUrl=e(this,"resourcesUrl")}async componentWillLoad(){this.log=s("s3pChart:AddCustomActivity");this.i18n=new v(this.el);await this.i18n.load(this.resourcesUrl);this.initActivityAdd()}async componentDidLoad(){this.createEvents()}watchActivityEdit(){this.initActivityAdd();this.createEvents()}initActivityAdd(){let t;if(this.pastLimit&&this.pastLimit.start){t=this.pastLimit.start}else if(this.maxStartFutur){t=this.maxStartFutur}if(!this.activityEdit){let i,e;if(this.pastLimit&&this.pastLimit.start){i=this.pastLimit.start;e=this.pastLimit.start}else{i=new Date((new Date).setHours(8,0,0,0));e=new Date((new Date).setHours(9,0,0,0));if(new Date>i){i.setDate((new Date).getDate()+1);e.setDate((new Date).getDate()+1)}}this.activityAdd={activity:null,start:i,end:e,nbDays:1,except:[],startMax:t,durante:60}}else{let i=(new Date(this.activityEdit.end).valueOf()-new Date(this.activityEdit.start).valueOf())/6e4;this.activityAdd=Object.assign({},Object.assign(Object.assign({},this.activityEdit),{nbDays:1,except:[],startMax:t,durante:i}));this.createEvents()}}setActivityAdd(t,i){switch(i){case"activity":this.activityAdd.customActivityId=t.value;let i=this.activitiesOutsideVehicle.find((t=>t._id===this.activityAdd.customActivityId));this.activityAdd.activity=Object.assign({},i);delete this.activityAdd.activity._id;break;case"start":this.activityAdd.start=t.detail;break;case"nbDays":this.activityAdd.nbDays=t.value;break}this.createEvents()}refresh(){this.initActivityAdd();this.createEvents()}selectDay(t){if(this.activityAdd.except.includes(t)){let i=this.activityAdd.except.indexOf(t);this.activityAdd.except.splice(i,1)}else{this.activityAdd.except.push(t)}this.activityAdd=Object.assign({},this.activityAdd);this.createEvents()}setDuration(t,i){let e=0;const n=Math.floor(this.activityAdd.durante/60);const r=Math.floor(this.activityAdd.durante-n*60);if(t.target.value||t.target.value===0){let s=t.target.value;if(i){e=parseInt(s)*60;this.activityAdd.durante=e+r}else{e=parseInt(s);this.activityAdd.durante=e+n*60}}this.createEvents()}createEvents(){this.eventsSend=[];if(this.activityAdd.customActivityId&&this.activityAdd.start){let t=this.activityAdd.except;const i=this.activityAdd.activity&&this.activityAdd.activity.durante;if(i){let e=this.activityAdd.start,n=this.activityAdd.start?o(this.activityAdd.start,i):null;if(e&&n&&this.inLimits(e,n)&&t.length!==7){e=a(new Date(e),24);n=a(new Date(n),24);for(let i=1;i<=this.activityAdd.nbDays;i++){let i;do{e=h(new Date(e),24);n=h(new Date(n),24);i=new Date(e).getDay()}while(t.includes(i));if(this.inLimits(this.activityAdd.start,n)){if(this.inputRepeat){this.inputRepeat.style.borderColor="var(--primary-no-color, #ccc)"}this.eventsSend.push({type:"create",event:{customActivityId:this.activityAdd.customActivityId,ts:new Date(e).toISOString(),end:new Date(n).toISOString()}})}else{this.inputRepeat.style.borderColor="red"}}this.activityAdd.end=n}}else{this.activityAdd.end=new Date(new Date(this.activityAdd.start).valueOf()+this.activityAdd.durante*6e4);if(this.inLimits(this.activityAdd.start,this.activityAdd.end)){this.eventsSend.push({type:"create",event:{customActivityId:this.activityAdd.customActivityId,ts:new Date(this.activityAdd.start).toISOString(),end:new Date(this.activityAdd.end).toISOString()}})}}}this.setHaveError(this.eventsSend&&this.eventsSend.length||!this.activityAdd.customActivityId?false:true);this.activityAdd=Object.assign({},this.activityAdd);this.sendEventsAdd.emit({events:this.eventsSend,start:this.activityAdd.start,end:this.activityAdd.end})}inLimits(t,i){let e=false;if(this.maxStartFutur||this.pastLimit){if(this.maxStartFutur&&new Date(t)>=new Date(this.maxStartFutur)){e=true}if(this.pastLimit&&new Date(t)>=new Date(this.pastLimit.start)&&new Date(i)<=new Date(this.pastLimit.end)){e=true}}else{e=true}return e}setHaveError(t){this.inputDateTimeAddStart.setError(t);this.errorMessage=t}renderActivityWithDuration(){return n("div",{class:"containerRepeat"},n("div",{class:"containerNbDays"},n("label",null,this.i18n.get("number")),n("input",{type:"number",min:1,step:1,class:"input-custom",ref:t=>this.inputRepeat=t,value:this.activityAdd.nbDays,onChange:t=>{this.setActivityAdd(t.target,"nbDays")}}),n("label",null,this.i18n.get("days")),n("div",{class:"btn-refresh",onClick:()=>{this.refresh()}},n("s3p-icon-v2",{class:"icon-svg iconClick",name:"custom-refresh",center:true}))),n("label",null,this.i18n.get("only")),n("div",{class:"containerWeekButton"},n("div",{class:{weekButton:true,selected:!this.activityAdd.except.includes(1)},onClick:()=>{this.selectDay(1)}},this.i18n.get("monday")),n("div",{class:{weekButton:true,selected:!this.activityAdd.except.includes(2)},onClick:()=>{this.selectDay(2)}},this.i18n.get("tuesday")),n("div",{class:{weekButton:true,selected:!this.activityAdd.except.includes(3)},onClick:()=>{this.selectDay(3)}},this.i18n.get("wednesday")),n("div",{class:{weekButton:true,selected:!this.activityAdd.except.includes(4)},onClick:()=>{this.selectDay(4)}},this.i18n.get("thursday")),n("div",{class:{weekButton:true,selected:!this.activityAdd.except.includes(5)},onClick:()=>{this.selectDay(5)}},this.i18n.get("friday")),n("div",{class:{weekButton:true,selected:!this.activityAdd.except.includes(6)},onClick:()=>{this.selectDay(6)}},this.i18n.get("saturday")),n("div",{class:{weekButton:true,selected:!this.activityAdd.except.includes(0)},onClick:()=>{this.selectDay(0)}},this.i18n.get("sunday"))))}renderActivityWithoutDuration(){return n("div",{class:"element-dateChange"},n("label",null," ",this.i18n.get("durante")),n("input",{type:"text",class:"input-custom input-duration",value:u(this.activityAdd.durante?this.activityAdd.durante*60:0,"hours"),onBlur:t=>{this.setDuration(t,true)}}),n("span",null,"h"),n("input",{type:"text",class:"input-custom input-duration",value:u(this.activityAdd.durante?this.activityAdd.durante*60:0,"minutes"),onBlur:t=>{this.setDuration(t,false)}}),n("div",{class:"btn-refresh",onClick:()=>{this.refresh()}},n("s3p-icon-v2",{class:"icon-svg iconClick",name:"custom-refresh",center:true})))}render(){return n("div",{class:"s3pChartComponent"},n("p",{class:"container-warning"},this.i18n.get("activityHVOnlyOnRestOrFuture")),n("div",{class:"container-error"},n("p",null,!this.activitiesOutsideVehicle||this.activitiesOutsideVehicle&&this.activitiesOutsideVehicle.length===0?this.i18n.get("errorMessageNoCustomActivity"):"")),n("div",{class:"container-dateChange"},n("select",{class:"select-custom",onInput:t=>this.setActivityAdd(t.target,"activity")},n("option",{value:""},this.i18n.get("chooseActivity")),this.activitiesOutsideVehicle?this.activitiesOutsideVehicle.map((t=>n("option",{value:t._id,selected:this.activityAdd.customActivityId===t._id},t.label))):""),n("div",{class:"element-dateChange"},n("label",null,this.i18n.get("start")),n("s3p-input-datetime",{idInput:"createEventsStart",date:this.activityAdd.start,dateMin:this.activityAdd.startMax,onDateTimeChange:t=>{this.setActivityAdd(t,"start")},ref:t=>this.inputDateTimeAddStart=t})),this.activityAdd.activity&&this.activityAdd.activity.durante?this.renderActivityWithDuration():this.renderActivityWithoutDuration()),n("div",{class:"container-error"},this.errorMessage?`${this.i18n.get("errorMessageIntervalDate2")} ${this.maxStartFutur?l(this.maxStartFutur,"00/00/0000 00:00"):""} `:""))}get el(){return r(this)}static get watchers(){return{activityEdit:["watchActivityEdit"]}}};b.style=y;const w='.tabsContainer{height:100%}.tabsContent .display{height:100%}.tabsContent{height:100%}.tabsFirstStyle{display:flex;justify-content:space-around;text-align:center}.tabsFirstStyle .active{color:var(--primary-color, #921a1d) !important;border:var(--primary-color, #921a1d) solid 1px !important;border-bottom:2.5px solid !important}.tabsFirstStyle s3p-icon-v2{display:inline-block;width:1em;height:1em;contain:strict;-webkit-box-sizing:content-box !important;box-sizing:content-box !important;font-size:32px;overflow:hidden;padding:7px}.tabsFirstStyle .tab{width:100%;font-size:1em;border-radius:4px;border:#89909e solid 1px;cursor:pointer}.tabsFirstStyle .disabled{color:#cecdcd !important;border:#cecdcd solid 1px}.tabsFirstStyle .blink{background:var(--primary-color, #921a1d) !important;border:var(--primary-color, #921a1d) solid 1px;animation:blinker 1s cubic-bezier(0.5, 0, 1, 1) infinite alternate}.tabsSecondStyle{height:6%;display:flex;padding-bottom:7px}.tabsSecondStyle .tab{flex:auto;border:none;color:grey;background:white;padding:10px;cursor:pointer;outline:none;font-size:0px;border-bottom:3px solid transparent;font-weight:bolder;display:flex;align-items:center;justify-content:center;font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif}.tabsSecondStyle .active{border-bottom:3px solid var(--primary-color, #921a1d);color:var(--primary-color, #921a1d);font-size:18px}.tabsSecondStyle .blink{background:var(--primary-color, #921a1d) !important;color:white !important;animation:blinker 1s cubic-bezier(0.5, 0, 1, 1) infinite alternate}@keyframes blinker{from{opacity:1}to{opacity:0}}.no-display{display:none}.display{display:block}';const k=class{constructor(e){t(this,e);this.changeTabEvent=i(this,"changeTabEvent",7);this.styleGraphic=1}async componentWillLoad(){if(!this.tab&&this.tabs[0]){const t=this.tabs.find((t=>!t.disabled));this.tab=t.name}else if(this.tabs[0]){const t=this.tabs.find((t=>t.name===this.tab));if(!t||t&&t.disabled){const t=this.tabs.find((t=>!t.disabled));this.tab=t.name}}}async componentDidLoad(){}setTab(t){this.tab=t;this.changeTabEvent.emit(t)}setClass(){switch(this.styleGraphic){case 1:return"tabsFirstStyle";case 2:return"tabsSecondStyle"}}applyTab(t,i){if(this.saveName){let t=localStorage.getItem("previousSegment");if(!t){let t={[this.saveName]:this.tab};localStorage.setItem("previousSegment",JSON.stringify(t))}else{let i=JSON.parse(t);if(!i[this.saveName]||i[this.saveName]&&i[this.saveName]!==this.tab){i[this.saveName]=this.tab}localStorage.setItem("previousSegment",JSON.stringify(i))}}const e=this.tabs.find((i=>i.name===t));if(e&&e.disabled||!e){const t=this.tabs.find((t=>t.disabled===false));this.tab=i?i:t.name}}setColor(t){return t.class&&t.class==="blink"?"white":this.tab===t.name?"var(--primary-color, #921a1d)":t.disabled?"#cecdcd":"#424242"}renderOneStyle(t){return n("div",{class:`tab ${this.tab===t.name?"active":""}  ${t.class?t.class:""}  ${t.disabled?"disabled":""}`,title:t.displayName?t.displayName:"",onClick:()=>{!t.disabled?this.setTab(t.name):null}},t.icon?n("s3p-icon-v2",{center:true,name:t.icon,size:"large",color:this.setColor(t),badge:t.badge?{text:t.badge,color:"white",background:this.tab===t.name||t.class==="blink"?"black":"var(--primary-color, #921a1d)"}:null}):t.displayName)}renderTwoStyle(t){return n("button",{class:`tab ${this.tab===t.name?"active":""} ${t.class?t.class:""}  ${t.disabled?"disabled":""}`,onClick:()=>{this.setTab(t.name)},disabled:t.disabled},n("div",null,n("s3p-icon-v2",{center:true,name:t.icon,size:"large",color:this.setColor(t),badge:t.badge?{text:t.badge,color:"white",background:this.tab===t.name||t.class==="blink"?"black":"var(--primary-color, #921a1d)"}:null})),t.displayName?n("span",{style:{marginLeft:"10px"}},t.displayName):"")}renderTabs(){switch(this.styleGraphic){case 1:return n("div",{class:"tabsFirstStyle"},this.tabs.map((t=>t.display?this.renderOneStyle(t):"")));case 2:return n("div",{class:"tabsSecondStyle"},this.tabs.map((t=>t.display?this.renderTwoStyle(t):"")))}}render(){return n("div",{class:"tabsContainer"},this.renderTabs(),n("div",{class:"tabsContent"},n("slot",{name:`item-header`}),this.tabs.map((t=>n("div",{class:`${this.tab===t.name&&t.display?"display":"no-display"}`},n("slot",{name:`item-${t.name}`})))),n("slot",{name:`item-footer`})))}get element(){return r(this)}static get watchers(){return{tab:["applyTab"]}}};k.style=w;var _=p((function(t,i){
/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 7.4.9
 * @date    2021-06-05T17:23:00.619Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */
!function(t,e){e(i)}(m,(function(t){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof m?m:"undefined"!=typeof self?self:{};function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,i){return t(i={exports:{}},i.exports),i.exports}var s=r((function(t,i){t.exports=function(){var i,n;function r(){return i.apply(null,arguments)}function s(t){i=t}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function h(t,i){return Object.prototype.hasOwnProperty.call(t,i)}function u(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var i;for(i in t)if(h(t,i))return!1;return!0}function l(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function f(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function d(t,i){var e,n=[];for(e=0;e<t.length;++e)n.push(i(t[e],e));return n}function v(t,i){for(var e in i)h(i,e)&&(t[e]=i[e]);return h(i,"toString")&&(t.toString=i.toString),h(i,"valueOf")&&(t.valueOf=i.valueOf),t}function p(t,i,e,n){return qe(t,i,e,n,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(t){return null==t._pf&&(t._pf=m()),t._pf}function y(t){if(null==t._isValid){var i=g(t),e=n.call(i.parsedDateParts,(function(t){return null!=t})),r=!isNaN(t._d.getTime())&&i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&e);if(t._strict&&(r=r&&0===i.charsLeftOver&&0===i.unusedTokens.length&&void 0===i.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function b(t){var i=p(NaN);return null!=t?v(g(i),t):g(i).userInvalidated=!0,i}n=Array.prototype.some?Array.prototype.some:function(t){var i,e=Object(this),n=e.length>>>0;for(i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var w=r.momentProperties=[],k=!1;function _(t,i){var e,n,r;if(l(i._isAMomentObject)||(t._isAMomentObject=i._isAMomentObject),l(i._i)||(t._i=i._i),l(i._f)||(t._f=i._f),l(i._l)||(t._l=i._l),l(i._strict)||(t._strict=i._strict),l(i._tzm)||(t._tzm=i._tzm),l(i._isUTC)||(t._isUTC=i._isUTC),l(i._offset)||(t._offset=i._offset),l(i._pf)||(t._pf=g(i)),l(i._locale)||(t._locale=i._locale),w.length>0)for(e=0;e<w.length;e++)l(r=i[n=w[e]])||(t[n]=r);return t}function x(t){_(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===k&&(k=!0,r.updateOffset(this),k=!1)}function D(t){return t instanceof x||null!=t&&null!=t._isAMomentObject}function M(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,i){var e=!0;return v((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),e){var n,s,o,a=[];for(s=0;s<arguments.length;s++){if(n="","object"==typeof arguments[s]){for(o in n+="\n["+s+"] ",arguments[0])h(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[s];a.push(n)}M(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),e=!1}return i.apply(this,arguments)}),i)}var F,T={};function j(t,i){null!=r.deprecationHandler&&r.deprecationHandler(t,i),T[t]||(M(i),T[t]=!0)}function Y(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function E(t){var i,e;for(e in t)h(t,e)&&(Y(i=t[e])?this[e]=i:this["_"+e]=i);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function A(t,i){var e,n=v({},t);for(e in i)h(i,e)&&(a(t[e])&&a(i[e])?(n[e]={},v(n[e],t[e]),v(n[e],i[e])):null!=i[e]?n[e]=i[e]:delete n[e]);for(e in t)h(t,e)&&!h(i,e)&&a(t[e])&&(n[e]=v({},n[e]));return n}function C(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,F=Object.keys?Object.keys:function(t){var i,e=[];for(i in t)h(t,i)&&e.push(i);return e};var O={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(t,i,e){var n=this._calendar[t]||this._calendar.sameElse;return Y(n)?n.call(i,e):n}function z(t,i,e){var n=""+Math.abs(t),r=i-n.length;return(t>=0?e?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var I=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},B={};function P(t,i,e,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(B[t]=r),i&&(B[i[0]]=function(){return z(r.apply(this,arguments),i[1],i[2])}),e&&(B[e]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function R(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function $(t){var i,e,n=t.match(I);for(i=0,e=n.length;i<e;i++)B[n[i]]?n[i]=B[n[i]]:n[i]=R(n[i]);return function(i){var r,s="";for(r=0;r<e;r++)s+=Y(n[r])?n[r].call(i,t):n[r];return s}}function G(t,i){return t.isValid()?(i=W(i,t.localeData()),H[i]=H[i]||$(i),H[i](t)):t.localeData().invalidDate()}function W(t,i){var e=5;function n(t){return i.longDateFormat(t)||t}for(N.lastIndex=0;e>=0&&N.test(t);)t=t.replace(N,n),N.lastIndex=0,e-=1;return t}var U={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function q(t){var i=this._longDateFormat[t],e=this._longDateFormat[t.toUpperCase()];return i||!e?i:(this._longDateFormat[t]=e.match(I).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])}var V="Invalid date";function X(){return this._invalidDate}var Z="%d",J=/\d{1,2}/;function K(t){return this._ordinal.replace("%d",t)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function tt(t,i,e,n){var r=this._relativeTime[e];return Y(r)?r(t,i,e,n):r.replace(/%d/i,t)}function it(t,i){var e=this._relativeTime[t>0?"future":"past"];return Y(e)?e(i):e.replace(/%s/i,i)}var et={};function nt(t,i){var e=t.toLowerCase();et[e]=et[e+"s"]=et[i]=t}function rt(t){return"string"==typeof t?et[t]||et[t.toLowerCase()]:void 0}function st(t){var i,e,n={};for(e in t)h(t,e)&&(i=rt(e))&&(n[i]=t[e]);return n}var ot={};function at(t,i){ot[t]=i}function ht(t){var i,e=[];for(i in t)h(t,i)&&e.push({unit:i,priority:ot[i]});return e.sort((function(t,i){return t.priority-i.priority})),e}function ut(t){return t%4==0&&t%100!=0||t%400==0}function lt(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ct(t){var i=+t,e=0;return 0!==i&&isFinite(i)&&(e=lt(i)),e}function ft(t,i){return function(e){return null!=e?(vt(this,t,e),r.updateOffset(this,i),this):dt(this,t)}}function dt(t,i){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+i]():NaN}function vt(t,i,e){t.isValid()&&!isNaN(e)&&("FullYear"===i&&ut(t.year())&&1===t.month()&&29===t.date()?(e=ct(e),t._d["set"+(t._isUTC?"UTC":"")+i](e,t.month(),ti(e,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+i](e))}function pt(t){return Y(this[t=rt(t)])?this[t]():this}function mt(t,i){if("object"==typeof t){var e,n=ht(t=st(t));for(e=0;e<n.length;e++)this[n[e].unit](t[n[e].unit])}else if(Y(this[t=rt(t)]))return this[t](i);return this}var gt,yt=/\d/,bt=/\d\d/,wt=/\d{3}/,kt=/\d{4}/,_t=/[+-]?\d{6}/,xt=/\d\d?/,Dt=/\d\d\d\d?/,Mt=/\d\d\d\d\d\d?/,St=/\d{1,3}/,Ft=/\d{1,4}/,Tt=/[+-]?\d{1,6}/,jt=/\d+/,Yt=/[+-]?\d+/,Et=/Z|[+-]\d\d:?\d\d/gi,At=/Z|[+-]\d\d(?::?\d\d)?/gi,Ct=/[+-]?\d+(\.\d{1,3})?/,Ot=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Lt(t,i,e){gt[t]=Y(i)?i:function(t,n){return t&&e?e:i}}function zt(t,i){return h(gt,t)?gt[t](i._strict,i._locale):new RegExp(It(t))}function It(t){return Nt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,i,e,n,r){return i||e||n||r})))}function Nt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}gt={};var Ht={};function Bt(t,i){var e,n=i;for("string"==typeof t&&(t=[t]),c(i)&&(n=function(t,e){e[i]=ct(t)}),e=0;e<t.length;e++)Ht[t[e]]=n}function Pt(t,i){Bt(t,(function(t,e,n,r){n._w=n._w||{},i(t,n._w,n,r)}))}function Rt(t,i,e){null!=i&&h(Ht,t)&&Ht[t](i,e._a,e,t)}var $t,Gt=0,Wt=1,Ut=2,qt=3,Vt=4,Xt=5,Zt=6,Jt=7,Kt=8;function Qt(t,i){return(t%i+i)%i}function ti(t,i){if(isNaN(t)||isNaN(i))return NaN;var e=Qt(i,12);return t+=(i-e)/12,1===e?ut(t)?29:28:31-e%7%2}$t=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var i;for(i=0;i<this.length;++i)if(this[i]===t)return i;return-1},P("M",["MM",2],"Mo",(function(){return this.month()+1})),P("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),P("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),nt("month","M"),at("month",8),Lt("M",xt),Lt("MM",xt,bt),Lt("MMM",(function(t,i){return i.monthsShortRegex(t)})),Lt("MMMM",(function(t,i){return i.monthsRegex(t)})),Bt(["M","MM"],(function(t,i){i[Wt]=ct(t)-1})),Bt(["MMM","MMMM"],(function(t,i,e,n){var r=e._locale.monthsParse(t,n,e._strict);null!=r?i[Wt]=r:g(e).invalidMonth=t}));var ii="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ei="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ni=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ri=Ot,si=Ot;function oi(t,i){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ni).test(i)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone}function ai(t,i){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ni.test(i)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function hi(t,i,e){var n,r,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=p([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return e?"MMM"===i?-1!==(r=$t.call(this._shortMonthsParse,o))?r:null:-1!==(r=$t.call(this._longMonthsParse,o))?r:null:"MMM"===i?-1!==(r=$t.call(this._shortMonthsParse,o))||-1!==(r=$t.call(this._longMonthsParse,o))?r:null:-1!==(r=$t.call(this._longMonthsParse,o))||-1!==(r=$t.call(this._shortMonthsParse,o))?r:null}function ui(t,i,e){var n,r,s;if(this._monthsParseExact)return hi.call(this,t,i,e);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=p([2e3,n]),e&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),e||this._monthsParse[n]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),e&&"MMMM"===i&&this._longMonthsParse[n].test(t))return n;if(e&&"MMM"===i&&this._shortMonthsParse[n].test(t))return n;if(!e&&this._monthsParse[n].test(t))return n}}function li(t,i){var e;if(!t.isValid())return t;if("string"==typeof i)if(/^\d+$/.test(i))i=ct(i);else if(!c(i=t.localeData().monthsParse(i)))return t;return e=Math.min(t.date(),ti(t.year(),i)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](i,e),t}function ci(t){return null!=t?(li(this,t),r.updateOffset(this,!0),this):dt(this,"Month")}function fi(){return ti(this.year(),this.month())}function di(t){return this._monthsParseExact?(h(this,"_monthsRegex")||pi.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(h(this,"_monthsShortRegex")||(this._monthsShortRegex=ri),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function vi(t){return this._monthsParseExact?(h(this,"_monthsRegex")||pi.call(this),t?this._monthsStrictRegex:this._monthsRegex):(h(this,"_monthsRegex")||(this._monthsRegex=si),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function pi(){function t(t,i){return i.length-t.length}var i,e,n=[],r=[],s=[];for(i=0;i<12;i++)e=p([2e3,i]),n.push(this.monthsShort(e,"")),r.push(this.months(e,"")),s.push(this.months(e,"")),s.push(this.monthsShort(e,""));for(n.sort(t),r.sort(t),s.sort(t),i=0;i<12;i++)n[i]=Nt(n[i]),r[i]=Nt(r[i]);for(i=0;i<24;i++)s[i]=Nt(s[i]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function mi(t){return ut(t)?366:365}P("Y",0,0,(function(){var t=this.year();return t<=9999?z(t,4):"+"+t})),P(0,["YY",2],0,(function(){return this.year()%100})),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),nt("year","y"),at("year",1),Lt("Y",Yt),Lt("YY",xt,bt),Lt("YYYY",Ft,kt),Lt("YYYYY",Tt,_t),Lt("YYYYYY",Tt,_t),Bt(["YYYYY","YYYYYY"],Gt),Bt("YYYY",(function(t,i){i[Gt]=2===t.length?r.parseTwoDigitYear(t):ct(t)})),Bt("YY",(function(t,i){i[Gt]=r.parseTwoDigitYear(t)})),Bt("Y",(function(t,i){i[Gt]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return ct(t)+(ct(t)>68?1900:2e3)};var gi=ft("FullYear",!0);function yi(){return ut(this.year())}function bi(t,i,e,n,r,s,o){var a;return t<100&&t>=0?(a=new Date(t+400,i,e,n,r,s,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,i,e,n,r,s,o),a}function wi(t){var i,e;return t<100&&t>=0?((e=Array.prototype.slice.call(arguments))[0]=t+400,i=new Date(Date.UTC.apply(null,e)),isFinite(i.getUTCFullYear())&&i.setUTCFullYear(t)):i=new Date(Date.UTC.apply(null,arguments)),i}function ki(t,i,e){var n=7+i-e;return-(7+wi(t,0,n).getUTCDay()-i)%7+n-1}function _i(t,i,e,n,r){var s,o,a=1+7*(i-1)+(7+e-n)%7+ki(t,n,r);return a<=0?o=mi(s=t-1)+a:a>mi(t)?(s=t+1,o=a-mi(t)):(s=t,o=a),{year:s,dayOfYear:o}}function xi(t,i,e){var n,r,s=ki(t.year(),i,e),o=Math.floor((t.dayOfYear()-s-1)/7)+1;return o<1?n=o+Di(r=t.year()-1,i,e):o>Di(t.year(),i,e)?(n=o-Di(t.year(),i,e),r=t.year()+1):(r=t.year(),n=o),{week:n,year:r}}function Di(t,i,e){var n=ki(t,i,e),r=ki(t+1,i,e);return(mi(t)-n+r)/7}function Mi(t){return xi(t,this._week.dow,this._week.doy).week}P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),nt("week","w"),nt("isoWeek","W"),at("week",5),at("isoWeek",5),Lt("w",xt),Lt("ww",xt,bt),Lt("W",xt),Lt("WW",xt,bt),Pt(["w","ww","W","WW"],(function(t,i,e,n){i[n.substr(0,1)]=ct(t)}));var Si={dow:0,doy:6};function Fi(){return this._week.dow}function Ti(){return this._week.doy}function ji(t){var i=this.localeData().week(this);return null==t?i:this.add(7*(t-i),"d")}function Yi(t){var i=xi(this,1,4).week;return null==t?i:this.add(7*(t-i),"d")}function Ei(t,i){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=i.weekdaysParse(t))?t:null:parseInt(t,10)}function Ai(t,i){return"string"==typeof t?i.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Ci(t,i){return t.slice(i,7).concat(t.slice(0,i))}P("d",0,"do","day"),P("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),P("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),P("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),nt("day","d"),nt("weekday","e"),nt("isoWeekday","E"),at("day",11),at("weekday",11),at("isoWeekday",11),Lt("d",xt),Lt("e",xt),Lt("E",xt),Lt("dd",(function(t,i){return i.weekdaysMinRegex(t)})),Lt("ddd",(function(t,i){return i.weekdaysShortRegex(t)})),Lt("dddd",(function(t,i){return i.weekdaysRegex(t)})),Pt(["dd","ddd","dddd"],(function(t,i,e,n){var r=e._locale.weekdaysParse(t,n,e._strict);null!=r?i.d=r:g(e).invalidWeekday=t})),Pt(["d","e","E"],(function(t,i,e,n){i[n]=ct(t)}));var Oi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Li="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),zi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ii=Ot,Ni=Ot,Hi=Ot;function Bi(t,i){var e=o(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(i)?"format":"standalone"];return!0===t?Ci(e,this._week.dow):t?e[t.day()]:e}function Pi(t){return!0===t?Ci(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Ri(t){return!0===t?Ci(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function $i(t,i,e){var n,r,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=p([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return e?"dddd"===i?-1!==(r=$t.call(this._weekdaysParse,o))?r:null:"ddd"===i?-1!==(r=$t.call(this._shortWeekdaysParse,o))?r:null:-1!==(r=$t.call(this._minWeekdaysParse,o))?r:null:"dddd"===i?-1!==(r=$t.call(this._weekdaysParse,o))||-1!==(r=$t.call(this._shortWeekdaysParse,o))||-1!==(r=$t.call(this._minWeekdaysParse,o))?r:null:"ddd"===i?-1!==(r=$t.call(this._shortWeekdaysParse,o))||-1!==(r=$t.call(this._weekdaysParse,o))||-1!==(r=$t.call(this._minWeekdaysParse,o))?r:null:-1!==(r=$t.call(this._minWeekdaysParse,o))||-1!==(r=$t.call(this._weekdaysParse,o))||-1!==(r=$t.call(this._shortWeekdaysParse,o))?r:null}function Gi(t,i,e){var n,r,s;if(this._weekdaysParseExact)return $i.call(this,t,i,e);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=p([2e3,1]).day(n),e&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),e&&"dddd"===i&&this._fullWeekdaysParse[n].test(t))return n;if(e&&"ddd"===i&&this._shortWeekdaysParse[n].test(t))return n;if(e&&"dd"===i&&this._minWeekdaysParse[n].test(t))return n;if(!e&&this._weekdaysParse[n].test(t))return n}}function Wi(t){if(!this.isValid())return null!=t?this:NaN;var i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Ei(t,this.localeData()),this.add(t-i,"d")):i}function Ui(t){if(!this.isValid())return null!=t?this:NaN;var i=(this.day()+7-this.localeData()._week.dow)%7;return null==t?i:this.add(t-i,"d")}function qi(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var i=Ai(t,this.localeData());return this.day(this.day()%7?i:i-7)}return this.day()||7}function Vi(t){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Ji.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(h(this,"_weekdaysRegex")||(this._weekdaysRegex=Ii),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Xi(t){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Ji.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(h(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ni),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Zi(t){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Ji.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Hi),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ji(){function t(t,i){return i.length-t.length}var i,e,n,r,s,o=[],a=[],h=[],u=[];for(i=0;i<7;i++)e=p([2e3,1]).day(i),n=Nt(this.weekdaysMin(e,"")),r=Nt(this.weekdaysShort(e,"")),s=Nt(this.weekdays(e,"")),o.push(n),a.push(r),h.push(s),u.push(n),u.push(r),u.push(s);o.sort(t),a.sort(t),h.sort(t),u.sort(t),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Ki(){return this.hours()%12||12}function Qi(){return this.hours()||24}function te(t,i){P(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),i)}))}function ie(t,i){return i._meridiemParse}function ee(t){return"p"===(t+"").toLowerCase().charAt(0)}P("H",["HH",2],0,"hour"),P("h",["hh",2],0,Ki),P("k",["kk",2],0,Qi),P("hmm",0,0,(function(){return""+Ki.apply(this)+z(this.minutes(),2)})),P("hmmss",0,0,(function(){return""+Ki.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)})),P("Hmm",0,0,(function(){return""+this.hours()+z(this.minutes(),2)})),P("Hmmss",0,0,(function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)})),te("a",!0),te("A",!1),nt("hour","h"),at("hour",13),Lt("a",ie),Lt("A",ie),Lt("H",xt),Lt("h",xt),Lt("k",xt),Lt("HH",xt,bt),Lt("hh",xt,bt),Lt("kk",xt,bt),Lt("hmm",Dt),Lt("hmmss",Mt),Lt("Hmm",Dt),Lt("Hmmss",Mt),Bt(["H","HH"],qt),Bt(["k","kk"],(function(t,i,e){var n=ct(t);i[qt]=24===n?0:n})),Bt(["a","A"],(function(t,i,e){e._isPm=e._locale.isPM(t),e._meridiem=t})),Bt(["h","hh"],(function(t,i,e){i[qt]=ct(t),g(e).bigHour=!0})),Bt("hmm",(function(t,i,e){var n=t.length-2;i[qt]=ct(t.substr(0,n)),i[Vt]=ct(t.substr(n)),g(e).bigHour=!0})),Bt("hmmss",(function(t,i,e){var n=t.length-4,r=t.length-2;i[qt]=ct(t.substr(0,n)),i[Vt]=ct(t.substr(n,2)),i[Xt]=ct(t.substr(r)),g(e).bigHour=!0})),Bt("Hmm",(function(t,i,e){var n=t.length-2;i[qt]=ct(t.substr(0,n)),i[Vt]=ct(t.substr(n))})),Bt("Hmmss",(function(t,i,e){var n=t.length-4,r=t.length-2;i[qt]=ct(t.substr(0,n)),i[Vt]=ct(t.substr(n,2)),i[Xt]=ct(t.substr(r))}));var ne=/[ap]\.?m?\.?/i,re=ft("Hours",!0);function se(t,i,e){return t>11?e?"pm":"PM":e?"am":"AM"}var oe,ae={calendar:O,longDateFormat:U,invalidDate:V,ordinal:Z,dayOfMonthOrdinalParse:J,relativeTime:Q,months:ii,monthsShort:ei,week:Si,weekdays:Oi,weekdaysMin:zi,weekdaysShort:Li,meridiemParse:ne},he={},ue={};function le(t,i){var e,n=Math.min(t.length,i.length);for(e=0;e<n;e+=1)if(t[e]!==i[e])return e;return n}function ce(t){return t?t.toLowerCase().replace("_","-"):t}function fe(t){for(var i,e,n,r,s=0;s<t.length;){for(i=(r=ce(t[s]).split("-")).length,e=(e=ce(t[s+1]))?e.split("-"):null;i>0;){if(n=de(r.slice(0,i).join("-")))return n;if(e&&e.length>=i&&le(r,e)>=i-1)break;i--}s++}return oe}function de(i){var n=null;if(void 0===he[i]&&t&&t.exports)try{n=oe._abbr,e(),ve(n)}catch(t){he[i]=null}return he[i]}function ve(t,i){var e;return t&&((e=l(i)?ge(t):pe(t,i))?oe=e:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),oe._abbr}function pe(t,i){if(null!==i){var e,n=ae;if(i.abbr=t,null!=he[t])j("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=he[t]._config;else if(null!=i.parentLocale)if(null!=he[i.parentLocale])n=he[i.parentLocale]._config;else{if(null==(e=de(i.parentLocale)))return ue[i.parentLocale]||(ue[i.parentLocale]=[]),ue[i.parentLocale].push({name:t,config:i}),null;n=e._config}return he[t]=new C(A(n,i)),ue[t]&&ue[t].forEach((function(t){pe(t.name,t.config)})),ve(t),he[t]}return delete he[t],null}function me(t,i){if(null!=i){var e,n,r=ae;null!=he[t]&&null!=he[t].parentLocale?he[t].set(A(he[t]._config,i)):(null!=(n=de(t))&&(r=n._config),i=A(r,i),null==n&&(i.abbr=t),(e=new C(i)).parentLocale=he[t],he[t]=e),ve(t)}else null!=he[t]&&(null!=he[t].parentLocale?(he[t]=he[t].parentLocale,t===ve()&&ve(t)):null!=he[t]&&delete he[t]);return he[t]}function ge(t){var i;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return oe;if(!o(t)){if(i=de(t))return i;t=[t]}return fe(t)}function ye(){return F(he)}function be(t){var i,e=t._a;return e&&-2===g(t).overflow&&(i=e[Wt]<0||e[Wt]>11?Wt:e[Ut]<1||e[Ut]>ti(e[Gt],e[Wt])?Ut:e[qt]<0||e[qt]>24||24===e[qt]&&(0!==e[Vt]||0!==e[Xt]||0!==e[Zt])?qt:e[Vt]<0||e[Vt]>59?Vt:e[Xt]<0||e[Xt]>59?Xt:e[Zt]<0||e[Zt]>999?Zt:-1,g(t)._overflowDayOfYear&&(i<Gt||i>Ut)&&(i=Ut),g(t)._overflowWeeks&&-1===i&&(i=Jt),g(t)._overflowWeekday&&-1===i&&(i=Kt),g(t).overflow=i),t}var we=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ke=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_e=/Z|[+-]\d\d(?::?\d\d)?/,xe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],De=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Me=/^\/?Date\((-?\d+)/i,Se=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Fe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Te(t){var i,e,n,r,s,o,a=t._i,h=we.exec(a)||ke.exec(a);if(h){for(g(t).iso=!0,i=0,e=xe.length;i<e;i++)if(xe[i][1].exec(h[1])){r=xe[i][0],n=!1!==xe[i][2];break}if(null==r)return void(t._isValid=!1);if(h[3]){for(i=0,e=De.length;i<e;i++)if(De[i][1].exec(h[3])){s=(h[2]||" ")+De[i][0];break}if(null==s)return void(t._isValid=!1)}if(!n&&null!=s)return void(t._isValid=!1);if(h[4]){if(!_e.exec(h[4]))return void(t._isValid=!1);o="Z"}t._f=r+(s||"")+(o||""),Be(t)}else t._isValid=!1}function je(t,i,e,n,r,s){var o=[Ye(t),ei.indexOf(i),parseInt(e,10),parseInt(n,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function Ye(t){var i=parseInt(t,10);return i<=49?2e3+i:i<=999?1900+i:i}function Ee(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ae(t,i,e){return!t||Li.indexOf(t)===new Date(i[0],i[1],i[2]).getDay()||(g(e).weekdayMismatch=!0,e._isValid=!1,!1)}function Ce(t,i,e){if(t)return Fe[t];if(i)return 0;var n=parseInt(e,10),r=n%100;return(n-r)/100*60+r}function Oe(t){var i,e=Se.exec(Ee(t._i));if(e){if(i=je(e[4],e[3],e[2],e[5],e[6],e[7]),!Ae(e[1],i,t))return;t._a=i,t._tzm=Ce(e[8],e[9],e[10]),t._d=wi.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),g(t).rfc2822=!0}else t._isValid=!1}function Le(t){var i=Me.exec(t._i);null===i?(Te(t),!1===t._isValid&&(delete t._isValid,Oe(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+i[1])}function ze(t,i,e){return null!=t?t:null!=i?i:e}function Ie(t){var i=new Date(r.now());return t._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function Ne(t){var i,e,n,r,s,o=[];if(!t._d){for(n=Ie(t),t._w&&null==t._a[Ut]&&null==t._a[Wt]&&He(t),null!=t._dayOfYear&&(s=ze(t._a[Gt],n[Gt]),(t._dayOfYear>mi(s)||0===t._dayOfYear)&&(g(t)._overflowDayOfYear=!0),e=wi(s,0,t._dayOfYear),t._a[Wt]=e.getUTCMonth(),t._a[Ut]=e.getUTCDate()),i=0;i<3&&null==t._a[i];++i)t._a[i]=o[i]=n[i];for(;i<7;i++)t._a[i]=o[i]=null==t._a[i]?2===i?1:0:t._a[i];24===t._a[qt]&&0===t._a[Vt]&&0===t._a[Xt]&&0===t._a[Zt]&&(t._nextDay=!0,t._a[qt]=0),t._d=(t._useUTC?wi:bi).apply(null,o),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[qt]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(g(t).weekdayMismatch=!0)}}function He(t){var i,e,n,r,s,o,a,h,u;null!=(i=t._w).GG||null!=i.W||null!=i.E?(s=1,o=4,e=ze(i.GG,t._a[Gt],xi(Ve(),1,4).year),n=ze(i.W,1),((r=ze(i.E,1))<1||r>7)&&(h=!0)):(s=t._locale._week.dow,o=t._locale._week.doy,u=xi(Ve(),s,o),e=ze(i.gg,t._a[Gt],u.year),n=ze(i.w,u.week),null!=i.d?((r=i.d)<0||r>6)&&(h=!0):null!=i.e?(r=i.e+s,(i.e<0||i.e>6)&&(h=!0)):r=s),n<1||n>Di(e,s,o)?g(t)._overflowWeeks=!0:null!=h?g(t)._overflowWeekday=!0:(a=_i(e,n,r,s,o),t._a[Gt]=a.year,t._dayOfYear=a.dayOfYear)}function Be(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],g(t).empty=!0;var i,e,n,s,o,a,h=""+t._i,u=h.length,l=0;for(n=W(t._f,t._locale).match(I)||[],i=0;i<n.length;i++)s=n[i],(e=(h.match(zt(s,t))||[])[0])&&((o=h.substr(0,h.indexOf(e))).length>0&&g(t).unusedInput.push(o),h=h.slice(h.indexOf(e)+e.length),l+=e.length),B[s]?(e?g(t).empty=!1:g(t).unusedTokens.push(s),Rt(s,e,t)):t._strict&&!e&&g(t).unusedTokens.push(s);g(t).charsLeftOver=u-l,h.length>0&&g(t).unusedInput.push(h),t._a[qt]<=12&&!0===g(t).bigHour&&t._a[qt]>0&&(g(t).bigHour=void 0),g(t).parsedDateParts=t._a.slice(0),g(t).meridiem=t._meridiem,t._a[qt]=Pe(t._locale,t._a[qt],t._meridiem),null!==(a=g(t).era)&&(t._a[Gt]=t._locale.erasConvertYear(a,t._a[Gt])),Ne(t),be(t)}else Oe(t);else Te(t)}function Pe(t,i,e){var n;return null==e?i:null!=t.meridiemHour?t.meridiemHour(i,e):null!=t.isPM?((n=t.isPM(e))&&i<12&&(i+=12),n||12!==i||(i=0),i):i}function Re(t){var i,e,n,r,s,o,a=!1;if(0===t._f.length)return g(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,o=!1,i=_({},t),null!=t._useUTC&&(i._useUTC=t._useUTC),i._f=t._f[r],Be(i),y(i)&&(o=!0),s+=g(i).charsLeftOver,s+=10*g(i).unusedTokens.length,g(i).score=s,a?s<n&&(n=s,e=i):(null==n||s<n||o)&&(n=s,e=i,o&&(a=!0));v(t,e||i)}function $e(t){if(!t._d){var i=st(t._i),e=void 0===i.day?i.date:i.day;t._a=d([i.year,i.month,e,i.hour,i.minute,i.second,i.millisecond],(function(t){return t&&parseInt(t,10)})),Ne(t)}}function Ge(t){var i=new x(be(We(t)));return i._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function We(t){var i=t._i,e=t._f;return t._locale=t._locale||ge(t._l),null===i||void 0===e&&""===i?b({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),D(i)?new x(be(i)):(f(i)?t._d=i:o(e)?Re(t):e?Be(t):Ue(t),y(t)||(t._d=null),t))}function Ue(t){var i=t._i;l(i)?t._d=new Date(r.now()):f(i)?t._d=new Date(i.valueOf()):"string"==typeof i?Le(t):o(i)?(t._a=d(i.slice(0),(function(t){return parseInt(t,10)})),Ne(t)):a(i)?$e(t):c(i)?t._d=new Date(i):r.createFromInputFallback(t)}function qe(t,i,e,n,r){var s={};return!0!==i&&!1!==i||(n=i,i=void 0),!0!==e&&!1!==e||(n=e,e=void 0),(a(t)&&u(t)||o(t)&&0===t.length)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=e,s._i=t,s._f=i,s._strict=n,Ge(s)}function Ve(t,i,e,n){return qe(t,i,e,n,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Xe=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ve.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:b()})),Ze=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ve.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:b()}));function Je(t,i){var e,n;if(1===i.length&&o(i[0])&&(i=i[0]),!i.length)return Ve();for(e=i[0],n=1;n<i.length;++n)i[n].isValid()&&!i[n][t](e)||(e=i[n]);return e}function Ke(){return Je("isBefore",[].slice.call(arguments,0))}function Qe(){return Je("isAfter",[].slice.call(arguments,0))}var tn=function(){return Date.now?Date.now():+new Date},en=["year","quarter","month","week","day","hour","minute","second","millisecond"];function nn(t){var i,e,n=!1;for(i in t)if(h(t,i)&&(-1===$t.call(en,i)||null!=t[i]&&isNaN(t[i])))return!1;for(e=0;e<en.length;++e)if(t[en[e]]){if(n)return!1;parseFloat(t[en[e]])!==ct(t[en[e]])&&(n=!0)}return!0}function rn(){return this._isValid}function sn(){return Tn(NaN)}function on(t){var i=st(t),e=i.year||0,n=i.quarter||0,r=i.month||0,s=i.week||i.isoWeek||0,o=i.day||0,a=i.hour||0,h=i.minute||0,u=i.second||0,l=i.millisecond||0;this._isValid=nn(i),this._milliseconds=+l+1e3*u+6e4*h+1e3*a*60*60,this._days=+o+7*s,this._months=+r+3*n+12*e,this._data={},this._locale=ge(),this._bubble()}function an(t){return t instanceof on}function hn(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function un(t,i,e){var n,r=Math.min(t.length,i.length),s=Math.abs(t.length-i.length),o=0;for(n=0;n<r;n++)(e&&t[n]!==i[n]||!e&&ct(t[n])!==ct(i[n]))&&o++;return o+s}function ln(t,i){P(t,0,0,(function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+z(~~(t/60),2)+i+z(~~t%60,2)}))}ln("Z",":"),ln("ZZ",""),Lt("Z",At),Lt("ZZ",At),Bt(["Z","ZZ"],(function(t,i,e){e._useUTC=!0,e._tzm=fn(At,t)}));var cn=/([\+\-]|\d\d)/gi;function fn(t,i){var e,n,r=(i||"").match(t);return null===r?null:0===(n=60*(e=((r[r.length-1]||[])+"").match(cn)||["-",0,0])[1]+ct(e[2]))?0:"+"===e[0]?n:-n}function dn(t,i){var e,n;return i._isUTC?(e=i.clone(),n=(D(t)||f(t)?t.valueOf():Ve(t).valueOf())-e.valueOf(),e._d.setTime(e._d.valueOf()+n),r.updateOffset(e,!1),e):Ve(t).local()}function vn(t){return-Math.round(t._d.getTimezoneOffset())}function pn(t,i,e){var n,s=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=fn(At,t)))return this}else Math.abs(t)<16&&!e&&(t*=60);return!this._isUTC&&i&&(n=vn(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==t&&(!i||this._changeInProgress?Cn(this,Tn(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:vn(this)}function mn(t,i){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,i),this):-this.utcOffset()}function gn(t){return this.utcOffset(0,t)}function yn(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(vn(this),"m")),this}function bn(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=fn(Et,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function wn(t){return!!this.isValid()&&(t=t?Ve(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function kn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function _n(){if(!l(this._isDSTShifted))return this._isDSTShifted;var t,i={};return _(i,this),(i=We(i))._a?(t=i._isUTC?p(i._a):Ve(i._a),this._isDSTShifted=this.isValid()&&un(i._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function xn(){return!!this.isValid()&&!this._isUTC}function Dn(){return!!this.isValid()&&this._isUTC}function Mn(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Sn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Fn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Tn(t,i){var e,n,r,s=t,o=null;return an(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(s={},i?s[i]=+t:s.milliseconds=+t):(o=Sn.exec(t))?(e="-"===o[1]?-1:1,s={y:0,d:ct(o[Ut])*e,h:ct(o[qt])*e,m:ct(o[Vt])*e,s:ct(o[Xt])*e,ms:ct(hn(1e3*o[Zt]))*e}):(o=Fn.exec(t))?(e="-"===o[1]?-1:1,s={y:jn(o[2],e),M:jn(o[3],e),w:jn(o[4],e),d:jn(o[5],e),h:jn(o[6],e),m:jn(o[7],e),s:jn(o[8],e)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=En(Ve(s.from),Ve(s.to)),(s={}).ms=r.milliseconds,s.M=r.months),n=new on(s),an(t)&&h(t,"_locale")&&(n._locale=t._locale),an(t)&&h(t,"_isValid")&&(n._isValid=t._isValid),n}function jn(t,i){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i}function Yn(t,i){var e={};return e.months=i.month()-t.month()+12*(i.year()-t.year()),t.clone().add(e.months,"M").isAfter(i)&&--e.months,e.milliseconds=+i-+t.clone().add(e.months,"M"),e}function En(t,i){var e;return t.isValid()&&i.isValid()?(i=dn(i,t),t.isBefore(i)?e=Yn(t,i):((e=Yn(i,t)).milliseconds=-e.milliseconds,e.months=-e.months),e):{milliseconds:0,months:0}}function An(t,i){return function(e,n){var r;return null===n||isNaN(+n)||(j(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=e,e=n,n=r),Cn(this,Tn(e,n),t),this}}function Cn(t,i,e,n){var s=i._milliseconds,o=hn(i._days),a=hn(i._months);t.isValid()&&(n=null==n||n,a&&li(t,dt(t,"Month")+a*e),o&&vt(t,"Date",dt(t,"Date")+o*e),s&&t._d.setTime(t._d.valueOf()+s*e),n&&r.updateOffset(t,o||a))}Tn.fn=on.prototype,Tn.invalid=sn;var On=An(1,"add"),Ln=An(-1,"subtract");function zn(t){return"string"==typeof t||t instanceof String}function In(t){return D(t)||f(t)||zn(t)||c(t)||Hn(t)||Nn(t)||null==t}function Nn(t){var i,e,n=a(t)&&!u(t),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(i=0;i<s.length;i+=1)e=s[i],r=r||h(t,e);return n&&r}function Hn(t){var i=o(t),e=!1;return i&&(e=0===t.filter((function(i){return!c(i)&&zn(t)})).length),i&&e}function Bn(t){var i,e,n=a(t)&&!u(t),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(i=0;i<s.length;i+=1)e=s[i],r=r||h(t,e);return n&&r}function Pn(t,i){var e=t.diff(i,"days",!0);return e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"}function Rn(t,i){1===arguments.length&&(arguments[0]?In(arguments[0])?(t=arguments[0],i=void 0):Bn(arguments[0])&&(i=arguments[0],t=void 0):(t=void 0,i=void 0));var e=t||Ve(),n=dn(e,this).startOf("day"),s=r.calendarFormat(this,n)||"sameElse",o=i&&(Y(i[s])?i[s].call(this,e):i[s]);return this.format(o||this.localeData().calendar(s,this,Ve(e)))}function $n(){return new x(this)}function Gn(t,i){var e=D(t)?t:Ve(t);return!(!this.isValid()||!e.isValid())&&("millisecond"===(i=rt(i)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(i).valueOf())}function Wn(t,i){var e=D(t)?t:Ve(t);return!(!this.isValid()||!e.isValid())&&("millisecond"===(i=rt(i)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(i).valueOf()<e.valueOf())}function Un(t,i,e,n){var r=D(t)?t:Ve(t),s=D(i)?i:Ve(i);return!!(this.isValid()&&r.isValid()&&s.isValid())&&("("===(n=n||"()")[0]?this.isAfter(r,e):!this.isBefore(r,e))&&(")"===n[1]?this.isBefore(s,e):!this.isAfter(s,e))}function qn(t,i){var e,n=D(t)?t:Ve(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(i=rt(i)||"millisecond")?this.valueOf()===n.valueOf():(e=n.valueOf(),this.clone().startOf(i).valueOf()<=e&&e<=this.clone().endOf(i).valueOf()))}function Vn(t,i){return this.isSame(t,i)||this.isAfter(t,i)}function Xn(t,i){return this.isSame(t,i)||this.isBefore(t,i)}function Zn(t,i,e){var n,r,s;if(!this.isValid())return NaN;if(!(n=dn(t,this)).isValid())return NaN;switch(r=6e4*(n.utcOffset()-this.utcOffset()),i=rt(i)){case"year":s=Jn(this,n)/12;break;case"month":s=Jn(this,n);break;case"quarter":s=Jn(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-r)/864e5;break;case"week":s=(this-n-r)/6048e5;break;default:s=this-n}return e?s:lt(s)}function Jn(t,i){if(t.date()<i.date())return-Jn(i,t);var e=12*(i.year()-t.year())+(i.month()-t.month()),n=t.clone().add(e,"months");return-(e+(i-n<0?(i-n)/(n-t.clone().add(e-1,"months")):(i-n)/(t.clone().add(e+1,"months")-n)))||0}function Kn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qn(t){if(!this.isValid())return null;var i=!0!==t,e=i?this.clone().utc():this;return e.year()<0||e.year()>9999?G(e,i?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Y(Date.prototype.toISOString)?i?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",G(e,"Z")):G(e,i?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function tr(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,i,e,n,r="moment",s="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),t="["+r+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",e="-MM-DD[T]HH:mm:ss.SSS",n=s+'[")]',this.format(t+i+e+n)}function ir(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var i=G(this,t);return this.localeData().postformat(i)}function er(t,i){return this.isValid()&&(D(t)&&t.isValid()||Ve(t).isValid())?Tn({to:this,from:t}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function nr(t){return this.from(Ve(),t)}function rr(t,i){return this.isValid()&&(D(t)&&t.isValid()||Ve(t).isValid())?Tn({from:this,to:t}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function sr(t){return this.to(Ve(),t)}function or(t){var i;return void 0===t?this._locale._abbr:(null!=(i=ge(t))&&(this._locale=i),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ar=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function hr(){return this._locale}var ur=1e3,lr=60*ur,cr=60*lr,fr=3506328*cr;function dr(t,i){return(t%i+i)%i}function vr(t,i,e){return t<100&&t>=0?new Date(t+400,i,e)-fr:new Date(t,i,e).valueOf()}function pr(t,i,e){return t<100&&t>=0?Date.UTC(t+400,i,e)-fr:Date.UTC(t,i,e)}function mr(t){var i,e;if(void 0===(t=rt(t))||"millisecond"===t||!this.isValid())return this;switch(e=this._isUTC?pr:vr,t){case"year":i=e(this.year(),0,1);break;case"quarter":i=e(this.year(),this.month()-this.month()%3,1);break;case"month":i=e(this.year(),this.month(),1);break;case"week":i=e(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=e(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=e(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf(),i-=dr(i+(this._isUTC?0:this.utcOffset()*lr),cr);break;case"minute":i=this._d.valueOf(),i-=dr(i,lr);break;case"second":i=this._d.valueOf(),i-=dr(i,ur)}return this._d.setTime(i),r.updateOffset(this,!0),this}function gr(t){var i,e;if(void 0===(t=rt(t))||"millisecond"===t||!this.isValid())return this;switch(e=this._isUTC?pr:vr,t){case"year":i=e(this.year()+1,0,1)-1;break;case"quarter":i=e(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=e(this.year(),this.month()+1,1)-1;break;case"week":i=e(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=e(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=e(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf(),i+=cr-dr(i+(this._isUTC?0:this.utcOffset()*lr),cr)-1;break;case"minute":i=this._d.valueOf(),i+=lr-dr(i,lr)-1;break;case"second":i=this._d.valueOf(),i+=ur-dr(i,ur)-1}return this._d.setTime(i),r.updateOffset(this,!0),this}function yr(){return this._d.valueOf()-6e4*(this._offset||0)}function br(){return Math.floor(this.valueOf()/1e3)}function wr(){return new Date(this.valueOf())}function kr(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function _r(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function xr(){return this.isValid()?this.toISOString():null}function Dr(){return y(this)}function Mr(){return v({},g(this))}function Sr(){return g(this).overflow}function Fr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Tr(t,i){var e,n,s,o=this._eras||ge("en")._eras;for(e=0,n=o.length;e<n;++e){switch(typeof o[e].since){case"string":s=r(o[e].since).startOf("day"),o[e].since=s.valueOf()}switch(typeof o[e].until){case"undefined":o[e].until=1/0;break;case"string":s=r(o[e].until).startOf("day").valueOf(),o[e].until=s.valueOf()}}return o}function jr(t,i,e){var n,r,s,o,a,h=this.eras();for(t=t.toUpperCase(),n=0,r=h.length;n<r;++n)if(s=h[n].name.toUpperCase(),o=h[n].abbr.toUpperCase(),a=h[n].narrow.toUpperCase(),e)switch(i){case"N":case"NN":case"NNN":if(o===t)return h[n];break;case"NNNN":if(s===t)return h[n];break;case"NNNNN":if(a===t)return h[n]}else if([s,o,a].indexOf(t)>=0)return h[n]}function Yr(t,i){var e=t.since<=t.until?1:-1;return void 0===i?r(t.since).year():r(t.since).year()+(i-t.offset)*e}function Er(){var t,i,e,n=this.localeData().eras();for(t=0,i=n.length;t<i;++t){if(e=this.clone().startOf("day").valueOf(),n[t].since<=e&&e<=n[t].until)return n[t].name;if(n[t].until<=e&&e<=n[t].since)return n[t].name}return""}function Ar(){var t,i,e,n=this.localeData().eras();for(t=0,i=n.length;t<i;++t){if(e=this.clone().startOf("day").valueOf(),n[t].since<=e&&e<=n[t].until)return n[t].narrow;if(n[t].until<=e&&e<=n[t].since)return n[t].narrow}return""}function Cr(){var t,i,e,n=this.localeData().eras();for(t=0,i=n.length;t<i;++t){if(e=this.clone().startOf("day").valueOf(),n[t].since<=e&&e<=n[t].until)return n[t].abbr;if(n[t].until<=e&&e<=n[t].since)return n[t].abbr}return""}function Or(){var t,i,e,n,s=this.localeData().eras();for(t=0,i=s.length;t<i;++t)if(e=s[t].since<=s[t].until?1:-1,n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return(this.year()-r(s[t].since).year())*e+s[t].offset;return this.year()}function Lr(t){return h(this,"_erasNameRegex")||Rr.call(this),t?this._erasNameRegex:this._erasRegex}function zr(t){return h(this,"_erasAbbrRegex")||Rr.call(this),t?this._erasAbbrRegex:this._erasRegex}function Ir(t){return h(this,"_erasNarrowRegex")||Rr.call(this),t?this._erasNarrowRegex:this._erasRegex}function Nr(t,i){return i.erasAbbrRegex(t)}function Hr(t,i){return i.erasNameRegex(t)}function Br(t,i){return i.erasNarrowRegex(t)}function Pr(t,i){return i._eraYearOrdinalRegex||jt}function Rr(){var t,i,e=[],n=[],r=[],s=[],o=this.eras();for(t=0,i=o.length;t<i;++t)n.push(Nt(o[t].name)),e.push(Nt(o[t].abbr)),r.push(Nt(o[t].narrow)),s.push(Nt(o[t].name)),s.push(Nt(o[t].abbr)),s.push(Nt(o[t].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function $r(t,i){P(0,[t,t.length],0,i)}function Gr(t){return Zr.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Wr(t){return Zr.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Ur(){return Di(this.year(),1,4)}function qr(){return Di(this.isoWeekYear(),1,4)}function Vr(){var t=this.localeData()._week;return Di(this.year(),t.dow,t.doy)}function Xr(){var t=this.localeData()._week;return Di(this.weekYear(),t.dow,t.doy)}function Zr(t,i,e,n,r){var s;return null==t?xi(this,n,r).year:(i>(s=Di(t,n,r))&&(i=s),Jr.call(this,t,i,e,n,r))}function Jr(t,i,e,n,r){var s=_i(t,i,e,n,r),o=wi(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Kr(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}P("N",0,0,"eraAbbr"),P("NN",0,0,"eraAbbr"),P("NNN",0,0,"eraAbbr"),P("NNNN",0,0,"eraName"),P("NNNNN",0,0,"eraNarrow"),P("y",["y",1],"yo","eraYear"),P("y",["yy",2],0,"eraYear"),P("y",["yyy",3],0,"eraYear"),P("y",["yyyy",4],0,"eraYear"),Lt("N",Nr),Lt("NN",Nr),Lt("NNN",Nr),Lt("NNNN",Hr),Lt("NNNNN",Br),Bt(["N","NN","NNN","NNNN","NNNNN"],(function(t,i,e,n){var r=e._locale.erasParse(t,n,e._strict);r?g(e).era=r:g(e).invalidEra=t})),Lt("y",jt),Lt("yy",jt),Lt("yyy",jt),Lt("yyyy",jt),Lt("yo",Pr),Bt(["y","yy","yyy","yyyy"],Gt),Bt(["yo"],(function(t,i,e,n){var r;e._locale._eraYearOrdinalRegex&&(r=t.match(e._locale._eraYearOrdinalRegex)),e._locale.eraYearOrdinalParse?i[Gt]=e._locale.eraYearOrdinalParse(t,r):i[Gt]=parseInt(t,10)})),P(0,["gg",2],0,(function(){return this.weekYear()%100})),P(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),$r("gggg","weekYear"),$r("ggggg","weekYear"),$r("GGGG","isoWeekYear"),$r("GGGGG","isoWeekYear"),nt("weekYear","gg"),nt("isoWeekYear","GG"),at("weekYear",1),at("isoWeekYear",1),Lt("G",Yt),Lt("g",Yt),Lt("GG",xt,bt),Lt("gg",xt,bt),Lt("GGGG",Ft,kt),Lt("gggg",Ft,kt),Lt("GGGGG",Tt,_t),Lt("ggggg",Tt,_t),Pt(["gggg","ggggg","GGGG","GGGGG"],(function(t,i,e,n){i[n.substr(0,2)]=ct(t)})),Pt(["gg","GG"],(function(t,i,e,n){i[n]=r.parseTwoDigitYear(t)})),P("Q",0,"Qo","quarter"),nt("quarter","Q"),at("quarter",7),Lt("Q",yt),Bt("Q",(function(t,i){i[Wt]=3*(ct(t)-1)})),P("D",["DD",2],"Do","date"),nt("date","D"),at("date",9),Lt("D",xt),Lt("DD",xt,bt),Lt("Do",(function(t,i){return t?i._dayOfMonthOrdinalParse||i._ordinalParse:i._dayOfMonthOrdinalParseLenient})),Bt(["D","DD"],Ut),Bt("Do",(function(t,i){i[Ut]=ct(t.match(xt)[0])}));var Qr=ft("Date",!0);function ts(t){var i=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?i:this.add(t-i,"d")}P("DDD",["DDDD",3],"DDDo","dayOfYear"),nt("dayOfYear","DDD"),at("dayOfYear",4),Lt("DDD",St),Lt("DDDD",wt),Bt(["DDD","DDDD"],(function(t,i,e){e._dayOfYear=ct(t)})),P("m",["mm",2],0,"minute"),nt("minute","m"),at("minute",14),Lt("m",xt),Lt("mm",xt,bt),Bt(["m","mm"],Vt);var is=ft("Minutes",!1);P("s",["ss",2],0,"second"),nt("second","s"),at("second",15),Lt("s",xt),Lt("ss",xt,bt),Bt(["s","ss"],Xt);var es,ns,rs=ft("Seconds",!1);for(P("S",0,0,(function(){return~~(this.millisecond()/100)})),P(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),P(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),P(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),P(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),P(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),P(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),nt("millisecond","ms"),at("millisecond",16),Lt("S",St,yt),Lt("SS",St,bt),Lt("SSS",St,wt),es="SSSS";es.length<=9;es+="S")Lt(es,jt);function ss(t,i){i[Zt]=ct(1e3*("0."+t))}for(es="S";es.length<=9;es+="S")Bt(es,ss);function os(){return this._isUTC?"UTC":""}function as(){return this._isUTC?"Coordinated Universal Time":""}ns=ft("Milliseconds",!1),P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var hs=x.prototype;function us(t){return Ve(1e3*t)}function ls(){return Ve.apply(null,arguments).parseZone()}function cs(t){return t}hs.add=On,hs.calendar=Rn,hs.clone=$n,hs.diff=Zn,hs.endOf=gr,hs.format=ir,hs.from=er,hs.fromNow=nr,hs.to=rr,hs.toNow=sr,hs.get=pt,hs.invalidAt=Sr,hs.isAfter=Gn,hs.isBefore=Wn,hs.isBetween=Un,hs.isSame=qn,hs.isSameOrAfter=Vn,hs.isSameOrBefore=Xn,hs.isValid=Dr,hs.lang=ar,hs.locale=or,hs.localeData=hr,hs.max=Ze,hs.min=Xe,hs.parsingFlags=Mr,hs.set=mt,hs.startOf=mr,hs.subtract=Ln,hs.toArray=kr,hs.toObject=_r,hs.toDate=wr,hs.toISOString=Qn,hs.inspect=tr,"undefined"!=typeof Symbol&&null!=Symbol.for&&(hs[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),hs.toJSON=xr,hs.toString=Kn,hs.unix=br,hs.valueOf=yr,hs.creationData=Fr,hs.eraName=Er,hs.eraNarrow=Ar,hs.eraAbbr=Cr,hs.eraYear=Or,hs.year=gi,hs.isLeapYear=yi,hs.weekYear=Gr,hs.isoWeekYear=Wr,hs.quarter=hs.quarters=Kr,hs.month=ci,hs.daysInMonth=fi,hs.week=hs.weeks=ji,hs.isoWeek=hs.isoWeeks=Yi,hs.weeksInYear=Vr,hs.weeksInWeekYear=Xr,hs.isoWeeksInYear=Ur,hs.isoWeeksInISOWeekYear=qr,hs.date=Qr,hs.day=hs.days=Wi,hs.weekday=Ui,hs.isoWeekday=qi,hs.dayOfYear=ts,hs.hour=hs.hours=re,hs.minute=hs.minutes=is,hs.second=hs.seconds=rs,hs.millisecond=hs.milliseconds=ns,hs.utcOffset=pn,hs.utc=gn,hs.local=yn,hs.parseZone=bn,hs.hasAlignedHourOffset=wn,hs.isDST=kn,hs.isLocal=xn,hs.isUtcOffset=Dn,hs.isUtc=Mn,hs.isUTC=Mn,hs.zoneAbbr=os,hs.zoneName=as,hs.dates=S("dates accessor is deprecated. Use date instead.",Qr),hs.months=S("months accessor is deprecated. Use month instead",ci),hs.years=S("years accessor is deprecated. Use year instead",gi),hs.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mn),hs.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",_n);var fs=C.prototype;function ds(t,i,e,n){var r=ge(),s=p().set(n,i);return r[e](s,t)}function vs(t,i,e){if(c(t)&&(i=t,t=void 0),t=t||"",null!=i)return ds(t,i,e,"month");var n,r=[];for(n=0;n<12;n++)r[n]=ds(t,n,e,"month");return r}function ps(t,i,e,n){"boolean"==typeof t?(c(i)&&(e=i,i=void 0),i=i||""):(e=i=t,t=!1,c(i)&&(e=i,i=void 0),i=i||"");var r,s=ge(),o=t?s._week.dow:0,a=[];if(null!=e)return ds(i,(e+o)%7,n,"day");for(r=0;r<7;r++)a[r]=ds(i,(r+o)%7,n,"day");return a}function ms(t,i){return vs(t,i,"months")}function gs(t,i){return vs(t,i,"monthsShort")}function ys(t,i,e){return ps(t,i,e,"weekdays")}function bs(t,i,e){return ps(t,i,e,"weekdaysShort")}function ws(t,i,e){return ps(t,i,e,"weekdaysMin")}fs.calendar=L,fs.longDateFormat=q,fs.invalidDate=X,fs.ordinal=K,fs.preparse=cs,fs.postformat=cs,fs.relativeTime=tt,fs.pastFuture=it,fs.set=E,fs.eras=Tr,fs.erasParse=jr,fs.erasConvertYear=Yr,fs.erasAbbrRegex=zr,fs.erasNameRegex=Lr,fs.erasNarrowRegex=Ir,fs.months=oi,fs.monthsShort=ai,fs.monthsParse=ui,fs.monthsRegex=vi,fs.monthsShortRegex=di,fs.week=Mi,fs.firstDayOfYear=Ti,fs.firstDayOfWeek=Fi,fs.weekdays=Bi,fs.weekdaysMin=Ri,fs.weekdaysShort=Pi,fs.weekdaysParse=Gi,fs.weekdaysRegex=Vi,fs.weekdaysShortRegex=Xi,fs.weekdaysMinRegex=Zi,fs.isPM=ee,fs.meridiem=se,ve("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var i=t%10;return t+(1===ct(t%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",ve),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ge);var ks=Math.abs;function _s(){var t=this._data;return this._milliseconds=ks(this._milliseconds),this._days=ks(this._days),this._months=ks(this._months),t.milliseconds=ks(t.milliseconds),t.seconds=ks(t.seconds),t.minutes=ks(t.minutes),t.hours=ks(t.hours),t.months=ks(t.months),t.years=ks(t.years),this}function xs(t,i,e,n){var r=Tn(i,e);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function Ds(t,i){return xs(this,t,i,1)}function Ms(t,i){return xs(this,t,i,-1)}function Ss(t){return t<0?Math.floor(t):Math.ceil(t)}function Fs(){var t,i,e,n,r,s=this._milliseconds,o=this._days,a=this._months,h=this._data;return s>=0&&o>=0&&a>=0||s<=0&&o<=0&&a<=0||(s+=864e5*Ss(js(a)+o),o=0,a=0),h.milliseconds=s%1e3,t=lt(s/1e3),h.seconds=t%60,i=lt(t/60),h.minutes=i%60,e=lt(i/60),h.hours=e%24,o+=lt(e/24),a+=r=lt(Ts(o)),o-=Ss(js(r)),n=lt(a/12),a%=12,h.days=o,h.months=a,h.years=n,this}function Ts(t){return 4800*t/146097}function js(t){return 146097*t/4800}function Ys(t){if(!this.isValid())return NaN;var i,e,n=this._milliseconds;if("month"===(t=rt(t))||"quarter"===t||"year"===t)switch(i=this._days+n/864e5,e=this._months+Ts(i),t){case"month":return e;case"quarter":return e/3;case"year":return e/12}else switch(i=this._days+Math.round(js(this._months)),t){case"week":return i/7+n/6048e5;case"day":return i+n/864e5;case"hour":return 24*i+n/36e5;case"minute":return 1440*i+n/6e4;case"second":return 86400*i+n/1e3;case"millisecond":return Math.floor(864e5*i)+n;default:throw new Error("Unknown unit "+t)}}function Es(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ct(this._months/12):NaN}function As(t){return function(){return this.as(t)}}var Cs=As("ms"),Os=As("s"),Ls=As("m"),zs=As("h"),Is=As("d"),Ns=As("w"),Hs=As("M"),Bs=As("Q"),Ps=As("y");function Rs(){return Tn(this)}function $s(t){return t=rt(t),this.isValid()?this[t+"s"]():NaN}function Gs(t){return function(){return this.isValid()?this._data[t]:NaN}}var Ws=Gs("milliseconds"),Us=Gs("seconds"),qs=Gs("minutes"),Vs=Gs("hours"),Xs=Gs("days"),Zs=Gs("months"),Js=Gs("years");function Ks(){return lt(this.days()/7)}var Qs=Math.round,to={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function io(t,i,e,n,r){return r.relativeTime(i||1,!!e,t,n)}function eo(t,i,e,n){var r=Tn(t).abs(),s=Qs(r.as("s")),o=Qs(r.as("m")),a=Qs(r.as("h")),h=Qs(r.as("d")),u=Qs(r.as("M")),l=Qs(r.as("w")),c=Qs(r.as("y")),f=s<=e.ss&&["s",s]||s<e.s&&["ss",s]||o<=1&&["m"]||o<e.m&&["mm",o]||a<=1&&["h"]||a<e.h&&["hh",a]||h<=1&&["d"]||h<e.d&&["dd",h];return null!=e.w&&(f=f||l<=1&&["w"]||l<e.w&&["ww",l]),(f=f||u<=1&&["M"]||u<e.M&&["MM",u]||c<=1&&["y"]||["yy",c])[2]=i,f[3]=+t>0,f[4]=n,io.apply(null,f)}function no(t){return void 0===t?Qs:"function"==typeof t&&(Qs=t,!0)}function ro(t,i){return void 0!==to[t]&&(void 0===i?to[t]:(to[t]=i,"s"===t&&(to.ss=i-1),!0))}function so(t,i){if(!this.isValid())return this.localeData().invalidDate();var e,n,r=!1,s=to;return"object"==typeof t&&(i=t,t=!1),"boolean"==typeof t&&(r=t),"object"==typeof i&&(s=Object.assign({},to,i),null!=i.s&&null==i.ss&&(s.ss=i.s-1)),n=eo(this,!r,s,e=this.localeData()),r&&(n=e.pastFuture(+this,n)),e.postformat(n)}var oo=Math.abs;function ao(t){return(t>0)-(t<0)||+t}function ho(){if(!this.isValid())return this.localeData().invalidDate();var t,i,e,n,r,s,o,a,h=oo(this._milliseconds)/1e3,u=oo(this._days),l=oo(this._months),c=this.asSeconds();return c?(t=lt(h/60),i=lt(t/60),h%=60,t%=60,e=lt(l/12),l%=12,n=h?h.toFixed(3).replace(/\.?0+$/,""):"",r=c<0?"-":"",s=ao(this._months)!==ao(c)?"-":"",o=ao(this._days)!==ao(c)?"-":"",a=ao(this._milliseconds)!==ao(c)?"-":"",r+"P"+(e?s+e+"Y":"")+(l?s+l+"M":"")+(u?o+u+"D":"")+(i||t||h?"T":"")+(i?a+i+"H":"")+(t?a+t+"M":"")+(h?a+n+"S":"")):"P0D"}var uo=on.prototype;return uo.isValid=rn,uo.abs=_s,uo.add=Ds,uo.subtract=Ms,uo.as=Ys,uo.asMilliseconds=Cs,uo.asSeconds=Os,uo.asMinutes=Ls,uo.asHours=zs,uo.asDays=Is,uo.asWeeks=Ns,uo.asMonths=Hs,uo.asQuarters=Bs,uo.asYears=Ps,uo.valueOf=Es,uo._bubble=Fs,uo.clone=Rs,uo.get=$s,uo.milliseconds=Ws,uo.seconds=Us,uo.minutes=qs,uo.hours=Vs,uo.days=Xs,uo.weeks=Ks,uo.months=Zs,uo.years=Js,uo.humanize=so,uo.toISOString=ho,uo.toString=ho,uo.toJSON=ho,uo.locale=or,uo.localeData=hr,uo.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ho),uo.lang=ar,P("X",0,0,"unix"),P("x",0,0,"valueOf"),Lt("x",Yt),Lt("X",Ct),Bt("X",(function(t,i,e){e._d=new Date(1e3*parseFloat(t))})),Bt("x",(function(t,i,e){e._d=new Date(ct(t))})),//! moment.js
r.version="2.29.1",s(Ve),r.fn=hs,r.min=Ke,r.max=Qe,r.now=tn,r.utc=p,r.unix=us,r.months=ms,r.isDate=f,r.locale=ve,r.invalid=b,r.duration=Tn,r.isMoment=D,r.weekdays=ys,r.parseZone=ls,r.localeData=ge,r.isDuration=an,r.monthsShort=gs,r.weekdaysMin=ws,r.defineLocale=pe,r.updateLocale=me,r.locales=ye,r.weekdaysShort=bs,r.normalizeUnits=rt,r.relativeTimeRounding=no,r.relativeTimeThreshold=ro,r.calendarFormat=Pn,r.prototype=hs,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}));r((function(t,i){(function(t){function i(t,i,e,n){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return i?r[e][0]:r[e][1]}t.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:i,mm:"%d Minuten",h:i,hh:"%d Stunden",d:i,dd:i,w:i,ww:"%d Wochen",M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})(s)})),r((function(t,i){(function(t){var i="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),e="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,n){return t?/-MMM-/.test(n)?e[t.month()]:i[t.month()]:i},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"})})(s)})),r((function(t,i){(function(t){var i=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,e=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i];t.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,monthsShortStrictRegex:/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,monthsParse:e,longMonthsParse:e,shortMonthsParse:e,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(t,i){switch(i){case"D":return t+(1===t?"er":"");default:case"M":case"Q":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})})(s)})),r((function(t,i){(function(t){t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})(s)})),r((function(t,i){(function(t){t.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(t,i){return""===i[1]?1:parseInt(i[1]||t,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(t){return""===t},meridiem:function(t,i,e){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(t){return t.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(t){return this.week()!==t.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t,i){switch(i){case"y":return 1===t?"":t+"";case"d":case"D":case"DDD":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})})(s)})),r((function(t,i){(function(t){var i="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),e="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),n=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,n){return t?/-MMM-/.test(n)?e[t.month()]:i[t.month()]:i},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})})(s)})),r((function(t,i){(function(t){var i="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),e="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),n=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function r(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function s(t,i,e){var n=t+" ";switch(e){case"ss":return n+(r(t)?"sekundy":"sekund");case"m":return i?"minuta":"minut";case"mm":return n+(r(t)?"minuty":"minut");case"h":return i?"godzina":"godzin";case"hh":return n+(r(t)?"godziny":"godzin");case"ww":return n+(r(t)?"tygodnie":"tygodni");case"MM":return n+(r(t)?"miesice":"miesicy");case"yy":return n+(r(t)?"lata":"lat")}}t.defineLocale("pl",{months:function(t,n){return t?/D MMMM/.test(n)?e[t.month()]:i[t.month()]:i},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:s,m:s,mm:s,h:s,hh:s,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:s,M:"miesic",MM:s,y:"rok",yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})(s)})),r((function(t,i){(function(t){function i(t,i,e){var n,r;return"m"===e?i?"":"":t+" "+(n=+t,r={ss:i?"__":"__",mm:i?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"}[e].split("_"),n%10==1&&n%100!=11?r[0]:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?r[1]:r[2])}var e=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];t.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:e,longMonthsParse:e,shortMonthsParse:e,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:i,m:i,mm:i,h:"",hh:i,d:"",dd:i,w:"",ww:i,M:"",MM:i,y:"",yy:i},meridiemParse:/|||/i,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,i,e){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(t,i){switch(i){case"M":case"d":case"DDD":return t+"-";case"D":return t+"-";case"w":case"W":return t+"-";default:return t}},week:{dow:1,doy:4}})})(s)})),r((function(t,i){(function(t){function i(t,i,e){var n,r;return"m"===e?i?"":"":"h"===e?i?"":"":t+" "+(n=+t,r={ss:i?"__":"__",mm:i?"__":"__",hh:i?"__":"__",dd:"__",MM:"__",yy:"__"}[e].split("_"),n%10==1&&n%100!=11?r[0]:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?r[1]:r[2])}function e(t){return function(){return t+""+(11===this.hours()?"":"")+"] LT"}}t.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(t,i){var e={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===t?e.nominative.slice(1,7).concat(e.nominative.slice(0,1)):t?e[/(\[[]\]) ?dddd/.test(i)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(i)?"genitive":"nominative"][t.day()]:e.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:e("[ "),nextDay:e("[ "),lastDay:e("[ "),nextWeek:e("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return e("[] dddd [").call(this);case 1:case 2:case 4:return e("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:i,m:i,mm:i,h:"",hh:i,d:"",dd:i,M:"",MM:i,y:"",yy:i},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,i,e){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t,i){switch(i){case"M":case"d":case"DDD":case"w":case"W":return t+"-";case"D":return t+"-";default:return t}},week:{dow:1,doy:7}})})(s)}));var o=Math.ceil,a=Math.floor,h=function(t){return isNaN(t=+t)?0:(t>0?a:o)(t)},u=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},l=function(t){return function(i,e){var n,r,s=String(u(i)),o=h(e),a=s.length;return o<0||o>=a?t?"":void 0:(n=s.charCodeAt(o))<55296||n>56319||o+1===a||(r=s.charCodeAt(o+1))<56320||r>57343?t?s.charAt(o):n:t?s.slice(o,o+2):r-56320+(n-55296<<10)+65536}},c={codeAt:l(!1),charAt:l(!0)},f=function(t){return t&&t.Math==Math&&t},d=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof i&&i)||function(){return this}()||Function("return this")(),v=function(t){try{return!!t()}catch(t){return!0}},p=!v((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=d.document,b=g(y)&&g(y.createElement),w=function(t){return b?y.createElement(t):{}},k=!p&&!v((function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a})),_=function(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t},x=function(t,i){if(!g(t))return t;var e,n;if(i&&"function"==typeof(e=t.toString)&&!g(n=e.call(t)))return n;if("function"==typeof(e=t.valueOf)&&!g(n=e.call(t)))return n;if(!i&&"function"==typeof(e=t.toString)&&!g(n=e.call(t)))return n;throw TypeError("Can't convert object to primitive value")},D=Object.defineProperty,M={f:p?D:function(t,i,e){if(_(t),i=x(i,!0),_(e),k)try{return D(t,i,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported");return"value"in e&&(t[i]=e.value),t}},S=function(t,i){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:i}},F=p?function(t,i,e){return M.f(t,i,S(1,e))}:function(t,i,e){return t[i]=e,t},T="__core-js_shared__",j=d[T]||function(t,i){try{F(d,t,i)}catch(e){d[t]=i}return i}(T,{}),Y=Function.toString;"function"!=typeof j.inspectSource&&(j.inspectSource=function(t){return Y.call(t)});var E,A,C,O=j.inspectSource,L=d.WeakMap,z="function"==typeof L&&/native code/.test(O(L)),I=function(t){return Object(u(t))},N={}.hasOwnProperty,H=Object.hasOwn||function(t,i){return N.call(I(t),i)},B=r((function(t){(t.exports=function(t,i){return j[t]||(j[t]=void 0!==i?i:{})})("versions",[]).push({version:"3.14.0",mode:"pure",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})})),P=0,R=Math.random(),$=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++P+R).toString(36)},G=B("keys"),W=function(t){return G[t]||(G[t]=$(t))},U={},q="Object already initialized",V=d.WeakMap;if(z||j.state){var X=j.state||(j.state=new V),Z=X.get,J=X.has,K=X.set;E=function(t,i){if(J.call(X,t))throw new TypeError(q);return i.facade=t,K.call(X,t,i),i},A=function(t){return Z.call(X,t)||{}},C=function(t){return J.call(X,t)}}else{var Q=W("state");U[Q]=!0,E=function(t,i){if(H(t,Q))throw new TypeError(q);return i.facade=t,F(t,Q,i),i},A=function(t){return H(t,Q)?t[Q]:{}},C=function(t){return H(t,Q)}}var tt,it,et={set:E,get:A,has:C,enforce:function(t){return C(t)?A(t):E(t,{})},getterFor:function(t){return function(i){var e;if(!g(i)||(e=A(i)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return e}}},nt={}.propertyIsEnumerable,rt=Object.getOwnPropertyDescriptor,st={f:rt&&!nt.call({1:2},1)?function(t){var i=rt(this,t);return!!i&&i.enumerable}:nt},ot={}.toString,at=function(t){return ot.call(t).slice(8,-1)},ht="".split,ut=v((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==at(t)?ht.call(t,""):Object(t)}:Object,lt=function(t){return ut(u(t))},ct=Object.getOwnPropertyDescriptor,ft={f:p?ct:function(t,i){if(t=lt(t),i=x(i,!0),k)try{return ct(t,i)}catch(t){}if(H(t,i))return S(!st.f.call(t,i),t[i])}},dt=/#|\.prototype\./,vt=function(t,i){var e=mt[pt(t)];return e==yt||e!=gt&&("function"==typeof i?v(i):!!i)},pt=vt.normalize=function(t){return String(t).replace(dt,".").toLowerCase()},mt=vt.data={},gt=vt.NATIVE="N",yt=vt.POLYFILL="P",bt=vt,wt={},kt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},_t=function(t,i,e){if(kt(t),void 0===i)return t;switch(e){case 0:return function(){return t.call(i)};case 1:return function(e){return t.call(i,e)};case 2:return function(e,n){return t.call(i,e,n)};case 3:return function(e,n,r){return t.call(i,e,n,r)}}return function(){return t.apply(i,arguments)}},xt=ft.f,Dt=function(t){var i=function(i,e,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,e)}return new t(i,e,n)}return t.apply(this,arguments)};return i.prototype=t.prototype,i},Mt=function(t,i){var e,n,r,s,o,a,h,u,l=t.target,c=t.global,f=t.stat,v=t.proto,p=c?d:f?d[l]:(d[l]||{}).prototype,m=c?wt:wt[l]||(wt[l]={}),g=m.prototype;for(r in i)e=!bt(c?r:l+(f?".":"#")+r,t.forced)&&p&&H(p,r),o=m[r],e&&(a=t.noTargetGet?(u=xt(p,r))&&u.value:p[r]),s=e&&a?a:i[r],e&&typeof o==typeof s||(h=t.bind&&e?_t(s,d):t.wrap&&e?Dt(s):v&&"function"==typeof s?_t(Function.call,s):s,(t.sham||s&&s.sham||o&&o.sham)&&F(h,"sham",!0),m[r]=h,v&&(H(wt,n=l+"Prototype")||F(wt,n,{}),wt[n][r]=s,t.real&&g&&!g[r]&&F(g,r,s)))},St=!v((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ft=W("IE_PROTO"),Tt=Object.prototype,jt=St?Object.getPrototypeOf:function(t){return t=I(t),H(t,Ft)?t[Ft]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Tt:null},Yt=function(t){return"function"==typeof t?t:void 0},Et=function(t,i){return arguments.length<2?Yt(wt[t])||Yt(d[t]):wt[t]&&wt[t][i]||d[t]&&d[t][i]},At=Et("navigator","userAgent")||"",Ct=d.process,Ot=Ct&&Ct.versions,Lt=Ot&&Ot.v8;Lt?it=(tt=Lt.split("."))[0]<4?1:tt[0]+tt[1]:At&&(!(tt=At.match(/Edge\/(\d+)/))||tt[1]>=74)&&(tt=At.match(/Chrome\/(\d+)/))&&(it=tt[1]);var zt,It,Nt,Ht=it&&+it,Bt=!!Object.getOwnPropertySymbols&&!v((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Ht&&Ht<41})),Pt=Bt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Rt=B("wks"),$t=d.Symbol,Gt=Pt?$t:$t&&$t.withoutSetter||$,Wt=function(t){return H(Rt,t)&&(Bt||"string"==typeof Rt[t])||(Bt&&H($t,t)?Rt[t]=$t[t]:Rt[t]=Gt("Symbol."+t)),Rt[t]},Ut=Wt("iterator"),qt=!1;[].keys&&("next"in(Nt=[].keys())?(It=jt(jt(Nt)))!==Object.prototype&&(zt=It):qt=!0);var Vt=null==zt||v((function(){var t={};return zt[Ut].call(t)!==t}));Vt&&(zt={}),Vt&&!H(zt,Ut)&&F(zt,Ut,(function(){return this}));var Xt,Zt={IteratorPrototype:zt,BUGGY_SAFARI_ITERATORS:qt},Jt=Math.min,Kt=function(t){return t>0?Jt(h(t),9007199254740991):0},Qt=Math.max,ti=Math.min,ii=function(t,i){var e=h(t);return e<0?Qt(e+i,0):ti(e,i)},ei=function(t){return function(i,e,n){var r,s=lt(i),o=Kt(s.length),a=ii(n,o);if(t&&e!=e){for(;o>a;)if((r=s[a++])!=r)return!0}else for(;o>a;a++)if((t||a in s)&&s[a]===e)return t||a||0;return!t&&-1}},ni={includes:ei(!0),indexOf:ei(!1)},ri=ni.indexOf,si=function(t,i){var e,n=lt(t),r=0,s=[];for(e in n)!H(U,e)&&H(n,e)&&s.push(e);for(;i.length>r;)H(n,e=i[r++])&&(~ri(s,e)||s.push(e));return s},oi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ai=Object.keys||function(t){return si(t,oi)},hi=p?Object.defineProperties:function(t,i){_(t);for(var e,n=ai(i),r=n.length,s=0;r>s;)M.f(t,e=n[s++],i[e]);return t},ui=Et("document","documentElement"),li=W("IE_PROTO"),ci=function(){},fi=function(t){return"<script>"+t+"</"+"script>"},di=function(){try{Xt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,i;di=Xt?function(t){t.write(fi("")),t.close();var i=t.parentWindow.Object;return t=null,i}(Xt):((i=w("iframe")).style.display="none",ui.appendChild(i),i.src=String("javascript:"),(t=i.contentWindow.document).open(),t.write(fi("document.F=Object")),t.close(),t.F);for(var e=oi.length;e--;)delete di.prototype[oi[e]];return di()};U[li]=!0;var vi=Object.create||function(t,i){var e;return null!==t?(ci.prototype=_(t),e=new ci,ci.prototype=null,e[li]=t):e=di(),void 0===i?e:hi(e,i)},pi={};pi[Wt("toStringTag")]="z";var mi="[object z]"===String(pi),gi=Wt("toStringTag"),yi="Arguments"==at(function(){return arguments}()),bi=mi?at:function(t){var i,e,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,i){try{return t[i]}catch(t){}}(i=Object(t),gi))?e:yi?at(i):"Object"==(n=at(i))&&"function"==typeof i.callee?"Arguments":n},wi=mi?{}.toString:function(){return"[object "+bi(this)+"]"},ki=M.f,_i=Wt("toStringTag"),xi=function(t,i,e,n){if(t){var r=e?t:t.prototype;H(r,_i)||ki(r,_i,{configurable:!0,value:i}),n&&!mi&&F(r,"toString",wi)}},Di={},Mi=Zt.IteratorPrototype,Si=function(){return this},Fi=Object.setPrototypeOf||("__proto__"in{}?function(){var t,i=!1,e={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),i=e instanceof Array}catch(t){}return function(e,n){return _(e),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),i?t.call(e,n):e.__proto__=n,e}}():void 0),Ti=function(t,i,e,n){n&&n.enumerable?t[i]=e:F(t,i,e)},ji=Zt.IteratorPrototype,Yi=Zt.BUGGY_SAFARI_ITERATORS,Ei=Wt("iterator"),Ai="keys",Ci="values",Oi="entries",Li=function(){return this},zi=function(t,i,e,n,r,s,o){!function(t,i,e){var n=i+" Iterator";t.prototype=vi(Mi,{next:S(1,e)}),xi(t,n,!1,!0),Di[n]=Si}(e,i,n);var a,h,u,l=function(t){if(t===r&&p)return p;if(!Yi&&t in d)return d[t];switch(t){case Ai:case Ci:case Oi:return function(){return new e(this,t)}}return function(){return new e(this)}},c=i+" Iterator",f=!1,d=t.prototype,v=d[Ei]||d["@@iterator"]||r&&d[r],p=!Yi&&v||l(r),m="Array"==i&&d.entries||v;if(m&&(a=jt(m.call(new t)),ji!==Object.prototype&&a.next&&(xi(a,c,!0,!0),Di[c]=Li)),r==Ci&&v&&v.name!==Ci&&(f=!0,p=function(){return v.call(this)}),o&&d[Ei]!==p&&F(d,Ei,p),Di[i]=p,r)if(h={values:l(Ci),keys:s?p:l(Ai),entries:l(Oi)},o)for(u in h)(Yi||f||!(u in d))&&Ti(d,u,h[u]);else Mt({target:i,proto:!0,forced:Yi||f},h);return h},Ii=c.charAt,Ni="String Iterator",Hi=et.set,Bi=et.getterFor(Ni);zi(String,"String",(function(t){Hi(this,{type:Ni,string:String(t),index:0})}),(function(){var t,i=Bi(this),e=i.string,n=i.index;return n>=e.length?{value:void 0,done:!0}:(t=Ii(e,n),i.index+=t.length,{value:t,done:!1})}));var Pi=function(t){var i=t.return;if(void 0!==i)return _(i.call(t)).value},Ri=function(t,i,e,n){try{return n?i(_(e)[0],e[1]):i(e)}catch(i){throw Pi(t),i}},$i=Wt("iterator"),Gi=Array.prototype,Wi=function(t){return void 0!==t&&(Di.Array===t||Gi[$i]===t)},Ui=function(t,i,e){var n=x(i);n in t?M.f(t,n,S(0,e)):t[n]=e},qi=Wt("iterator"),Vi=function(t){if(null!=t)return t[qi]||t["@@iterator"]||Di[bi(t)]},Xi=Wt("iterator"),Zi=!1;try{var Ji=0,Ki={next:function(){return{done:!!Ji++}},return:function(){Zi=!0}};Ki[Xi]=function(){return this},Array.from(Ki,(function(){throw 2}))}catch(t){}var Qi=!function(t,i){if(!i&&!Zi)return!1;var e=!1;try{var n={};n[Xi]=function(){return{next:function(){return{done:e=!0}}}},t(n)}catch(t){}return e}((function(t){Array.from(t)}));Mt({target:"Array",stat:!0,forced:Qi},{from:function(t){var i,e,n,r,s,o,a=I(t),h="function"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,c=void 0!==l,f=Vi(a),d=0;if(c&&(l=_t(l,u>2?arguments[2]:void 0,2)),null==f||h==Array&&Wi(f))for(e=new h(i=Kt(a.length));i>d;d++)o=c?l(a[d],d):a[d],Ui(e,d,o);else for(s=(r=f.call(a)).next,e=new h;!(n=s.call(r)).done;d++)o=c?Ri(r,l,[n.value,d],!0):n.value,Ui(e,d,o);return e.length=d,e}});var te=wt.Array.from,ie=te,ee="Array Iterator",ne=et.set,re=et.getterFor(ee);zi(Array,"Array",(function(t,i){ne(this,{type:ee,target:lt(t),index:0,kind:i})}),(function(){var t=re(this),i=t.target,e=t.kind,n=t.index++;return!i||n>=i.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==e?{value:n,done:!1}:"values"==e?{value:i[n],done:!1}:{value:[n,i[n]],done:!1}}),"values"),Di.Arguments=Di.Array;var se=Wt("toStringTag");for(var oe in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var ae=d[oe],he=ae&&ae.prototype;he&&bi(he)!==se&&F(he,se,oe),Di[oe]=Di.Array}var ue=Vi,le=Array.isArray||function(t){return"Array"==at(t)},ce=oi.concat("length","prototype"),fe={f:Object.getOwnPropertyNames||function(t){return si(t,ce)}},de=fe.f,ve={}.toString,pe="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],me={f:function(t){return pe&&"[object Window]"==ve.call(t)?function(t){try{return de(t)}catch(t){return pe.slice()}}(t):de(lt(t))}},ge={f:Object.getOwnPropertySymbols},ye={f:Wt},be=M.f,we=function(t){var i=wt.Symbol||(wt.Symbol={});H(i,t)||be(i,t,{value:ye.f(t)})},ke=Wt("species"),_e=function(t,i){var e;return le(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!le(e.prototype)?g(e)&&null===(e=e[ke])&&(e=void 0):e=void 0),new(void 0===e?Array:e)(0===i?0:i)},xe=[].push,De=function(t){var i=1==t,e=2==t,n=3==t,r=4==t,s=6==t,o=7==t,a=5==t||s;return function(h,u,l,c){for(var f,d,v=I(h),p=ut(v),m=_t(u,l,3),g=Kt(p.length),y=0,b=c||_e,w=i?b(h,g):e||o?b(h,0):void 0;g>y;y++)if((a||y in p)&&(d=m(f=p[y],y,v),t))if(i)w[y]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return y;case 2:xe.call(w,f)}else switch(t){case 4:return!1;case 7:xe.call(w,f)}return s?-1:n||r?r:w}},Me={forEach:De(0),map:De(1),filter:De(2),some:De(3),every:De(4),find:De(5),findIndex:De(6),filterOut:De(7)},Se=Me.forEach,Fe=W("hidden"),Te="Symbol",je=Wt("toPrimitive"),Ye=et.set,Ee=et.getterFor(Te),Ae=Object.prototype,Ce=d.Symbol,Oe=Et("JSON","stringify"),Le=ft.f,ze=M.f,Ie=me.f,Ne=st.f,He=B("symbols"),Be=B("op-symbols"),Pe=B("string-to-symbol-registry"),Re=B("symbol-to-string-registry"),$e=B("wks"),Ge=d.QObject,We=!Ge||!Ge.prototype||!Ge.prototype.findChild,Ue=p&&v((function(){return 7!=vi(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a}))?function(t,i,e){var n=Le(Ae,i);n&&delete Ae[i],ze(t,i,e),n&&t!==Ae&&ze(Ae,i,n)}:ze,qe=function(t,i){var e=He[t]=vi(Ce.prototype);return Ye(e,{type:Te,tag:t,description:i}),p||(e.description=i),e},Ve=Pt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Ce},Xe=function(t,i,e){t===Ae&&Xe(Be,i,e),_(t);var n=x(i,!0);return _(e),H(He,n)?(e.enumerable?(H(t,Fe)&&t[Fe][n]&&(t[Fe][n]=!1),e=vi(e,{enumerable:S(0,!1)})):(H(t,Fe)||ze(t,Fe,S(1,{})),t[Fe][n]=!0),Ue(t,n,e)):ze(t,n,e)},Ze=function(t,i){_(t);var e=lt(i),n=ai(e).concat(tn(e));return Se(n,(function(i){p&&!Je.call(e,i)||Xe(t,i,e[i])})),t},Je=function(t){var i=x(t,!0),e=Ne.call(this,i);return!(this===Ae&&H(He,i)&&!H(Be,i))&&(!(e||!H(this,i)||!H(He,i)||H(this,Fe)&&this[Fe][i])||e)},Ke=function(t,i){var e=lt(t),n=x(i,!0);if(e!==Ae||!H(He,n)||H(Be,n)){var r=Le(e,n);return!r||!H(He,n)||H(e,Fe)&&e[Fe][n]||(r.enumerable=!0),r}},Qe=function(t){var i=Ie(lt(t)),e=[];return Se(i,(function(t){H(He,t)||H(U,t)||e.push(t)})),e},tn=function(t){var i=t===Ae,e=Ie(i?Be:lt(t)),n=[];return Se(e,(function(t){!H(He,t)||i&&!H(Ae,t)||n.push(He[t])})),n};if(Bt||(Ti((Ce=function(){if(this instanceof Ce)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,i=$(t),e=function(t){this===Ae&&e.call(Be,t),H(this,Fe)&&H(this[Fe],i)&&(this[Fe][i]=!1),Ue(this,i,S(1,t))};return p&&We&&Ue(Ae,i,{configurable:!0,set:e}),qe(i,t)}).prototype,"toString",(function(){return Ee(this).tag})),Ti(Ce,"withoutSetter",(function(t){return qe($(t),t)})),st.f=Je,M.f=Xe,ft.f=Ke,fe.f=me.f=Qe,ge.f=tn,ye.f=function(t){return qe(Wt(t),t)},p&&ze(Ce.prototype,"description",{configurable:!0,get:function(){return Ee(this).description}})),Mt({global:!0,wrap:!0,forced:!Bt,sham:!Bt},{Symbol:Ce}),Se(ai($e),(function(t){we(t)})),Mt({target:Te,stat:!0,forced:!Bt},{for:function(t){var i=String(t);if(H(Pe,i))return Pe[i];var e=Ce(i);return Pe[i]=e,Re[e]=i,e},keyFor:function(t){if(!Ve(t))throw TypeError(t+" is not a symbol");if(H(Re,t))return Re[t]},useSetter:function(){We=!0},useSimple:function(){We=!1}}),Mt({target:"Object",stat:!0,forced:!Bt,sham:!p},{create:function(t,i){return void 0===i?vi(t):Ze(vi(t),i)},defineProperty:Xe,defineProperties:Ze,getOwnPropertyDescriptor:Ke}),Mt({target:"Object",stat:!0,forced:!Bt},{getOwnPropertyNames:Qe,getOwnPropertySymbols:tn}),Mt({target:"Object",stat:!0,forced:v((function(){ge.f(1)}))},{getOwnPropertySymbols:function(t){return ge.f(I(t))}}),Oe){var en=!Bt||v((function(){var t=Ce();return"[null]"!=Oe([t])||"{}"!=Oe({a:t})||"{}"!=Oe(Object(t))}));Mt({target:"JSON",stat:!0,forced:en},{stringify:function(t,i,e){for(var n,r=[t],s=1;arguments.length>s;)r.push(arguments[s++]);if(n=i,(g(i)||void 0!==t)&&!Ve(t))return le(i)||(i=function(t,i){if("function"==typeof n&&(i=n.call(this,t,i)),!Ve(i))return i}),r[1]=i,Oe.apply(null,r)}})}Ce.prototype[je]||F(Ce.prototype,je,Ce.prototype.valueOf),xi(Ce,Te),U[Fe]=!0;var nn=wt.Object.getOwnPropertySymbols,rn=ft.f,sn=v((function(){rn(1)}));Mt({target:"Object",stat:!0,forced:!p||sn,sham:!p},{getOwnPropertyDescriptor:function(t,i){return rn(lt(t),i)}});var on=r((function(t){var i=wt.Object,e=t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)};i.getOwnPropertyDescriptor.sham&&(e.sham=!0)})),an=Et("Reflect","ownKeys")||function(t){var i=fe.f(_(t)),e=ge.f;return e?i.concat(e(t)):i};Mt({target:"Object",stat:!0,sham:!p},{getOwnPropertyDescriptors:function(t){for(var i,e,n=lt(t),r=ft.f,s=an(n),o={},a=0;s.length>a;)void 0!==(e=r(n,i=s[a++]))&&Ui(o,i,e);return o}});var hn=wt.Object.getOwnPropertyDescriptors;Mt({target:"Object",stat:!0,forced:!p,sham:!p},{defineProperties:hi});var un=r((function(t){var i=wt.Object,e=t.exports=function(t,e){return i.defineProperties(t,e)};i.defineProperties.sham&&(e.sham=!0)}));Mt({target:"Object",stat:!0,forced:!p,sham:!p},{defineProperty:M.f});var ln=r((function(t){var i=wt.Object,e=t.exports=function(t,e,n){return i.defineProperty(t,e,n)};i.defineProperty.sham&&(e.sham=!0)})),cn=ln,fn=n(r((function(t){t.exports=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0}))),dn=ln,vn=n(r((function(t){function i(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),dn(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0}))),pn=n(r((function(t){t.exports=function(t,i,e){return i in t?dn(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t},t.exports.default=t.exports,t.exports.__esModule=!0})));Mt({target:"Array",stat:!0},{isArray:le});var mn=wt.Array.isArray,gn=mn,yn=r((function(t){t.exports=function(t){if(gn(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0}));n(yn);var bn=Wt("species"),wn=function(t){return Ht>=51||!v((function(){var i=[];return(i.constructor={})[bn]=function(){return{foo:1}},1!==i[t](Boolean).foo}))},kn=Wt("isConcatSpreadable"),_n=9007199254740991,xn="Maximum allowed index exceeded",Dn=Ht>=51||!v((function(){var t=[];return t[kn]=!1,t.concat()[0]!==t})),Mn=wn("concat"),Sn=function(t){if(!g(t))return!1;var i=t[kn];return void 0!==i?!!i:le(t)};Mt({target:"Array",proto:!0,forced:!Dn||!Mn},{concat:function(t){var i,e,n,r,s,o=I(this),a=_e(o,0),h=0;for(i=-1,n=arguments.length;i<n;i++)if(Sn(s=-1===i?o:arguments[i])){if(h+(r=Kt(s.length))>_n)throw TypeError(xn);for(e=0;e<r;e++,h++)e in s&&Ui(a,h,s[e])}else{if(h>=_n)throw TypeError(xn);Ui(a,h++,s)}return a.length=h,a}});Object.freeze({__proto__:null});we("asyncIterator");Object.freeze({__proto__:null});we("hasInstance"),we("isConcatSpreadable"),we("iterator"),we("match"),we("matchAll"),we("replace"),we("search"),we("species"),we("split"),we("toPrimitive"),we("toStringTag"),we("unscopables"),xi(d.JSON,"JSON",!0);Object.freeze({__proto__:null});Object.freeze({__proto__:null});var Fn=wt.Symbol;we("asyncDispose"),we("dispose"),we("matcher"),we("metadata"),we("observable"),we("patternMatch"),we("replaceAll");var Tn=Fn,jn=r((function(t){t.exports=function(t,i){var e=t&&(void 0!==Tn&&ue(t)||t["@@iterator"]);if(null!=e){var n,r,s=[],o=!0,a=!1;try{for(e=e.call(t);!(o=(n=e.next()).done)&&(s.push(n.value),!i||s.length!==i);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==e.return||e.return()}finally{if(a)throw r}}return s}},t.exports.default=t.exports,t.exports.__esModule=!0}));n(jn);var Yn=wn("slice"),En=Wt("species"),An=[].slice,Cn=Math.max;Mt({target:"Array",proto:!0,forced:!Yn},{slice:function(t,i){var e,n,r,s=lt(this),o=Kt(s.length),a=ii(t,o),h=ii(void 0===i?o:i,o);if(le(s)&&("function"!=typeof(e=s.constructor)||e!==Array&&!le(e.prototype)?g(e)&&null===(e=e[En])&&(e=void 0):e=void 0,e===Array||void 0===e))return An.call(s,a,h);for(n=new(void 0===e?Array:e)(Cn(h-a,0)),r=0;a<h;a++,r++)a in s&&Ui(n,r,s[a]);return n.length=r,n}});var On=function(t){return wt[t+"Prototype"]},Ln=On("Array").slice,zn=Array.prototype,In=function(t){var i=t.slice;return t===zn||t instanceof Array&&i===zn.slice?Ln:i},Nn=In,Hn=te,Bn=r((function(t){t.exports=function(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n},t.exports.default=t.exports,t.exports.__esModule=!0}));n(Bn);var Pn=r((function(t){t.exports=function(t,i){var e;if(t){if("string"==typeof t)return Bn(t,i);var n=Nn(e=Object.prototype.toString.call(t)).call(e,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Hn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bn(t,i):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0}));n(Pn);var Rn=r((function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}));n(Rn);var $n=n(r((function(t){t.exports=function(t,i){return yn(t)||jn(t,i)||Pn(t,i)||Rn()},t.exports.default=t.exports,t.exports.__esModule=!0}))),Gn=ye.f("iterator"),Wn=Gn,Un=r((function(t){function i(e){return"function"==typeof Tn&&"symbol"==typeof Wn?(t.exports=i=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t){return t&&"function"==typeof Tn&&t.constructor===Tn&&t!==Tn.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),i(e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0})),qn=n(Un),Vn=r((function(t){t.exports=function(t){if(gn(t))return Bn(t)},t.exports.default=t.exports,t.exports.__esModule=!0}));n(Vn);var Xn=r((function(t){t.exports=function(t){if(void 0!==Tn&&null!=ue(t)||null!=t["@@iterator"])return Hn(t)},t.exports.default=t.exports,t.exports.__esModule=!0}));n(Xn);var Zn=r((function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}));n(Zn);var Jn=n(r((function(t){t.exports=function(t){return Vn(t)||Xn(t)||Pn(t)||Zn()},t.exports.default=t.exports,t.exports.__esModule=!0}))),Kn=Fn,Qn=On("Array").concat,tr=Array.prototype,ir=function(t){var i=t.concat;return t===tr||t instanceof Array&&i===tr.concat?Qn:i},er=In;Mt({target:"Reflect",stat:!0},{ownKeys:an});var nr=wt.Reflect.ownKeys,rr=mn,sr=Me.map,or=wn("map");Mt({target:"Array",proto:!0,forced:!or},{map:function(t){return sr(this,t,arguments.length>1?arguments[1]:void 0)}});var ar=On("Array").map,hr=Array.prototype,ur=function(t){var i=t.map;return t===hr||t instanceof Array&&i===hr.map?ar:i},lr=v((function(){ai(1)}));Mt({target:"Object",stat:!0,forced:lr},{keys:function(t){return ai(I(t))}});var cr=wt.Object.keys;Mt({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var fr=wt.Date.now,dr=[].slice,vr={},pr=function(t,i,e){if(!(i in vr)){for(var n=[],r=0;r<i;r++)n[r]="a["+r+"]";vr[i]=Function("C,a","return new C("+n.join(",")+")")}return vr[i](t,e)},mr=Function.bind||function(t){var i=kt(this),e=dr.call(arguments,1),n=function(){var r=e.concat(dr.call(arguments));return this instanceof n?pr(i,r.length,r):i.apply(t,r)};return g(i.prototype)&&(n.prototype=i.prototype),n};Mt({target:"Function",proto:!0},{bind:mr});var gr=On("Function").bind,yr=Function.prototype,br=function(t){var i=t.bind;return t===yr||t instanceof Function&&i===yr.bind?gr:i},wr=function(t,i){var e=[][t];return!!e&&v((function(){e.call(null,i||function(){throw 1},1)}))},kr=Me.forEach,_r=wr("forEach")?[].forEach:function(t){return kr(this,t,arguments.length>1?arguments[1]:void 0)};Mt({target:"Array",proto:!0,forced:[].forEach!=_r},{forEach:_r});var xr=On("Array").forEach,Dr=Array.prototype,Mr={DOMTokenList:!0,NodeList:!0},Sr=function(t){var i=t.forEach;return t===Dr||t instanceof Array&&i===Dr.forEach||Mr.hasOwnProperty(bi(t))?xr:i},Fr=[].reverse,Tr=[1,2];Mt({target:"Array",proto:!0,forced:String(Tr)===String(Tr.reverse())},{reverse:function(){return le(this)&&(this.length=this.length),Fr.call(this)}});var jr=On("Array").reverse,Yr=Array.prototype,Er=function(t){var i=t.reverse;return t===Yr||t instanceof Array&&i===Yr.reverse?jr:i},Ar=wn("splice"),Cr=Math.max,Or=Math.min,Lr=9007199254740991,zr="Maximum allowed length exceeded";Mt({target:"Array",proto:!0,forced:!Ar},{splice:function(t,i){var e,n,r,s,o,a,u=I(this),l=Kt(u.length),c=ii(t,l),f=arguments.length;if(0===f?e=n=0:1===f?(e=0,n=l-c):(e=f-2,n=Or(Cr(h(i),0),l-c)),l+e-n>Lr)throw TypeError(zr);for(r=_e(u,n),s=0;s<n;s++)(o=c+s)in u&&Ui(r,s,u[o]);if(r.length=n,e<n){for(s=c;s<l-n;s++)a=s+e,(o=s+n)in u?u[a]=u[o]:delete u[a];for(s=l;s>l-n+e;s--)delete u[s-1]}else if(e>n)for(s=l-n;s>c;s--)a=s+e-1,(o=s+n-1)in u?u[a]=u[o]:delete u[a];for(s=0;s<e;s++)u[s+c]=arguments[s+2];return u.length=l-n+e,r}});var Ir=On("Array").splice,Nr=Array.prototype,Hr=function(t){var i=t.splice;return t===Nr||t instanceof Array&&i===Nr.splice?Ir:i},Br=Object.assign,Pr=Object.defineProperty,Rr=!Br||v((function(){if(p&&1!==Br({b:1},Br(Pr({},"a",{enumerable:!0,get:function(){Pr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},i={},e=Symbol(),n="abcdefghijklmnopqrst";return t[e]=7,n.split("").forEach((function(t){i[t]=t})),7!=Br({},t)[e]||ai(Br({},i)).join("")!=n}))?function(t,i){for(var e=I(t),n=arguments.length,r=1,s=ge.f,o=st.f;n>r;)for(var a,h=ut(arguments[r++]),u=s?ai(h).concat(s(h)):ai(h),l=u.length,c=0;l>c;)a=u[c++],p&&!o.call(h,a)||(e[a]=h[a]);return e}:Br;Mt({target:"Object",stat:!0,forced:Object.assign!==Rr},{assign:Rr});var $r=wt.Object.assign,Gr=ni.includes;Mt({target:"Array",proto:!0},{includes:function(t){return Gr(this,t,arguments.length>1?arguments[1]:void 0)}});var Wr=On("Array").includes,Ur=Wt("match"),qr=function(t){if(function(t){var i;return g(t)&&(void 0!==(i=t[Ur])?!!i:"RegExp"==at(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},Vr=Wt("match");Mt({target:"String",proto:!0,forced:!function(t){var i=/./;try{"/./"[t](i)}catch(e){try{return i[Vr]=!1,"/./"[t](i)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(u(this)).indexOf(qr(t),arguments.length>1?arguments[1]:void 0)}});var Xr=On("String").includes,Zr=Array.prototype,Jr=String.prototype,Kr=function(t){var i=t.includes;return t===Zr||t instanceof Array&&i===Zr.includes?Wr:"string"==typeof t||t===Jr||t instanceof String&&i===Jr.includes?Xr:i},Qr=v((function(){jt(1)}));Mt({target:"Object",stat:!0,forced:Qr,sham:!St},{getPrototypeOf:function(t){return jt(I(t))}});var ts=wt.Object.getPrototypeOf,is=ts,es=Me.filter,ns=wn("filter");Mt({target:"Array",proto:!0,forced:!ns},{filter:function(t){return es(this,t,arguments.length>1?arguments[1]:void 0)}});var rs=On("Array").filter,ss=Array.prototype,os=function(t){var i=t.filter;return t===ss||t instanceof Array&&i===ss.filter?rs:i},as=st.f,hs=function(t){return function(i){for(var e,n=lt(i),r=ai(n),s=r.length,o=0,a=[];s>o;)e=r[o++],p&&!as.call(n,e)||a.push(t?[e,n[e]]:n[e]);return a}},us={entries:hs(!0),values:hs(!1)}.values;Mt({target:"Object",stat:!0},{values:function(t){return us(t)}});var ls=wt.Object.values,cs="\t\n\v\f\r \u2028\u2029\ufeff",fs="["+cs+"]",ds=RegExp("^"+fs+fs+"*"),vs=RegExp(fs+fs+"*$"),ps=function(t){return function(i){var e=String(u(i));return 1&t&&(e=e.replace(ds,"")),2&t&&(e=e.replace(vs,"")),e}},ms={start:ps(1),end:ps(2),trim:ps(3)},gs=ms.trim,ys=d.parseInt,bs=/^[+-]?0[Xx]/,ws=8!==ys(cs+"08")||22!==ys(cs+"0x16")?function(t,i){var e=gs(String(t));return ys(e,i>>>0||(bs.test(e)?16:10))}:ys;Mt({global:!0,forced:parseInt!=ws},{parseInt:ws});var ks=wt.parseInt,_s=ni.indexOf,xs=[].indexOf,Ds=!!xs&&1/[1].indexOf(1,-0)<0,Ms=wr("indexOf");Mt({target:"Array",proto:!0,forced:Ds||!Ms},{indexOf:function(t){return Ds?xs.apply(this,arguments)||0:_s(this,t,arguments.length>1?arguments[1]:void 0)}});var Ss,Fs=On("Array").indexOf,Ts=Array.prototype,js=function(t){var i=t.indexOf;return t===Ts||t instanceof Array&&i===Ts.indexOf?Fs:i},Ys=ms.trim;Mt({target:"String",proto:!0,forced:(Ss="trim",v((function(){return!!cs[Ss]()||""!=""[Ss]()||cs[Ss].name!==Ss})))},{trim:function(){return Ys(this)}});var Es=On("String").trim,As=String.prototype,Cs=function(t){var i=t.trim;return"string"==typeof t||t===As||t instanceof String&&i===As.trim?Es:i};Mt({target:"Object",stat:!0,sham:!p},{create:vi});var Os=wt.Object,Ls=function(t,i){return Os.create(t,i)},zs=Ls,Is=Et("JSON","stringify"),Ns=/[\uD800-\uDFFF]/g,Hs=/^[\uD800-\uDBFF]$/,Bs=/^[\uDC00-\uDFFF]$/,Ps=function(t,i,e){var n=e.charAt(i-1),r=e.charAt(i+1);return Hs.test(t)&&!Bs.test(r)||Bs.test(t)&&!Hs.test(n)?"\\u"+t.charCodeAt(0).toString(16):t},Rs=v((function(){return'"\\udf06\\ud834"'!==Is("\udf06\ud834")||'"\\udead"'!==Is("\udead")}));Is&&Mt({target:"JSON",stat:!0,forced:Rs},{stringify:function(t,i,e){var n=Is.apply(null,arguments);return"string"==typeof n?n.replace(Ns,Ps):n}}),wt.JSON||(wt.JSON={stringify:JSON.stringify});var $s=function(t,i,e){return wt.JSON.stringify.apply(null,arguments)},Gs=[].slice,Ws=/MSIE .\./.test(At),Us=function(t){return function(i,e){var n=arguments.length>2,r=n?Gs.call(arguments,2):void 0;return t(n?function(){("function"==typeof i?i:Function(i)).apply(this,r)}:i,e)}};Mt({global:!0,bind:!0,forced:Ws},{setTimeout:Us(d.setTimeout),setInterval:Us(d.setInterval)});var qs=wt.setTimeout;Mt({target:"Array",proto:!0},{fill:function(t){for(var i=I(this),e=Kt(i.length),n=arguments.length,r=ii(n>1?arguments[1]:void 0,e),s=n>2?arguments[2]:void 0,o=void 0===s?e:ii(s,e);o>r;)i[r++]=t;return i}});var Vs=On("Array").fill,Xs=Array.prototype,Zs=function(t){var i=t.fill;return t===Xs||t instanceof Array&&i===Xs.fill?Vs:i},Js=r((function(t){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(i),this},i.prototype.once=function(t,i){function e(){this.off(t,e),i.apply(this,arguments)}return e.fn=i,this.on(t,e),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,i){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((e=n[r])===i||e.fn===i){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),e=this._callbacks["$"+t],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(e){n=0;for(var r=(e=e.slice(0)).length;n<r;++n)e[n].apply(this,i)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}}));
/*! Hammer.JS - v2.0.17-rc - 2019-12-16
	 * http://naver.github.io/egjs
	 *
	 * Forked By Naver egjs
	 * Copyright (c) hammerjs
	 * Licensed under the MIT license */function Ks(){return(Ks=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function Qs(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}function to(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var io,eo="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])}return i}:Object.assign,no=["","webkit","Moz","MS","ms","o"],ro="undefined"==typeof document?{style:{}}:document.createElement("div"),so=Math.round,oo=Math.abs,ao=Date.now;function ho(t,i){for(var e,n,r=i[0].toUpperCase()+i.slice(1),s=0;s<no.length;){if((n=(e=no[s])?e+r:i)in t)return n;s++}}io="undefined"==typeof window?{}:window;var uo=ho(ro.style,"touchAction"),lo=void 0!==uo;var co="compute",fo="auto",vo="manipulation",po="none",mo="pan-x",go="pan-y",yo=function(){if(!lo)return!1;var t={},i=io.CSS&&io.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(e){return t[e]=!i||io.CSS.supports("touch-action",e)})),t}(),bo="ontouchstart"in io,wo=void 0!==ho(io,"PointerEvent"),ko=bo&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),_o="touch",xo="mouse",Do=16,Mo=24,So=["x","y"],Fo=["clientX","clientY"];function To(t,i,e){var n;if(t)if(t.forEach)t.forEach(i,e);else if(void 0!==t.length)for(n=0;n<t.length;)i.call(e,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&i.call(e,t[n],n,t)}function jo(t,i){return"function"==typeof t?t.apply(i&&i[0]||void 0,i):t}function Yo(t,i){return t.indexOf(i)>-1}var Eo=function(){function t(t,i){this.manager=t,this.set(i)}var i=t.prototype;return i.set=function(t){t===co&&(t=this.compute()),lo&&this.manager.element.style&&yo[t]&&(this.manager.element.style[uo]=t),this.actions=t.toLowerCase().trim()},i.update=function(){this.set(this.manager.options.touchAction)},i.compute=function(){var t=[];return To(this.manager.recognizers,(function(i){jo(i.options.enable,[i])&&(t=t.concat(i.getTouchAction()))})),function(t){if(Yo(t,po))return po;var i=Yo(t,mo),e=Yo(t,go);return i&&e?po:i||e?i?mo:go:Yo(t,vo)?vo:fo}(t.join(" "))},i.preventDefaults=function(t){var i=t.srcEvent,e=t.offsetDirection;if(this.manager.session.prevented)i.preventDefault();else{var n=this.actions,r=Yo(n,po)&&!yo.none,s=Yo(n,go)&&!yo["pan-y"],o=Yo(n,mo)&&!yo["pan-x"];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&6&e||o&&e&Mo?this.preventSrc(i):void 0}},i.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function Ao(t,i){for(;t;){if(t===i)return!0;t=t.parentNode}return!1}function Co(t){var i=t.length;if(1===i)return{x:so(t[0].clientX),y:so(t[0].clientY)};for(var e=0,n=0,r=0;r<i;)e+=t[r].clientX,n+=t[r].clientY,r++;return{x:so(e/i),y:so(n/i)}}function Oo(t){for(var i=[],e=0;e<t.pointers.length;)i[e]={clientX:so(t.pointers[e].clientX),clientY:so(t.pointers[e].clientY)},e++;return{timeStamp:ao(),pointers:i,center:Co(i),deltaX:t.deltaX,deltaY:t.deltaY}}function Lo(t,i,e){e||(e=So);var n=i[e[0]]-t[e[0]],r=i[e[1]]-t[e[1]];return Math.sqrt(n*n+r*r)}function zo(t,i,e){e||(e=So);var n=i[e[0]]-t[e[0]],r=i[e[1]]-t[e[1]];return 180*Math.atan2(r,n)/Math.PI}function Io(t,i){return t===i?1:oo(t)>=oo(i)?t<0?2:4:i<0?8:Do}function No(t,i,e){return{x:i/t||0,y:e/t||0}}function Ho(t,i){var e=t.session,n=i.pointers,r=n.length;e.firstInput||(e.firstInput=Oo(i)),r>1&&!e.firstMultiple?e.firstMultiple=Oo(i):1===r&&(e.firstMultiple=!1);var s=e.firstInput,o=e.firstMultiple,a=o?o.center:s.center,h=i.center=Co(n);i.timeStamp=ao(),i.deltaTime=i.timeStamp-s.timeStamp,i.angle=zo(a,h),i.distance=Lo(a,h),function(t,i){var e=i.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};1!==i.eventType&&4!==s.eventType||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:e.x,y:e.y}),i.deltaX=r.x+(e.x-n.x),i.deltaY=r.y+(e.y-n.y)}(e,i),i.offsetDirection=Io(i.deltaX,i.deltaY);var u,l,c=No(i.deltaTime,i.deltaX,i.deltaY);i.overallVelocityX=c.x,i.overallVelocityY=c.y,i.overallVelocity=oo(c.x)>oo(c.y)?c.x:c.y,i.scale=o?(u=o.pointers,Lo((l=n)[0],l[1],Fo)/Lo(u[0],u[1],Fo)):1,i.rotation=o?function(t,i){return zo(i[1],i[0],Fo)+zo(t[1],t[0],Fo)}(o.pointers,n):0,i.maxPointers=e.prevInput?i.pointers.length>e.prevInput.maxPointers?i.pointers.length:e.prevInput.maxPointers:i.pointers.length,function(t,i){var e,n,r,s,o=t.lastInterval||i,a=i.timeStamp-o.timeStamp;if(8!==i.eventType&&(a>25||void 0===o.velocity)){var h=i.deltaX-o.deltaX,u=i.deltaY-o.deltaY,l=No(a,h,u);n=l.x,r=l.y,e=oo(l.x)>oo(l.y)?l.x:l.y,s=Io(h,u),t.lastInterval=i}else e=o.velocity,n=o.velocityX,r=o.velocityY,s=o.direction;i.velocity=e,i.velocityX=n,i.velocityY=r,i.direction=s}(e,i);var f,d=t.element,v=i.srcEvent;Ao(f=v.composedPath?v.composedPath()[0]:v.path?v.path[0]:v.target,d)&&(d=f),i.target=d}function Bo(t,i,e){var n=e.pointers.length,r=e.changedPointers.length,s=1&i&&n-r==0,o=12&i&&n-r==0;e.isFirst=!!s,e.isFinal=!!o,s&&(t.session={}),e.eventType=i,Ho(t,e),t.emit("hammer.input",e),t.recognize(e),t.session.prevInput=e}function Po(t){return t.trim().split(/\s+/g)}function Ro(t,i,e){To(Po(i),(function(i){t.addEventListener(i,e,!1)}))}function $o(t,i,e){To(Po(i),(function(i){t.removeEventListener(i,e,!1)}))}function Go(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||window}var Wo=function(){function t(t,i){var e=this;this.manager=t,this.callback=i,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(i){jo(t.options.enable,[t])&&e.handler(i)},this.init()}var i=t.prototype;return i.handler=function(){},i.init=function(){this.evEl&&Ro(this.element,this.evEl,this.domHandler),this.evTarget&&Ro(this.target,this.evTarget,this.domHandler),this.evWin&&Ro(Go(this.element),this.evWin,this.domHandler)},i.destroy=function(){this.evEl&&$o(this.element,this.evEl,this.domHandler),this.evTarget&&$o(this.target,this.evTarget,this.domHandler),this.evWin&&$o(Go(this.element),this.evWin,this.domHandler)},t}();function Uo(t,i,e){if(t.indexOf&&!e)return t.indexOf(i);for(var n=0;n<t.length;){if(e&&t[n][e]==i||!e&&t[n]===i)return n;n++}return-1}var qo={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Vo={2:_o,3:"pen",4:xo,5:"kinect"},Xo="pointerdown",Zo="pointermove pointerup pointercancel";io.MSPointerEvent&&!io.PointerEvent&&(Xo="MSPointerDown",Zo="MSPointerMove MSPointerUp MSPointerCancel");var Jo=function(t){function i(){var e,n=i.prototype;return n.evEl=Xo,n.evWin=Zo,(e=t.apply(this,arguments)||this).store=e.manager.session.pointerEvents=[],e}return Qs(i,t),i.prototype.handler=function(t){var i=this.store,e=!1,n=t.type.toLowerCase().replace("ms",""),r=qo[n],s=Vo[t.pointerType]||t.pointerType,o=s===_o,a=Uo(i,t.pointerId,"pointerId");1&r&&(0===t.button||o)?a<0&&(i.push(t),a=i.length-1):12&r&&(e=!0),a<0||(i[a]=t,this.callback(this.manager,r,{pointers:i,changedPointers:[t],pointerType:s,srcEvent:t}),e&&i.splice(a,1))},i}(Wo);function Ko(t){return Array.prototype.slice.call(t,0)}function Qo(t,i,e){for(var n=[],r=[],s=0;s<t.length;){var o=i?t[s][i]:t[s];Uo(r,o)<0&&n.push(t[s]),r[s]=o,s++}return e&&(n=i?n.sort((function(t,e){return t[i]>e[i]})):n.sort()),n}var ta={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ia="touchstart touchmove touchend touchcancel",ea=function(t){function i(){var e;return i.prototype.evTarget=ia,(e=t.apply(this,arguments)||this).targetIds={},e}return Qs(i,t),i.prototype.handler=function(t){var i=ta[t.type],e=na.call(this,t,i);e&&this.callback(this.manager,i,{pointers:e[0],changedPointers:e[1],pointerType:_o,srcEvent:t})},i}(Wo);function na(t,i){var e,n,r=Ko(t.touches),s=this.targetIds;if(3&i&&1===r.length)return s[r[0].identifier]=!0,[r,r];var o=Ko(t.changedTouches),a=[],h=this.target;if(n=r.filter((function(t){return Ao(t.target,h)})),1===i)for(e=0;e<n.length;)s[n[e].identifier]=!0,e++;for(e=0;e<o.length;)s[o[e].identifier]&&a.push(o[e]),12&i&&delete s[o[e].identifier],e++;return a.length?[Qo(n.concat(a),"identifier",!0),a]:void 0}var ra={mousedown:1,mousemove:2,mouseup:4},sa="mousedown",oa="mousemove mouseup",aa=function(t){function i(){var e,n=i.prototype;return n.evEl=sa,n.evWin=oa,(e=t.apply(this,arguments)||this).pressed=!1,e}return Qs(i,t),i.prototype.handler=function(t){var i=ra[t.type];1&i&&0===t.button&&(this.pressed=!0),2&i&&1!==t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:xo,srcEvent:t}))},i}(Wo);function ha(t){var i=t.changedPointers[0];if(i.identifier===this.primaryTouch){var e={x:i.clientX,y:i.clientY},n=this.lastTouches;this.lastTouches.push(e);setTimeout((function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}),2500)}}function ua(t,i){1&t?(this.primaryTouch=i.changedPointers[0].identifier,ha.call(this,i)):12&t&&ha.call(this,i)}function la(t){for(var i=t.srcEvent.clientX,e=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(i-r.x),o=Math.abs(e-r.y);if(s<=25&&o<=25)return!0}return!1}var ca=function(){return function(t){function i(i,e){var n;return(n=t.call(this,i,e)||this).handler=function(t,i,e){var r=e.pointerType===_o,s=e.pointerType===xo;if(!(s&&e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents)){if(r)ua.call(to(to(n)),i,e);else if(s&&la.call(to(to(n)),e))return;n.callback(t,i,e)}},n.touch=new ea(n.manager,n.handler),n.mouse=new aa(n.manager,n.handler),n.primaryTouch=null,n.lastTouches=[],n}return Qs(i,t),i.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},i}(Wo)}();function fa(t,i,e){return!!Array.isArray(t)&&(To(t,e[i],e),!0)}var da=32,va=1;function pa(t,i){var e=i.manager;return e?e.get(t):t}function ma(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var ga=function(){function t(t){void 0===t&&(t={}),this.options=Ks({enable:!0},t),this.id=va++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var i=t.prototype;return i.set=function(t){return eo(this.options,t),this.manager&&this.manager.touchAction.update(),this},i.recognizeWith=function(t){if(fa(t,"recognizeWith",this))return this;var i=this.simultaneous;return i[(t=pa(t,this)).id]||(i[t.id]=t,t.recognizeWith(this)),this},i.dropRecognizeWith=function(t){return fa(t,"dropRecognizeWith",this)||(t=pa(t,this),delete this.simultaneous[t.id]),this},i.requireFailure=function(t){if(fa(t,"requireFailure",this))return this;var i=this.requireFail;return-1===Uo(i,t=pa(t,this))&&(i.push(t),t.requireFailure(this)),this},i.dropRequireFailure=function(t){if(fa(t,"dropRequireFailure",this))return this;t=pa(t,this);var i=Uo(this.requireFail,t);return i>-1&&this.requireFail.splice(i,1),this},i.hasRequireFailures=function(){return this.requireFail.length>0},i.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},i.emit=function(t){var i=this,e=this.state;function n(e){i.manager.emit(e,t)}e<8&&n(i.options.event+ma(e)),n(i.options.event),t.additionalEvent&&n(t.additionalEvent),e>=8&&n(i.options.event+ma(e))},i.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=da},i.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},i.recognize=function(t){var i=eo({},t);if(!jo(this.options.enable,[this,i]))return this.reset(),void(this.state=da);56&this.state&&(this.state=1),this.state=this.process(i),30&this.state&&this.tryEmit(i)},i.process=function(t){},i.getTouchAction=function(){},i.reset=function(){},t}(),ya=function(t){function i(i){var e;return void 0===i&&(i={}),(e=t.call(this,Ks({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this).pTime=!1,e.pCenter=!1,e._timer=null,e._input=null,e.count=0,e}Qs(i,t);var e=i.prototype;return e.getTouchAction=function(){return[vo]},e.process=function(t){var i=this,e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&s&&n){if(4!==t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||Lo(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){i.state=8,i.tryEmit()}),e.interval),2):8}return da},e.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=da}),this.options.interval),da},e.reset=function(){clearTimeout(this._timer)},e.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},i}(ga),ba=function(t){function i(i){return void 0===i&&(i={}),t.call(this,Ks({pointers:1},i))||this}Qs(i,t);var e=i.prototype;return e.attrTest=function(t){var i=this.options.pointers;return 0===i||t.pointers.length===i},e.process=function(t){var i=this.state,e=t.eventType,n=6&i,r=this.attrTest(t);return n&&(8&e||!r)?16|i:n||r?4&e?8|i:2&i?4|i:2:da},i}(ga);function wa(t){return t===Do?"down":8===t?"up":2===t?"left":4===t?"right":""}var ka=function(t){function i(i){var e;return void 0===i&&(i={}),(e=t.call(this,Ks({event:"pan",threshold:10,pointers:1,direction:30},i))||this).pX=null,e.pY=null,e}Qs(i,t);var e=i.prototype;return e.getTouchAction=function(){var t=this.options.direction,i=[];return 6&t&&i.push(go),t&Mo&&i.push(mo),i},e.directionTest=function(t){var i=this.options,e=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&i.direction||(6&i.direction?(r=0===s?1:s<0?2:4,e=s!==this.pX,n=Math.abs(t.deltaX)):(r=0===o?1:o<0?8:Do,e=o!==this.pY,n=Math.abs(t.deltaY))),t.direction=r,e&&n>i.threshold&&r&i.direction},e.attrTest=function(t){return ba.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},e.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var e=wa(i.direction);e&&(i.additionalEvent=this.options.event+e),t.prototype.emit.call(this,i)},i}(ba),_a=function(t){function i(i){return void 0===i&&(i={}),t.call(this,Ks({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},i))||this}Qs(i,t);var e=i.prototype;return e.getTouchAction=function(){return ka.prototype.getTouchAction.call(this)},e.attrTest=function(i){var e,n=this.options.direction;return 30&n?e=i.overallVelocity:6&n?e=i.overallVelocityX:n&Mo&&(e=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&n&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&oo(e)>this.options.velocity&&4&i.eventType},e.emit=function(t){var i=wa(t.offsetDirection);i&&this.manager.emit(this.options.event+i,t),this.manager.emit(this.options.event,t)},i}(ba),xa=function(t){function i(i){return void 0===i&&(i={}),t.call(this,Ks({event:"pinch",threshold:0,pointers:2},i))||this}Qs(i,t);var e=i.prototype;return e.getTouchAction=function(){return[po]},e.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||2&this.state)},e.emit=function(i){if(1!==i.scale){var e=i.scale<1?"in":"out";i.additionalEvent=this.options.event+e}t.prototype.emit.call(this,i)},i}(ba),Da=function(t){function i(i){return void 0===i&&(i={}),t.call(this,Ks({event:"rotate",threshold:0,pointers:2},i))||this}Qs(i,t);var e=i.prototype;return e.getTouchAction=function(){return[po]},e.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||2&this.state)},i}(ba),Ma=function(t){function i(i){var e;return void 0===i&&(i={}),(e=t.call(this,Ks({event:"press",pointers:1,time:251,threshold:9},i))||this)._timer=null,e._input=null,e}Qs(i,t);var e=i.prototype;return e.getTouchAction=function(){return[fo]},e.process=function(t){var i=this,e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!s)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){i.state=8,i.tryEmit()}),e.time);else if(4&t.eventType)return 8;return da},e.reset=function(){clearTimeout(this._timer)},e.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ao(),this.manager.emit(this.options.event,this._input)))},i}(ga),Sa={domEvents:!1,touchAction:co,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Fa=[[Da,{enable:!1}],[xa,{enable:!1},["rotate"]],[_a,{direction:6}],[ka,{direction:6},["swipe"]],[ya],[ya,{event:"doubletap",taps:2},["tap"]],[Ma]];function Ta(t,i){var e,n=t.element;n.style&&(To(t.options.cssProps,(function(r,s){e=ho(n.style,s),i?(t.oldCssProps[e]=n.style[e],n.style[e]=r):n.style[e]=t.oldCssProps[e]||""})),i||(t.oldCssProps={}))}var ja=function(){function t(t,i){var e,n=this;this.options=eo({},Sa,i||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((e=this).options.inputClass||(wo?Jo:ko?ea:bo?ca:aa))(e,Bo),this.touchAction=new Eo(this,this.options.touchAction),Ta(this,!0),To(this.options.recognizers,(function(t){var i=n.add(new t[0](t[1]));t[2]&&i.recognizeWith(t[2]),t[3]&&i.requireFailure(t[3])}),this)}var i=t.prototype;return i.set=function(t){return eo(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},i.stop=function(t){this.session.stopped=t?2:1},i.recognize=function(t){var i=this.session;if(!i.stopped){var e;this.touchAction.preventDefaults(t);var n=this.recognizers,r=i.curRecognizer;(!r||r&&8&r.state)&&(i.curRecognizer=null,r=null);for(var s=0;s<n.length;)e=n[s],2===i.stopped||r&&e!==r&&!e.canRecognizeWith(r)?e.reset():e.recognize(t),!r&&14&e.state&&(i.curRecognizer=e,r=e),s++}},i.get=function(t){if(t instanceof ga)return t;for(var i=this.recognizers,e=0;e<i.length;e++)if(i[e].options.event===t)return i[e];return null},i.add=function(t){if(fa(t,"add",this))return this;var i=this.get(t.options.event);return i&&this.remove(i),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},i.remove=function(t){if(fa(t,"remove",this))return this;var i=this.get(t);if(t){var e=this.recognizers,n=Uo(e,i);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},i.on=function(t,i){if(void 0===t||void 0===i)return this;var e=this.handlers;return To(Po(t),(function(t){e[t]=e[t]||[],e[t].push(i)})),this},i.off=function(t,i){if(void 0===t)return this;var e=this.handlers;return To(Po(t),(function(t){i?e[t]&&e[t].splice(Uo(e[t],i),1):delete e[t]})),this},i.emit=function(t,i){this.options.domEvents&&function(t,i){var e=document.createEvent("Event");e.initEvent(t,!0,!0),e.gesture=i,i.target.dispatchEvent(e)}(t,i);var e=this.handlers[t]&&this.handlers[t].slice();if(e&&e.length){i.type=t,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var n=0;n<e.length;)e[n](i),n++}},i.destroy=function(){this.element&&Ta(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Ya={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ea="touchstart",Aa="touchstart touchmove touchend touchcancel",Ca=function(t){function i(){var e,n=i.prototype;return n.evTarget=Ea,n.evWin=Aa,(e=t.apply(this,arguments)||this).started=!1,e}return Qs(i,t),i.prototype.handler=function(t){var i=Ya[t.type];if(1===i&&(this.started=!0),this.started){var e=Oa.call(this,t,i);12&i&&e[0].length-e[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:e[0],changedPointers:e[1],pointerType:_o,srcEvent:t})}},i}(Wo);function Oa(t,i){var e=Ko(t.touches),n=Ko(t.changedTouches);return 12&i&&(e=Qo(e.concat(n),"identifier",!0)),[e,n]}function La(t,i,e){var n="DEPRECATED METHOD: "+i+"\n"+e+" AT \n";return function(){var i=new Error("get-stack-trace"),e=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,n,e),t.apply(this,arguments)}}var za=La((function(t,i,e){for(var n=Object.keys(i),r=0;r<n.length;)(!e||e&&void 0===t[n[r]])&&(t[n[r]]=i[n[r]]),r++;return t}),"extend","Use `assign`."),Ia=La((function(t,i){return za(t,i,!0)}),"merge","Use `assign`.");function Na(t,i,e){var n,r=i.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,e&&eo(n,e)}function Ha(t,i){return function(){return t.apply(i,arguments)}}var Ba=function(){var t=function(t,i){return void 0===i&&(i={}),new ja(t,Ks({recognizers:Fa.concat()},i))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=Do,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=Mo,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=Do,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=da,t.Manager=ja,t.Input=Wo,t.TouchAction=Eo,t.TouchInput=ea,t.MouseInput=aa,t.PointerEventInput=Jo,t.TouchMouseInput=ca,t.SingleTouchInput=Ca,t.Recognizer=ga,t.AttrRecognizer=ba,t.Tap=ya,t.Pan=ka,t.Swipe=_a,t.Pinch=xa,t.Rotate=Da,t.Press=Ma,t.on=Ro,t.off=$o,t.each=To,t.merge=Ia,t.extend=za,t.bindFn=Ha,t.assign=eo,t.inherit=Na,t.bindFn=Ha,t.prefixed=ho,t.toArray=Ko,t.inArray=Uo,t.uniqueArray=Qo,t.splitStr=Po,t.boolOrFn=jo,t.hasParent=Ao,t.addEventListeners=Ro,t.removeEventListeners=$o,t.defaults=eo({},Sa,{preset:Fa}),t}();function Pa(t,i){var e=cr(t);if(nn){var n=nn(t);i&&(n=os(n).call(n,(function(i){return on(t,i).enumerable}))),e.push.apply(e,n)}return e}function Ra(t){for(var i=1;i<arguments.length;i++){var e,n=null!=arguments[i]?arguments[i]:{};if(i%2)Sr(e=Pa(Object(n),!0)).call(e,(function(i){pn(t,i,n[i])}));else if(hn)un(t,hn(n));else{var r;Sr(r=Pa(Object(n))).call(r,(function(i){cn(t,i,on(n,i))}))}}return t}function $a(t,i){var e=void 0!==Kn&&ue(t)||t["@@iterator"];if(!e){if(rr(t)||(e=function(t,i){var e;if(!t)return;if("string"==typeof t)return Ga(t,i);var n=er(e=Object.prototype.toString.call(t)).call(e,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return ie(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ga(t,i)}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw s}}}}function Ga(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}var Wa=Kn("DELETE");function Ua(t){for(var i,e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return qa.apply(void 0,ir(i=[{},t]).call(i,n))}function qa(){var t=Va.apply(void 0,arguments);return Za(t),t}function Va(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];if(i.length<2)return i[0];var n;if(i.length>2)return Va.apply(void 0,ir(n=[qa(i[0],i[1])]).call(n,Jn(er(i).call(i,2))));var r,s=i[0],o=i[1],a=$a(nr(o));try{for(a.s();!(r=a.n()).done;){var h=r.value;Object.prototype.propertyIsEnumerable.call(o,h)&&(o[h]===Wa?delete s[h]:null===s[h]||null===o[h]||"object"!==qn(s[h])||"object"!==qn(o[h])||rr(s[h])||rr(o[h])?s[h]=Xa(o[h]):s[h]=Va(s[h],o[h]))}}catch(t){a.e(t)}finally{a.f()}return s}function Xa(t){return rr(t)?ur(t).call(t,(function(t){return Xa(t)})):"object"===qn(t)&&null!==t?Va({},t):t}function Za(t){for(var i=0,e=cr(t);i<e.length;i++){var n=e[i];t[n]===Wa?delete t[n]:"object"===qn(t[n])&&null!==t[n]&&Za(t[n])}}function Ja(t){var i=function(){for(var t=Ka(),i=t(" "),e=t(" "),n=t(" "),r=0;r<arguments.length;r++)(i-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(i+=1),(e-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(e+=1),(n-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(n+=1);return[i,e,n]}(t),e=$n(i,3),n=e[0],r=e[1],s=e[2],o=1,a=function(){var t=2091639*n+2.3283064365386963e-10*o;return n=r,r=s,s=t-(o=0|t)};return a.uint32=function(){return 4294967296*a()},a.fract53=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.algorithm="Alea",a.seed=t,a.version="0.9",a}function Ka(){var t=4022871197;return function(i){for(var e=i.toString(),n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}var Qa="undefined"!=typeof window?window.Hammer||Ba:function(){return{on:t=function(){},off:t,destroy:t,emit:t,get:function(){return{set:t}}};var t};function th(t){var i,e=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){e._dom.overlay.parentNode.removeChild(e._dom.overlay)}));var n=Qa(this._dom.overlay);n.on("tap",br(i=this._onTapOverlay).call(i,this)),this._cleanupQueue.push((function(){n.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Sr(r).call(r,(function(t){n.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(i){(function(t,i){for(;t;){if(t===i)return!0;t=t.parentNode}return!1})(i.target,t)||e.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",e._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&e.deactivate()}}Js(th.prototype),th.current=null,th.prototype.destroy=function(){var t,i;this.deactivate();var e,n=$a(Er(t=Hr(i=this._cleanupQueue).call(i,0)).call(t));try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(t){n.e(t)}finally{n.f()}},th.prototype.activate=function(){th.current&&th.current.deactivate(),th.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},th.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},th.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var ih=/^\/?Date\((-?\d+)/i,eh=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,nh=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,rh=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,sh=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function oh(t){return t instanceof Number||"number"==typeof t}function ah(t){return t instanceof String||"string"==typeof t}function hh(t){return"object"===qn(t)&&null!==t}function uh(t,i,e,n){var r=!1;!0===n&&(r=null===i[e]&&void 0!==t[e]),r?delete t[e]:t[e]=i[e]}var lh=$r;function ch(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)||!0===e)if("object"===qn(i[r])&&null!==i[r]&&is(i[r])===Object.prototype)void 0===t[r]?t[r]=ch({},i[r],e):"object"===qn(t[r])&&null!==t[r]&&is(t[r])===Object.prototype?ch(t[r],i[r],e):uh(t,i,r,n);else if(rr(i[r])){var s;t[r]=er(s=i[r]).call(s)}else uh(t,i,r,n);return t}function fh(t){var i=qn(t);return"object"===i?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":rr(t)?"Array":t instanceof Date?"Date":"Object":"number"===i?"Number":"boolean"===i?"Boolean":"string"===i?"String":void 0===i?"undefined":i}function dh(t,i){var e;return ir(e=[]).call(e,Jn(t),[i])}function vh(t){return er(t).call(t)}var ph=ls;var mh={asBoolean:function(t,i){return"function"==typeof t&&(t=t()),null!=t?0!=t:i||null},asNumber:function(t,i){return"function"==typeof t&&(t=t()),null!=t?Number(t)||i||null:i||null},asString:function(t,i){return"function"==typeof t&&(t=t()),null!=t?String(t):i||null},asSize:function(t,i){return"function"==typeof t&&(t=t()),ah(t)?t:oh(t)?t+"px":i||null},asElement:function(t,i){return"function"==typeof t&&(t=t()),t||i||null}};function gh(t){var i;switch(t.length){case 3:case 4:return(i=nh.exec(t))?{r:ks(i[1]+i[1],16),g:ks(i[2]+i[2],16),b:ks(i[3]+i[3],16)}:null;case 6:case 7:return(i=eh.exec(t))?{r:ks(i[1],16),g:ks(i[2],16),b:ks(i[3],16)}:null;default:return null}}function yh(t,i,e){var n;return"#"+er(n=((1<<24)+(t<<16)+(i<<8)+e).toString(16)).call(n,1)}function bh(t,i,e){t/=255,i/=255,e/=255;var n=Math.min(t,Math.min(i,e)),r=Math.max(t,Math.max(i,e));return n===r?{h:0,s:0,v:n}:{h:60*((t===n?3:e===n?1:5)-(t===n?i-e:e===n?t-i:e-t)/(r-n))/360,s:(r-n)/r,v:r}}var wh=function(t){var i,e={};return Sr(i=t.split(";")).call(i,(function(t){if(""!=Cs(t).call(t)){var i,n,r=t.split(":"),s=Cs(i=r[0]).call(i),o=Cs(n=r[1]).call(n);e[s]=o}})),e},kh=function(t){var i;return ur(i=cr(t)).call(i,(function(i){return i+": "+t[i]})).join("; ")};function _h(t,i,e){var n,r,s,o=Math.floor(6*t),a=6*t-o,h=e*(1-i),u=e*(1-a*i),l=e*(1-(1-a)*i);switch(o%6){case 0:n=e,r=l,s=h;break;case 1:n=u,r=e,s=h;break;case 2:n=h,r=e,s=l;break;case 3:n=h,r=u,s=e;break;case 4:n=l,r=h,s=e;break;case 5:n=e,r=h,s=u}return{r:Math.floor(255*n),g:Math.floor(255*r),b:Math.floor(255*s)}}function xh(t,i,e){var n=_h(t,i,e);return yh(n.r,n.g,n.b)}function Dh(t){var i=gh(t);if(!i)throw new TypeError("'".concat(t,"' is not a valid color."));return bh(i.r,i.g,i.b)}function Mh(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function Sh(t){return rh.test(t)}function Fh(t){return sh.test(t)}function Th(t){if(null===t||"object"!==qn(t))return null;if(t instanceof Element)return t;var i=zs(t);for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&"object"==qn(t[e])&&(i[e]=Th(t[e]));return i}var jh={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Yh=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;fn(this,t),this.pixelRatio=i,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return vn(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return jh[t]}},{key:"setColor",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var e,n=this._isColorString(t);if(void 0!==n&&(t=n),!0===ah(t)){if(!0===Sh(t)){var r=t.substr(4).substr(0,t.length-5).split(",");e={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===Fh(t)){var s=t.substr(5).substr(0,t.length-6).split(",");e={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(!0===Mh(t)){var o=gh(t);e={r:o.r,g:o.g,b:o.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var a=void 0!==t.a?t.a:"1.0";e={r:t.r,g:t.g,b:t.b,a}}if(void 0===e)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+$s(t));this._setColor(e,i)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!0===i&&(this.previousColor=$r({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",qs((function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!0===i&&(this.initialColor=$r({},t)),this.color=t;var e=bh(t.r,t.g,t.b),n=2*Math.PI,r=this.r*e.s,s=this.centerCoordinates.x+r*Math.sin(n*e.h),o=this.centerCoordinates.y+r*Math.cos(n*e.h);this.colorPickerSelector.style.left=s-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var i=bh(this.color.r,this.color.g,this.color.b);i.v=t/100;var e=_h(i.h,i.s,i.v);e.a=this.color.a,this.color=e,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,i=bh(t.r,t.g,t.b),e=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,n,r),e.putImageData(this.hueCircle,0,0),e.fillStyle="rgba(0,0,0,"+(1-i.v)+")",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Zs(e).call(e),this.brightnessRange.value=100*i.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,i,e,n;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var r=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var s=document.createElement("DIV");s.style.color="red",s.style.fontWeight="bold",s.style.padding="10px",s.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(s)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var o=this;this.opacityRange.onchange=function(){o._setOpacity(this.value)},this.opacityRange.oninput=function(){o._setOpacity(this.value)},this.brightnessRange.onchange=function(){o._setBrightness(this.value)},this.brightnessRange.oninput=function(){o._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=br(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=br(i=this._apply).call(i,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=br(e=this._save).call(e,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=br(n=this._loadLast).call(n,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new Qa(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",(function(i){i.isFirst&&t._moveSelector(i)})),this.hammer.on("tap",(function(i){t._moveSelector(i)})),this.hammer.on("panstart",(function(i){t._moveSelector(i)})),this.hammer.on("panmove",(function(i){t._moveSelector(i)})),this.hammer.on("panend",(function(i){t._moveSelector(i)}))}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i,e,n,r,s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,s,o),this.centerCoordinates={x:.5*s,y:.5*o},this.r=.49*s;var a,h=2*Math.PI/360,u=1/this.r;for(n=0;n<360;n++)for(r=0;r<this.r;r++)i=this.centerCoordinates.x+r*Math.sin(h*n),e=this.centerCoordinates.y+r*Math.cos(h*n),a=_h(.002777777777777778*n,r*u,1),t.fillStyle="rgb("+a.r+","+a.g+","+a.b+")",t.fillRect(i-.5,e-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,s,o)}this.generated=!0}},{key:"_moveSelector",value:function(t){var i=this.colorPickerDiv.getBoundingClientRect(),e=t.center.x-i.left,n=t.center.y-i.top,r=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,o=e-s,a=n-r,h=Math.atan2(o,a),u=.98*Math.min(Math.sqrt(o*o+a*a),s),l=Math.cos(h)*u+r,c=Math.sin(h)*u+s;this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var f=h/(2*Math.PI);f=f<0?f+1:f;var d=u/this.r,v=bh(this.color.r,this.color.g,this.color.b);v.h=f,v.s=d;var p=_h(v.h,v.s,v.v);p.a=this.color.a,this.color=p,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();function Eh(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];if(i.length<1)throw new TypeError("Invalid arguments.");if(1===i.length)return document.createTextNode(i[0]);var n=document.createElement(i[0]);return n.appendChild(Eh.apply(void 0,Jn(er(i).call(i,1)))),n}var Ah,Ch=function(){function t(i,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!1};fn(this,t),this.parent=i,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},$r(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Yh(r),this.wrapper=void 0}return vn(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var i=!0;if("string"==typeof t)this.options.filter=t;else if(rr(t))this.options.filter=t.join();else if("object"===qn(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==os(t)&&(this.options.filter=os(t)),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(i=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,i=t):"function"==typeof t&&(this.options.filter=t,i=!0);!1===os(this.options)&&(i=!1),this.options.enabled=i}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=os(this.options),i=0,e=!1;for(var n in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,n)&&(this.allowCreation=!1,e=!1,"function"==typeof t?e=(e=t(n,[]))||this._handleObject(this.configureOptions[n],[n],!0):!0!==t&&-1===js(t).call(t,n)||(e=!0),!1!==e&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),i++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var i=this.moduleOptions,e=0;e<t.length;e++){if(void 0===i[t[e]]){i=void 0;break}i=i[t[e]]}return i}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var i=document.createElement("div");i.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Sr(n).call(n,(function(t){i.appendChild(t)})),this.domElements.push(i),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var i=document.createElement("div");i.className="vis-configuration vis-config-header",i.innerText=t,this._makeItem([],i)}},{key:"_makeLabel",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");if(n.className="vis-configuration vis-config-label vis-config-s"+i.length,!0===e){for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(Eh("i","b",t))}else n.innerText=t+":";return n}},{key:"_makeDropdown",value:function(t,i,e){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var r=0;void 0!==i&&-1!==js(t).call(t,i)&&(r=js(t).call(t,i));for(var s=0;s<t.length;s++){var o=document.createElement("option");o.value=t[s],s===r&&(o.selected="selected"),o.innerText=t[s],n.appendChild(o)}var a=this;n.onchange=function(){a._update(this.value,e)};var h=this._makeLabel(e[e.length-1],e);this._makeItem(e,h,n)}},{key:"_makeRange",value:function(t,i,e){var n=t[0],r=t[1],s=t[2],o=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=r,a.max=s}catch(t){}a.step=o;var h="",u=0;if(void 0!==i){var l=1.2;i<0&&i*l<r?(a.min=Math.ceil(i*l),u=a.min,h="range increased"):i/l<r&&(a.min=Math.ceil(i/l),u=a.min,h="range increased"),i*l>s&&1!==s&&(a.max=Math.ceil(i*l),u=a.max,h="range increased"),a.value=i}else a.value=n;var c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=a.value;var f=this;a.onchange=function(){c.value=this.value,f._update(Number(this.value),e)},a.oninput=function(){c.value=this.value};var d=this._makeLabel(e[e.length-1],e),v=this._makeItem(e,d,a,c);""!==h&&this.popupHistory[v]!==u&&(this.popupHistory[v]=u,this._setupPopup(h,v))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var i=document.createElement("div");i.className="vis-configuration vis-config-button",i.innerText="generate options",i.onclick=function(){t._printOptions()},i.onmouseover=function(){i.className="vis-configuration vis-config-button hover"},i.onmouseout=function(){i.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(i)}}},{key:"_setupPopup",value:function(t,i){var e=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=t,n.onclick=function(){e._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:i}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var i=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=qs((function(){t.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=qs((function(){t._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(t,i,e){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==i&&(n.checked=i,i!==t&&("object"===qn(t)?i!==t.enabled&&this.changedOptions.push({path:e,value:i}):this.changedOptions.push({path:e,value:i})));var r=this;n.onchange=function(){r._update(this.checked,e)};var s=this._makeLabel(e[e.length-1],e);this._makeItem(e,s,n)}},{key:"_makeTextInput",value:function(t,i,e){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=i,i!==t&&this.changedOptions.push({path:e,value:i});var r=this;n.onchange=function(){r._update(this.value,e)};var s=this._makeLabel(e[e.length-1],e);this._makeItem(e,s,n)}},{key:"_makeColorField",value:function(t,i,e){var n=this,r=t[1],s=document.createElement("div");"none"!==(i=void 0===i?r:i)?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=i):s.className="vis-configuration vis-config-colorBlock none",i=void 0===i?r:i,s.onclick=function(){n._showColorPicker(i,s,e)};var o=this._makeLabel(e[e.length-1],e);this._makeItem(e,o,s)}},{key:"_showColorPicker",value:function(t,i,e){var n=this;i.onclick=function(){},this.colorPicker.insertTo(i),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback((function(t){var r="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";i.style.backgroundColor=r,n._update(r,e)})),this.colorPicker.setCloseCallback((function(){i.onclick=function(){n._showColorPicker(t,i,e)}}))}},{key:"_handleObject",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,r=os(this.options),s=!1;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){n=!0;var a=t[o],h=dh(i,o);if("function"==typeof r&&!1===(n=r(o,i))&&!rr(a)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,n=this._handleObject(a,h,!0),this.allowCreation=!1===e),!1!==n){s=!0;var u=this._getValue(h);if(rr(a))this._handleArray(a,u,h);else if("string"==typeof a)this._makeTextInput(a,u,h);else if("boolean"==typeof a)this._makeCheckbox(a,u,h);else if(a instanceof Object){if(!this.hideOption(i,o,this.moduleOptions))if(void 0!==a.enabled){var l=dh(h,"enabled"),c=this._getValue(l);if(!0===c){var f=this._makeLabel(o,h,!0);this._makeItem(h,f),s=this._handleObject(a,h)||s}else this._makeCheckbox(a,c,h)}else{var d=this._makeLabel(o,h,!0);this._makeItem(h,d),s=this._handleObject(a,h)||s}}else console.error("dont know how to handle",a,o,h)}}return s}},{key:"_handleArray",value:function(t,i,e){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,i,e),t[1]!==i&&this.changedOptions.push({path:e,value:i})):"string"==typeof t[0]?(this._makeDropdown(t,i,e),t[0]!==i&&this.changedOptions.push({path:e,value:i})):"number"==typeof t[0]&&(this._makeRange(t,i,e),t[0]!==i&&this.changedOptions.push({path:e,value:Number(i)}))}},{key:"_update",value:function(t,i){var e=this._constructOptions(t,i);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",e),this.initialized=!0,this.parent.setOptions(e)}},{key:"_constructOptions",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e;t="false"!==(t="true"===t||t)&&t;for(var r=0;r<i.length;r++)"global"!==i[r]&&(void 0===n[i[r]]&&(n[i[r]]={}),r!==i.length-1?n=n[i[r]]:n[i[r]]=t);return e}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Eh("pre","const options = "+$s(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},i=0;i<this.changedOptions.length;i++)this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,t);return t}}]),t}(),Oh=!1,Lh="background: #FFeeee; color: #dd0000",zh=th,Ih=Yh,Nh=Ch,Hh=Qa,Bh=function(){function t(i,e){fn(this,t),this.container=i,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return vn(t,[{key:"setPosition",value:function(t,i){this.x=ks(t),this.y=ks(i)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var i=this.frame.clientHeight,e=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,s=0,o=0;if("flip"==this.overflowMethod){var a=!1,h=!0;this.y-i<this.padding&&(h=!1),this.x+e>r-this.padding&&(a=!0),s=a?this.x-e:this.x,o=h?this.y-i:this.y}else(o=this.y-i)+i+this.padding>n&&(o=n-i-this.padding),o<this.padding&&(o=this.padding),(s=this.x)+e+this.padding>r&&(s=r-e-this.padding),s<this.padding&&(s=this.padding);this.frame.style.left=s+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),Ph=function(){function t(){fn(this,t)}return vn(t,null,[{key:"validate",value:function(i,e,n){Oh=!1,Ah=e;var r=e;return void 0!==n&&(r=e[n]),t.parse(i,r,[]),Oh}},{key:"parse",value:function(i,e,n){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.check(r,i,e,n)}},{key:"check",value:function(i,e,n,r){if(void 0!==n[i]||void 0!==n.__any__){var s=i,o=!0;void 0===n[i]&&void 0!==n.__any__&&(s="__any__",o="object"===t.getType(e[i]));var a=n[s];o&&void 0!==a.__type__&&(a=a.__type__),t.checkFields(i,e,n,s,a,r)}else t.getSuggestion(i,n,r)}},{key:"checkFields",value:function(i,e,n,r,s,o){var a=function(e){console.error("%c"+e+t.printLocation(o,i),Lh)},h=t.getType(e[i]),u=s[h];void 0!==u?"array"===t.getType(u)&&-1===js(u).call(u,e[i])?(a('Invalid option detected in "'+i+'". Allowed values are:'+t.print(u)+' not "'+e[i]+'". '),Oh=!0):"object"===h&&"__any__"!==r&&(o=dh(o,i),t.parse(e[i],n[r],o)):void 0===s.any&&(a('Invalid type received for "'+i+'". Expected: '+t.print(cr(s))+". Received ["+h+'] "'+e[i]+'"'),Oh=!0)}},{key:"getType",value:function(t){var i=qn(t);return"object"===i?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":rr(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===i?"number":"boolean"===i?"boolean":"string"===i?"string":void 0===i?"undefined":i}},{key:"getSuggestion",value:function(i,e,n){var r,s=t.findInOptions(i,e,n,!1),o=t.findInOptions(i,Ah,[],!0);r=void 0!==s.indexMatch?" in "+t.printLocation(s.path,i,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+'"?\n\n':o.distance<=4&&s.distance>o.distance?" in "+t.printLocation(s.path,i,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(o.path,o.closestMatch,""):s.distance<=8?'. Did you mean "'+s.closestMatch+'"?'+t.printLocation(s.path,i):". Did you mean one of these: "+t.print(cr(e))+t.printLocation(n,i),console.error('%cUnknown option detected: "'+i+'"'+r,Lh),Oh=!0}},{key:"findInOptions",value:function(i,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=1e9,o="",a=[],h=i.toLowerCase(),u=void 0;for(var l in e){var c=void 0;if(void 0!==e[l].__type__&&!0===r){var f=t.findInOptions(i,e[l],dh(n,l));s>f.distance&&(o=f.closestMatch,a=f.path,s=f.distance,u=f.indexMatch)}else{var d;-1!==js(d=l.toLowerCase()).call(d,h)&&(u=l),s>(c=t.levenshteinDistance(i,l))&&(o=l,a=vh(n),s=c)}}return{closestMatch:o,path:a,distance:s,indexMatch:u}}},{key:"printLocation",value:function(t,i){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n",n="\n\n"+e+"options = {\n",r=0;r<t.length;r++){for(var s=0;s<r+1;s++)n+="  ";n+=t[r]+": {\n"}for(var o=0;o<t.length+1;o++)n+="  ";n+=i+"\n";for(var a=0;a<t.length+1;a++){for(var h=0;h<t.length-a;h++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return $s(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,i){if(0===t.length)return i.length;if(0===i.length)return t.length;var e,n,r=[];for(e=0;e<=i.length;e++)r[e]=[e];for(n=0;n<=t.length;n++)r[0][n]=n;for(e=1;e<=i.length;e++)for(n=1;n<=t.length;n++)i.charAt(e-1)==t.charAt(n-1)?r[e][n]=r[e-1][n-1]:r[e][n]=Math.min(r[e-1][n-1]+1,Math.min(r[e][n-1]+1,r[e-1][n]+1));return r[i.length][t.length]}}]),t}(),Rh=Object.freeze({__proto__:null,Activator:zh,Alea:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return Ja(i.length?i:[fr()])},ColorPicker:Ih,Configurator:Nh,DELETE:Wa,HSVToHex:xh,HSVToRGB:_h,Hammer:Hh,Popup:Bh,RGBToHSV:bh,RGBToHex:yh,VALIDATOR_PRINT_STYLE:"background: #FFeeee; color: #dd0000",Validator:Ph,addClassName:function(t,i){var e=t.className.split(" "),n=i.split(" ");e=ir(e).call(e,os(n).call(n,(function(t){return!Kr(e).call(e,t)}))),t.className=e.join(" ")},addCssText:function(t,i){var e=wh(t.style.cssText),n=wh(i),r=Ra(Ra({},e),n);t.style.cssText=kh(r)},addEventListener:function(t,i,e,n){var r;t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===i&&Kr(r=navigator.userAgent).call(r,"Firefox")&&(i="DOMMouseScroll"),t.addEventListener(i,e,n)):t.attachEvent("on"+i,e)},binarySearchCustom:function(t,i,e,n){for(var r=0,s=0,o=t.length-1;s<=o&&r<1e4;){var a=Math.floor((s+o)/2),h=t[a],u=i(void 0===n?h[e]:h[e][n]);if(0==u)return a;-1==u?s=a+1:o=a-1,r++}return-1},binarySearchValue:function(t,i,e,n,r){var s,o,a,h,u=0,l=0,c=t.length-1;for(r=null!=r?r:function(t,i){return t==i?0:t<i?-1:1};l<=c&&u<1e4;){if(h=Math.floor(.5*(c+l)),s=t[Math.max(0,h-1)][e],o=t[h][e],a=t[Math.min(t.length-1,h+1)][e],0==r(o,i))return h;if(r(s,i)<0&&r(o,i)>0)return"before"==n?Math.max(0,h-1):h;if(r(o,i)<0&&r(a,i)>0)return"before"==n?h:Math.min(t.length-1,h+1);r(o,i)<0?l=h+1:c=h-1,u++}return-1},bridgeObject:Th,copyAndExtendArray:dh,copyArray:vh,deepExtend:ch,deepObjectAssign:qa,easingFunctions:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},equalArray:function(t,i){if(t.length!==i.length)return!1;for(var e=0,n=t.length;e<n;e++)if(t[e]!=i[e])return!1;return!0},extend:lh,fillIfDefined:function t(i,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var r in i)if(void 0!==e[r])if(null===e[r]||"object"!==qn(e[r]))uh(i,e,r,n);else{var s=i[r],o=e[r];hh(s)&&hh(o)&&t(s,o,n)}},forEach:function(t,i){if(rr(t))for(var e=t.length,n=0;n<e;n++)i(t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&i(t[r],r,t)},getAbsoluteLeft:function(t){return t.getBoundingClientRect().left},getAbsoluteRight:function(t){return t.getBoundingClientRect().right},getAbsoluteTop:function(t){return t.getBoundingClientRect().top},getScrollBarWidth:function(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var i=document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.visibility="hidden",i.style.width="200px",i.style.height="150px",i.style.overflow="hidden",i.appendChild(t),document.body.appendChild(i);var e=t.offsetWidth;i.style.overflow="scroll";var n=t.offsetWidth;return e==n&&(n=i.clientWidth),document.body.removeChild(i),e-n},getTarget:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,i=null;return t&&(t.target?i=t.target:t.srcElement&&(i=t.srcElement)),i instanceof Element&&(null==i.nodeType||3!=i.nodeType||(i=i.parentNode)instanceof Element)?i:null},getType:fh,hasParent:function(t,i){for(var e=t;e;){if(e===i)return!0;if(!e.parentNode)return!1;e=e.parentNode}return!1},hexToHSV:Dh,hexToRGB:gh,insertSort:function(t,i){for(var e=0;e<t.length;e++){var n=t[e],r=void 0;for(r=e;r>0&&i(n,t[r-1])<0;r--)t[r]=t[r-1];t[r]=n}return t},isDate:function(t){if(t instanceof Date)return!0;if(ah(t)){if(ih.exec(t))return!0;if(!isNaN(Date.parse(t)))return!0}return!1},isNumber:oh,isObject:hh,isString:ah,isValidHex:Mh,isValidRGB:Sh,isValidRGBA:Fh,mergeOptions:function(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=function(t){return null!=t},s=function(t){return null!==t&&"object"===qn(t)},o=function(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(i))throw new Error("Parameter options must be an object");if(!r(e))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=function(t,i,e){s(t[e])||(t[e]={});var n=i[e],r=t[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},h=i[e],u=s(n)&&!o(n),l=u?n[e]:void 0,c=l?l.enabled:void 0;if(void 0!==h){if("boolean"==typeof h)return s(t[e])||(t[e]={}),void(t[e].enabled=h);if(null===h&&!s(t[e])){if(!r(l))return;t[e]=zs(l)}if(s(h)){var f=!0;void 0!==h.enabled?f=h.enabled:void 0!==c&&(f=l.enabled),a(t,i,e),t[e].enabled=f}}},option:mh,overrideOpacity:function(t,i){if(Kr(t).call(t,"rgba"))return t;if(Kr(t).call(t,"rgb")){var e=t.substr(js(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+e[0]+","+e[1]+","+e[2]+","+i+")"}var n=gh(t);return null==n?t:"rgba("+n.r+","+n.g+","+n.b+","+i+")"},parseColor:function(t,i){if(ah(t)){var e=t;if(Sh(e)){var n,r=ur(n=e.substr(4).substr(0,e.length-5).split(",")).call(n,(function(t){return ks(t)}));e=yh(r[0],r[1],r[2])}if(!0===Mh(e)){var s=Dh(e),o={h:s.h,s:.8*s.s,v:Math.min(1,1.02*s.v)},a={h:s.h,s:Math.min(1,1.25*s.s),v:.8*s.v},h=xh(a.h,a.s,a.v),u=xh(o.h,o.s,o.v);return{background:e,border:h,highlight:{background:u,border:h},hover:{background:u,border:h}}}return{background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}return i?{background:t.background||i.background,border:t.border||i.border,highlight:ah(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||i.highlight.background,border:t.highlight&&t.highlight.border||i.highlight.border},hover:ah(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||i.hover.border,background:t.hover&&t.hover.background||i.hover.background}}:{background:t.background||void 0,border:t.border||void 0,highlight:ah(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:ah(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}},preventDefault:function(t){t||(t=window.event),t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},pureDeepObjectAssign:Ua,recursiveDOMDelete:function t(i){if(i)for(;!0===i.hasChildNodes();){var e=i.firstChild;e&&(t(e),i.removeChild(e))}},removeClassName:function(t,i){var e=t.className.split(" "),n=i.split(" ");e=os(e).call(e,(function(t){return!Kr(n).call(n,t)})),t.className=e.join(" ")},removeCssText:function(t,i){var e=wh(t.style.cssText),n=wh(i);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&delete e[r];t.style.cssText=kh(e)},removeEventListener:function(t,i,e,n){var r;t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===i&&Kr(r=navigator.userAgent).call(r,"Firefox")&&(i="DOMMouseScroll"),t.removeEventListener(i,e,n)):t.detachEvent("on"+i,e)},selectiveBridgeObject:function(t,i){if(null!==i&&"object"===qn(i)){for(var e=zs(i),n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(i,t[n])&&"object"==qn(i[t[n]])&&(e[t[n]]=Th(i[t[n]]));return e}return null},selectiveDeepExtend:function(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(rr(e))throw new TypeError("Arrays are not supported by deepExtend");for(var r=0;r<t.length;r++){var s=t[r];if(Object.prototype.hasOwnProperty.call(e,s))if(e[s]&&e[s].constructor===Object)void 0===i[s]&&(i[s]={}),i[s].constructor===Object?ch(i[s],e[s],!1,n):uh(i,e,s,n);else{if(rr(e[s]))throw new TypeError("Arrays are not supported by deepExtend");uh(i,e,s,n)}}return i},selectiveExtend:function(t,i){if(!rr(t))throw new Error("Array with property names expected as first argument");for(var e=arguments.length,n=new Array(e>2?e-2:0),r=2;r<e;r++)n[r-2]=arguments[r];for(var s=0,o=n;s<o.length;s++)for(var a=o[s],h=0;h<t.length;h++){var u=t[h];a&&Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i},selectiveNotDeepExtend:function(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(rr(e))throw new TypeError("Arrays are not supported by deepExtend");for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&!Kr(t).call(t,r))if(e[r]&&e[r].constructor===Object)void 0===i[r]&&(i[r]={}),i[r].constructor===Object?ch(i[r],e[r]):uh(i,e,r,n);else if(rr(e[r])){i[r]=[];for(var s=0;s<e[r].length;s++)i[r].push(e[r][s])}else uh(i,e,r,n);return i},throttle:function(t){var i=!1;return function(){i||(i=!0,requestAnimationFrame((function(){i=!1,t()})))}},toArray:ph,topMost:function(t,i){var e;rr(i)||(i=[i]);var n,r=$a(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(s){e=s[i[0]];for(var o=1;o<i.length;o++)e&&(e=e[i[o]]);if(void 0!==e)break}}}catch(t){r.e(t)}finally{r.f()}return e},updateProperty:function(t,i,e){return t[i]!==e&&(t[i]=e,!0)}});function $h(t){for(var i in t)t.hasOwnProperty(i)&&(t[i].redundant=t[i].used,t[i].used=[])}function Gh(t){for(var i in t)if(t.hasOwnProperty(i)&&t[i].redundant){for(var e=0;e<t[i].redundant.length;e++)t[i].redundant[e].parentNode.removeChild(t[i].redundant[e]);t[i].redundant=[]}}function Wh(t){$h(t),Gh(t),$h(t)}function Uh(t,i,e){var n;return i.hasOwnProperty(t)?i[t].redundant.length>0?(n=i[t].redundant[0],i[t].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",t),e.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",t),i[t]={used:[],redundant:[]},e.appendChild(n)),i[t].used.push(n),n}function qh(t,i,e,n){var r;return i.hasOwnProperty(t)?i[t].redundant.length>0?(r=i[t].redundant[0],i[t].redundant.shift()):(r=document.createElement(t),void 0!==n?e.insertBefore(r,n):e.appendChild(r)):(r=document.createElement(t),i[t]={used:[],redundant:[]},void 0!==n?e.insertBefore(r,n):e.appendChild(r)),i[t].used.push(r),r}function Vh(t,i,e,n,r,s){var o;if("circle"==e.style?((o=Uh("circle",n,r)).setAttributeNS(null,"cx",t),o.setAttributeNS(null,"cy",i),o.setAttributeNS(null,"r",.5*e.size)):((o=Uh("rect",n,r)).setAttributeNS(null,"x",t-.5*e.size),o.setAttributeNS(null,"y",i-.5*e.size),o.setAttributeNS(null,"width",e.size),o.setAttributeNS(null,"height",e.size)),void 0!==e.styles&&o.setAttributeNS(null,"style",e.styles),o.setAttributeNS(null,"class",e.className+" vis-point"),s){var a=Uh("text",n,r);s.xOffset&&(t+=s.xOffset),s.yOffset&&(i+=s.yOffset),s.content&&(a.textContent=s.content),s.className&&a.setAttributeNS(null,"class",s.className+" vis-label"),a.setAttributeNS(null,"x",t),a.setAttributeNS(null,"y",i)}return o}function Xh(t,i,e,n,r,s,o,a){if(0!=n){n<0&&(i-=n*=-1);var h=Uh("rect",s,o);h.setAttributeNS(null,"x",t-.5*e),h.setAttributeNS(null,"y",i),h.setAttributeNS(null,"width",e),h.setAttributeNS(null,"height",n),h.setAttributeNS(null,"class",r),a&&h.setAttributeNS(null,"style",a)}}function Zh(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch(t){return"en"}}var Jh=Object.freeze({__proto__:null,prepareElements:$h,cleanupElements:Gh,resetElements:Wh,getSVGElement:Uh,getDOMElement:qh,drawPoint:Vh,drawBar:Xh,getNavigatorLanguage:Zh}),Kh=Et("Reflect","construct"),Qh=v((function(){function t(){}return!(Kh((function(){}),[],t)instanceof t)})),tu=!v((function(){Kh((function(){}))})),iu=Qh||tu;Mt({target:"Reflect",stat:!0,forced:iu,sham:iu},{construct:function(t,i){kt(t),_(i);var e=arguments.length<3?t:kt(arguments[2]);if(tu&&!Qh)return Kh(t,i,e);if(t==e){switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3])}var n=[null];return n.push.apply(n,i),new(mr.apply(t,n))}var r=e.prototype,s=vi(g(r)?r:Object.prototype),o=Function.apply.call(t,s,i);return g(o)?o:s}});var eu=wt.Reflect.construct,nu=r((function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0})),ru=n(nu),su=Ls;Mt({target:"Object",stat:!0},{setPrototypeOf:Fi});var ou=wt.Object.setPrototypeOf,au=r((function(t){function i(e,n){return t.exports=i=ou||function(t,i){return t.__proto__=i,t},t.exports.default=t.exports,t.exports.__esModule=!0,i(e,n)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0}));n(au);var hu=n(r((function(t){t.exports=function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=su(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&au(t,i)},t.exports.default=t.exports,t.exports.__esModule=!0}))),uu=n(r((function(t){var i=Un.default;t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?nu(t):e},t.exports.default=t.exports,t.exports.__esModule=!0}))),lu=ts,cu=n(r((function(t){function i(e){return t.exports=i=ou?lu:function(t){return t.__proto__||lu(t)},t.exports.default=t.exports,t.exports.__esModule=!0,i(e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0}))),fu=r((function(t){var i=function(t){var i,e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function h(t,i,e){return Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{h({},"")}catch(t){h=function(t,i,e){return t[i]=e}}function u(t,i,e,n){var r=i&&i.prototype instanceof m?i:m,s=Object.create(r.prototype),o=new T(n||[]);return s._invoke=function(t,i,e){var n=c;return function(r,s){if(n===d)throw new Error("Generator is already running");if(n===v){if("throw"===r)throw s;return Y()}for(e.method=r,e.arg=s;;){var o=e.delegate;if(o){var a=M(o,e);if(a){if(a===p)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===c)throw n=v,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=d;var h=l(t,i,e);if("normal"===h.type){if(n=e.done?v:f,h.arg===p)continue;return{value:h.arg,done:e.done}}"throw"===h.type&&(n=v,e.method="throw",e.arg=h.arg)}}}(t,e,o),s}function l(t,i,e){try{return{type:"normal",arg:t.call(i,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c="suspendedStart",f="suspendedYield",d="executing",v="completed",p={};function m(){}function g(){}function y(){}var b={};b[s]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(j([])));k&&k!==e&&n.call(k,s)&&(b=k);var _=y.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(i){h(t,i,(function(t){return this._invoke(i,t)}))}))}function D(t,i){var e;this._invoke=function(r,s){function o(){return new i((function(e,o){!function e(r,s,o,a){var h=l(t[r],t,s);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==typeof c&&n.call(c,"__await")?i.resolve(c.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):i.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,a)}))}a(h.arg)}(r,s,e,o)}))}return e=e?e.then(o,o):o()}}function M(t,e){var n=t.iterator[e.method];if(n===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,M(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var s=r.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,p):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function F(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function j(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=i,e.done=!0,e};return o.next=o}}return{next:Y}}function Y(){return{value:i,done:!0}}return g.prototype=_.constructor=y,y.constructor=g,g.displayName=h(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var i="function"==typeof t&&t.constructor;return!!i&&(i===g||"GeneratorFunction"===(i.displayName||i.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},x(D.prototype),D.prototype[o]=function(){return this},t.AsyncIterator=D,t.async=function(i,e,n,r,s){void 0===s&&(s=Promise);var o=new D(u(i,e,n,r),s);return t.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(_),h(_,a,"Generator"),_[s]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var i=[];for(var e in t)i.push(e);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=i),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var h=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(h&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,i){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=i&&i<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=i,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),p},finish:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),F(e),p}},catch:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var r=n.arg;F(e)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=i),p}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}})),du=function(t){return function(i,e,n,r){kt(e);var s=I(i),o=ut(s),a=Kt(s.length),h=t?a-1:0,u=t?-1:1;if(n<2)for(;;){if(h in o){r=o[h],h+=u;break}if(h+=u,t?h<0:a<=h)throw TypeError("Reduce of empty array with no initial value")}for(;t?h>=0:a>h;h+=u)h in o&&(r=e(r,o[h],h,s));return r}},vu={left:du(!1),right:du(!0)},pu="process"==at(d.process),mu=vu.left,gu=wr("reduce");Mt({target:"Array",proto:!0,forced:!gu||!pu&&Ht>79&&Ht<83},{reduce:function(t){return mu(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var yu=On("Array").reduce,bu=Array.prototype,wu=function(t){var i=t.reduce;return t===bu||t instanceof Array&&i===bu.reduce?yu:i},ku=function(t,i,e,n,r,s,o,a){for(var h,u=r,l=0,c=!!o&&_t(o,a,3);l<n;){if(l in e){if(h=c?c(e[l],l,i):e[l],s>0&&le(h))u=ku(t,i,h,Kt(h.length),u,s-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[u]=h}u++}l++}return u},_u=ku;Mt({target:"Array",proto:!0},{flatMap:function(t){var i,e=I(this),n=Kt(e.length);return kt(t),(i=_e(e,0)).length=_u(i,e,e,n,0,1,t,arguments.length>1?arguments[1]:void 0),i}});var xu=On("Array").flatMap,Du=Array.prototype,Mu=function(t){var i=t.flatMap;return t===Du||t instanceof Array&&i===Du.flatMap?xu:i},Su=Gn,Fu=!v((function(){return Object.isExtensible(Object.preventExtensions({}))})),Tu=r((function(t){var i=M.f,e=$("meta"),n=0,r=Object.isExtensible||function(){return!0},s=function(t){i(t,e,{value:{objectID:"O"+ ++n,weakData:{}}})},o=t.exports={REQUIRED:!1,fastKey:function(t,i){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!H(t,e)){if(!r(t))return"F";if(!i)return"E";s(t)}return t[e].objectID},getWeakData:function(t,i){if(!H(t,e)){if(!r(t))return!0;if(!i)return!1;s(t)}return t[e].weakData},onFreeze:function(t){return Fu&&o.REQUIRED&&r(t)&&!H(t,e)&&s(t),t}};U[e]=!0}));var ju=function(t,i){this.stopped=t,this.result=i},Yu=function(t,i,e){var n,r,s,o,a,h,u,l=e&&e.that,c=!(!e||!e.AS_ENTRIES),f=!(!e||!e.IS_ITERATOR),d=!(!e||!e.INTERRUPTED),v=_t(i,l,1+c+d),p=function(t){return n&&Pi(n),new ju(!0,t)},m=function(t){return c?(_(t),d?v(t[0],t[1],p):v(t[0],t[1])):d?v(t,p):v(t)};if(f)n=t;else{if("function"!=typeof(r=Vi(t)))throw TypeError("Target is not iterable");if(Wi(r)){for(s=0,o=Kt(t.length);o>s;s++)if((a=m(t[s]))&&a instanceof ju)return a;return new ju(!1)}n=r.call(t)}for(h=n.next;!(u=h.call(n)).done;){try{a=m(u.value)}catch(t){throw Pi(n),t}if("object"==typeof a&&a&&a instanceof ju)return a}return new ju(!1)},Eu=function(t,i,e){if(!(t instanceof i))throw TypeError("Incorrect "+(e?e+" ":"")+"invocation");return t},Au=M.f,Cu=Me.forEach,Ou=et.set,Lu=et.getterFor,zu=function(t,i,e){var n,r=-1!==t.indexOf("Map"),s=-1!==t.indexOf("Weak"),o=r?"set":"add",a=d[t],h=a&&a.prototype,u={};if(p&&"function"==typeof a&&(s||h.forEach&&!v((function(){(new a).entries().next()})))){n=i((function(i,e){Ou(Eu(i,n,t),{type:t,collection:new a}),null!=e&&Yu(e,i[o],{that:i,AS_ENTRIES:r})}));var l=Lu(t);Cu(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var i="add"==t||"set"==t;!(t in h)||s&&"clear"==t||F(n.prototype,t,(function(e,n){var r=l(this).collection;if(!i&&s&&!g(e))return"get"==t&&void 0;var o=r[t](0===e?0:e,n);return i?this:o}))})),s||Au(n.prototype,"size",{configurable:!0,get:function(){return l(this).collection.size}})}else n=e.getConstructor(i,t,r,o),Tu.REQUIRED=!0;return xi(n,t,!1,!0),u[t]=n,Mt({global:!0,forced:!0},u),s||e.setStrong(n,t,r),n},Iu=function(t,i,e){for(var n in i)e&&e.unsafe&&t[n]?t[n]=i[n]:Ti(t,n,i[n],e);return t},Nu=Wt("species"),Hu=M.f,Bu=Tu.fastKey,Pu=et.set,Ru=et.getterFor,$u={getConstructor:function(t,i,e,n){var r=t((function(t,s){Eu(t,r,i),Pu(t,{type:i,index:vi(null),first:void 0,last:void 0,size:0}),p||(t.size=0),null!=s&&Yu(s,t[n],{that:t,AS_ENTRIES:e})})),s=Ru(i),o=function(t,i,e){var n,r,o=s(t),h=a(t,i);return h?h.value=e:(o.last=h={index:r=Bu(i,!0),key:i,value:e,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=h),n&&(n.next=h),p?o.size++:t.size++,"F"!==r&&(o.index[r]=h)),t},a=function(t,i){var e,n=s(t),r=Bu(i);if("F"!==r)return n.index[r];for(e=n.first;e;e=e.next)if(e.key==i)return e};return Iu(r.prototype,{clear:function(){for(var t=s(this),i=t.index,e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),delete i[e.index],e=e.next;t.first=t.last=void 0,p?t.size=0:this.size=0},delete:function(t){var i=this,e=s(i),n=a(i,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),p?e.size--:i.size--}return!!n},forEach:function(t){for(var i,e=s(this),n=_t(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.next:e.first;)for(n(i.value,i.key,this);i&&i.removed;)i=i.previous},has:function(t){return!!a(this,t)}}),Iu(r.prototype,e?{get:function(t){var i=a(this,t);return i&&i.value},set:function(t,i){return o(this,0===t?0:t,i)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),p&&Hu(r.prototype,"size",{get:function(){return s(this).size}}),r},setStrong:function(t,i,e){var n=i+" Iterator",r=Ru(i),s=Ru(n);zi(t,i,(function(t,i){Pu(this,{type:n,target:t,state:r(t),kind:i,last:void 0})}),(function(){for(var t=s(this),i=t.kind,e=t.last;e&&e.removed;)e=e.previous;return t.target&&(t.last=e=e?e.next:t.state.first)?"keys"==i?{value:e.key,done:!1}:"values"==i?{value:e.value,done:!1}:{value:[e.key,e.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),e?"entries":"values",!e,!0),function(t){var i=Et(t),e=M.f;p&&i&&!i[Nu]&&e(i,Nu,{configurable:!0,get:function(){return this}})}(i)}};zu("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),$u);var Gu=wt.Map;zu("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),$u);var Wu=wt.Set,Uu=function(t){var i=Vi(t);if("function"!=typeof i)throw TypeError(String(t)+" is not iterable");return _(i.call(t))},qu=Math.floor,Vu=function(t,i){var e=t.length,n=qu(e/2);return e<8?Xu(t,i):Zu(Vu(t.slice(0,n),i),Vu(t.slice(n),i),i)},Xu=function(t,i){for(var e,n,r=t.length,s=1;s<r;){for(n=s,e=t[s];n&&i(t[n-1],e)>0;)t[n]=t[--n];n!==s++&&(t[n]=e)}return t},Zu=function(t,i,e){for(var n=t.length,r=i.length,s=0,o=0,a=[];s<n||o<r;)s<n&&o<r?a.push(e(t[s],i[o])<=0?t[s++]:i[o++]):a.push(s<n?t[s++]:i[o++]);return a},Ju=Vu,Ku=At.match(/firefox\/(\d+)/i),Qu=!!Ku&&+Ku[1],tl=/MSIE|Trident/.test(At),il=At.match(/AppleWebKit\/(\d+)\./),el=!!il&&+il[1],nl=[],rl=nl.sort,sl=v((function(){nl.sort(void 0)})),ol=v((function(){nl.sort(null)})),al=wr("sort"),hl=!v((function(){if(Ht)return Ht<70;if(!(Qu&&Qu>3)){if(tl)return!0;if(el)return el<603;var t,i,e,n,r="";for(t=65;t<76;t++){switch(i=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)nl.push({k:i+n,v:e})}for(nl.sort((function(t,i){return i.v-t.v})),n=0;n<nl.length;n++)i=nl[n].k.charAt(0),r.charAt(r.length-1)!==i&&(r+=i);return"DGBEFHACIJK"!==r}}));Mt({target:"Array",proto:!0,forced:sl||!ol||!al||!hl},{sort:function(t){void 0!==t&&kt(t);var i=I(this);if(hl)return void 0===t?rl.call(i):rl.call(i,t);var e,n,r=[],s=Kt(i.length);for(n=0;n<s;n++)n in i&&r.push(i[n]);for(e=(r=Ju(r,function(t){return function(i,e){return void 0===e?-1:void 0===i?1:void 0!==t?+t(i,e)||0:String(i)>String(e)?1:-1}}(t))).length,n=0;n<e;)i[n]=r[n++];for(;n<s;)delete i[n++];return i}});var ul=On("Array").sort,ll=Array.prototype,cl=function(t){var i=t.sort;return t===ll||t instanceof Array&&i===ll.sort?ul:i},fl=Me.some,dl=wr("some");Mt({target:"Array",proto:!0,forced:!dl},{some:function(t){return fl(this,t,arguments.length>1?arguments[1]:void 0)}});var vl=On("Array").some,pl=Array.prototype,ml=function(t){var i=t.some;return t===pl||t instanceof Array&&i===pl.some?vl:i},gl=On("Array").keys,yl=Array.prototype,bl={DOMTokenList:!0,NodeList:!0},wl=function(t){var i=t.keys;return t===yl||t instanceof Array&&i===yl.keys||bl.hasOwnProperty(bi(t))?gl:i},kl=On("Array").values,_l=Array.prototype,xl={DOMTokenList:!0,NodeList:!0},Dl=function(t){var i=t.values;return t===_l||t instanceof Array&&i===_l.values||xl.hasOwnProperty(bi(t))?kl:i},Ml=On("Array").entries,Sl=Array.prototype,Fl={DOMTokenList:!0,NodeList:!0},Tl=function(t){var i=t.entries;return t===Sl||t instanceof Array&&i===Sl.entries||Fl.hasOwnProperty(bi(t))?Ml:i},jl="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Yl=new Uint8Array(16);function El(){if(!jl)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jl(Yl)}for(var Al=[],Cl=0;Cl<256;++Cl)Al[Cl]=(Cl+256).toString(16).substr(1);function Ol(t,i,e){var n=i&&e||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||El)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var s=0;s<16;++s)i[n+s]=r[s];return i||function(t,i){var e=i||0,n=Al;return[n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]]].join("")}(r)}function Ll(t,i){var e=cr(t);if(nn){var n=nn(t);i&&(n=os(n).call(n,(function(i){return on(t,i).enumerable}))),e.push.apply(e,n)}return e}function zl(t){for(var i=1;i<arguments.length;i++){var e,n=null!=arguments[i]?arguments[i]:{};if(i%2)Sr(e=Ll(Object(n),!0)).call(e,(function(i){pn(t,i,n[i])}));else if(hn)un(t,hn(n));else{var r;Sr(r=Ll(Object(n))).call(r,(function(i){cn(t,i,on(n,i))}))}}return t}function Il(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}function Nl(t,i){var e=void 0!==Kn&&ue(t)||t["@@iterator"];if(!e){if(rr(t)||(e=function(t,i){var e;if(!t)return;if("string"==typeof t)return Hl(t,i);var n=er(e=Object.prototype.toString.call(t)).call(e,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return ie(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hl(t,i)}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw s}}}}function Hl(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function Bl(t){return new Rl(t)}var Pl=function(){function t(i,e,n){var r,s,o;fn(this,t),this._source=i,this._transformers=e,this._target=n,this._listeners={add:br(r=this._add).call(r,this),remove:br(s=this._remove).call(s,this),update:br(o=this._update).call(o,this)}}return vn(t,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var i;return wu(i=this._transformers).call(i,(function(t,i){return i(t)}),t)}},{key:"_add",value:function(t,i){null!=i&&this._target.add(this._transformItems(this._source.get(i.items)))}},{key:"_update",value:function(t,i){null!=i&&this._target.update(this._transformItems(this._source.get(i.items)))}},{key:"_remove",value:function(t,i){null!=i&&this._target.remove(this._transformItems(i.oldData))}}]),t}(),Rl=function(){function t(i){fn(this,t),this._source=i,this._transformers=[]}return vn(t,[{key:"filter",value:function(t){return this._transformers.push((function(i){return os(i).call(i,t)})),this}},{key:"map",value:function(t){return this._transformers.push((function(i){return ur(i).call(i,t)})),this}},{key:"flatMap",value:function(t){return this._transformers.push((function(i){return Mu(i).call(i,t)})),this}},{key:"to",value:function(t){return new Pl(this._source,this._transformers,t)}}]),t}();function $l(t){return"string"==typeof t||"number"==typeof t}var Gl=function(){function t(i){fn(this,t),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(i)}return vn(t,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,i=this._extended.methods,e=0;e<i.length;e++){var n=i[e];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}}},{key:"replace",value:function(t,i){var e=this,n=t[i];if(!n)throw new Error("Method "+i+" undefined");t[i]=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.queue({args:i,fn:n,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=qs((function(){t.flush()}),this.delay))}},{key:"flush",value:function(){var t,i;Sr(t=Hr(i=this._queue).call(i,0)).call(t,(function(t){t.fn.apply(t.context||t.fn,t.args||[])}))}}],[{key:"extend",value:function(i,e){var n=new t(e);if(void 0!==i.flush)throw new Error("Target object already has a property flush");i.flush=function(){n.flush()};var r=[{name:"flush",original:void 0}];if(e&&e.replace)for(var s=0;s<e.replace.length;s++){var o=e.replace[s];r.push({name:o,original:i[o]}),n.replace(i,o)}return n._extended={object:i,methods:r},n}}]),t}(),Wl=function(){function t(){fn(this,t),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=t.prototype.on,this.unsubscribe=t.prototype.off}return vn(t,[{key:"_trigger",value:function(t,i,e){var n,r;if("*"===t)throw new Error("Cannot trigger event *");Sr(n=ir(r=[]).call(r,Jn(this._subscribers[t]),Jn(this._subscribers["*"]))).call(n,(function(n){n(t,i,null!=e?e:null)}))}},{key:"on",value:function(t,i){"function"==typeof i&&this._subscribers[t].push(i)}},{key:"off",value:function(t,i){var e;this._subscribers[t]=os(e=this._subscribers[t]).call(e,(function(t){return t!==i}))}}]),t}(),Ul=function(){function t(i){fn(this,t),this._pairs=i}return vn(t,[{key:Su,value:fu.mark((function t(){var i,e,n,r,s;return fu.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Nl(this._pairs),t.prev=1,i.s();case 3:if((e=i.n()).done){t.next=9;break}return n=$n(e.value,2),r=n[0],s=n[1],t.next=7,[r,s];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),i.e(t.t0);case 14:return t.prev=14,i.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"entries",value:fu.mark((function t(){var i,e,n,r,s;return fu.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Nl(this._pairs),t.prev=1,i.s();case 3:if((e=i.n()).done){t.next=9;break}return n=$n(e.value,2),r=n[0],s=n[1],t.next=7,[r,s];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),i.e(t.t0);case 14:return t.prev=14,i.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"keys",value:fu.mark((function t(){var i,e,n,r;return fu.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Nl(this._pairs),t.prev=1,i.s();case 3:if((e=i.n()).done){t.next=9;break}return n=$n(e.value,1),r=n[0],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),i.e(t.t0);case 14:return t.prev=14,i.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"values",value:fu.mark((function t(){var i,e,n,r;return fu.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Nl(this._pairs),t.prev=1,i.s();case 3:if((e=i.n()).done){t.next=9;break}return n=$n(e.value,2),r=n[1],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),i.e(t.t0);case 14:return t.prev=14,i.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var t;return ur(t=Jn(this._pairs)).call(t,(function(t){return t[0]}))}},{key:"toItemArray",value:function(){var t;return ur(t=Jn(this._pairs)).call(t,(function(t){return t[1]}))}},{key:"toEntryArray",value:function(){return Jn(this._pairs)}},{key:"toObjectMap",value:function(){var t,i=zs(null),e=Nl(this._pairs);try{for(e.s();!(t=e.n()).done;){var n=$n(t.value,2),r=n[0],s=n[1];i[r]=s}}catch(t){e.e(t)}finally{e.f()}return i}},{key:"toMap",value:function(){return new Gu(this._pairs)}},{key:"toIdSet",value:function(){return new Wu(this.toIdArray())}},{key:"toItemSet",value:function(){return new Wu(this.toItemArray())}},{key:"cache",value:function(){return new t(Jn(this._pairs))}},{key:"distinct",value:function(t){var i,e=new Wu,n=Nl(this._pairs);try{for(n.s();!(i=n.n()).done;){var r=$n(i.value,2),s=r[0],o=r[1];e.add(t(o,s))}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"filter",value:function(i){var e=this._pairs;return new t(pn({},Su,fu.mark((function t(){var n,r,s,o,a;return fu.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Nl(e),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=10;break}if(s=$n(r.value,2),o=s[0],a=s[1],!i(a,o)){t.next=8;break}return t.next=8,[o,a];case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])}))))}},{key:"forEach",value:function(t){var i,e=Nl(this._pairs);try{for(e.s();!(i=e.n()).done;){var n=$n(i.value,2),r=n[0];t(n[1],r)}}catch(t){e.e(t)}finally{e.f()}}},{key:"map",value:function(i){var e=this._pairs;return new t(pn({},Su,fu.mark((function t(){var n,r,s,o,a;return fu.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Nl(e),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return s=$n(r.value,2),o=s[0],a=s[1],t.next=7,[o,i(a,o)];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))))}},{key:"max",value:function(t){var i=Uu(this._pairs),e=i.next();if(e.done)return null;for(var n=e.value[1],r=t(e.value[1],e.value[0]);!(e=i.next()).done;){var s=$n(e.value,2),o=s[0],a=s[1],h=t(a,o);h>r&&(r=h,n=a)}return n}},{key:"min",value:function(t){var i=Uu(this._pairs),e=i.next();if(e.done)return null;for(var n=e.value[1],r=t(e.value[1],e.value[0]);!(e=i.next()).done;){var s=$n(e.value,2),o=s[0],a=s[1],h=t(a,o);h<r&&(r=h,n=a)}return n}},{key:"reduce",value:function(t,i){var e,n=Nl(this._pairs);try{for(n.s();!(e=n.n()).done;){var r=$n(e.value,2),s=r[0];i=t(i,r[1],s)}}catch(t){n.e(t)}finally{n.f()}return i}},{key:"sort",value:function(i){var e=this;return new t(pn({},Su,(function(){var t;return Uu(cl(t=Jn(e._pairs)).call(t,(function(t,e){var n=$n(t,2),r=n[0],s=n[1],o=$n(e,2),a=o[0],h=o[1];return i(s,h,r,a)})))})))}}]),t}();var ql=function(t){hu(e,t);var i=Il(e);function e(t,n){var r;return fn(this,e),(r=i.call(this))._queue=null,t&&!rr(t)&&(n=t,t=[]),r._options=n||{},r._data=new Gu,r.length=0,r._idProp=r._options.fieldId||"id",t&&t.length&&r.add(t),r.setOptions(n),r}return vn(e,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=Gl.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===qn(t.queue)&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,i){var e,n=this,r=[];if(rr(t)){var s=ur(t).call(t,(function(t){return t[n._idProp]}));if(ml(s).call(s,(function(t){return n._data.has(t)})))throw new Error("A duplicate id was found in the parameter array.");for(var o=0,a=t.length;o<a;o++)e=this._addItem(t[o]),r.push(e)}else{if(!t||"object"!==qn(t))throw new Error("Unknown dataType");e=this._addItem(t),r.push(e)}return r.length&&this._trigger("add",{items:r},i),r}},{key:"update",value:function(t,i){var e=this,n=[],r=[],s=[],o=[],a=this._idProp,h=function(t){var i=t[a];if(null!=i&&e._data.has(i)){var h=t,u=$r({},e._data.get(i)),l=e._updateItem(h);r.push(l),o.push(h),s.push(u)}else{var c=e._addItem(t);n.push(c)}};if(rr(t))for(var u=0,l=t.length;u<l;u++)t[u]&&"object"===qn(t[u])?h(t[u]):console.warn("Ignoring input item, which is not an object at index "+u);else{if(!t||"object"!==qn(t))throw new Error("Unknown dataType");h(t)}if(n.length&&this._trigger("add",{items:n},i),r.length){var c={items:r,oldData:s,data:o};this._trigger("update",c,i)}return ir(n).call(n,r)}},{key:"updateOnly",value:function(t,i){var e,n=this;rr(t)||(t=[t]);var r=ur(e=ur(t).call(t,(function(t){var i=n._data.get(t[n._idProp]);if(null==i)throw new Error("Updating non-existent items is not allowed.");return{oldData:i,update:t}}))).call(e,(function(t){var i=t.oldData,e=t.update,r=i[n._idProp],s=Ua(i,e);return n._data.set(r,s),{id:r,oldData:i,updatedData:s}}));if(r.length){var s={items:ur(r).call(r,(function(t){return t.id})),oldData:ur(r).call(r,(function(t){return t.oldData})),data:ur(r).call(r,(function(t){return t.updatedData}))};return this._trigger("update",s,i),s.items}return[]}},{key:"get",value:function(t,i){var e=void 0,n=void 0,r=void 0;$l(t)?(e=t,r=i):rr(t)?(n=t,r=i):r=t;var s,o=r&&"Object"===r.returnType?"Object":"Array",a=r&&os(r),h=[],u=void 0,l=void 0,c=void 0;if(null!=e)(u=this._data.get(e))&&a&&!a(u)&&(u=void 0);else if(null!=n)for(var f=0,d=n.length;f<d;f++)null==(u=this._data.get(n[f]))||a&&!a(u)||h.push(u);else for(var v,p=0,m=(l=Jn(wl(v=this._data).call(v))).length;p<m;p++)c=l[p],null==(u=this._data.get(c))||a&&!a(u)||h.push(u);if(r&&r.order&&null==e&&this._sort(h,r.order),r&&r.fields){var g=r.fields;if(null!=e&&null!=u)u=this._filterFields(u,g);else for(var y=0,b=h.length;y<b;y++)h[y]=this._filterFields(h[y],g)}if("Object"==o){for(var w={},k=0,_=h.length;k<_;k++){var x=h[k];w[x[this._idProp]]=x}return w}return null!=e?null!==(s=u)&&void 0!==s?s:null:h}},{key:"getIds",value:function(t){var i=this._data,e=t&&os(t),n=t&&t.order,r=Jn(wl(i).call(i)),s=[];if(e)if(n){for(var o=[],a=0,h=r.length;a<h;a++){var u=r[a],l=this._data.get(u);null!=l&&e(l)&&o.push(l)}this._sort(o,n);for(var c=0,f=o.length;c<f;c++)s.push(o[c][this._idProp])}else for(var d=0,v=r.length;d<v;d++){var p=r[d],m=this._data.get(p);null!=m&&e(m)&&s.push(m[this._idProp])}else if(n){for(var g=[],y=0,b=r.length;y<b;y++){var w=r[y];g.push(i.get(w))}this._sort(g,n);for(var k=0,_=g.length;k<_;k++)s.push(g[k][this._idProp])}else for(var x=0,D=r.length;x<D;x++){var M=r[x],S=i.get(M);null!=S&&s.push(S[this._idProp])}return s}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,i){var e=i&&os(i),n=this._data,r=Jn(wl(n).call(n));if(i&&i.order)for(var s=this.get(i),o=0,a=s.length;o<a;o++){var h=s[o];t(h,h[this._idProp])}else for(var u=0,l=r.length;u<l;u++){var c=r[u],f=this._data.get(c);null==f||e&&!e(f)||t(f,c)}}},{key:"map",value:function(t,i){for(var e=i&&os(i),n=[],r=this._data,s=Jn(wl(r).call(r)),o=0,a=s.length;o<a;o++){var h=s[o],u=this._data.get(h);null==u||e&&!e(u)||n.push(t(u,h))}return i&&i.order&&this._sort(n,i.order),n}},{key:"_filterFields",value:function(t,i){var e;return t?wu(e=rr(i)?i:cr(i)).call(e,(function(i,e){return i[e]=t[e],i}),{}):t}},{key:"_sort",value:function(t,i){if("string"==typeof i){var e=i;cl(t).call(t,(function(t,i){var n=t[e],r=i[e];return n>r?1:n<r?-1:0}))}else{if("function"!=typeof i)throw new TypeError("Order must be a function or a string");cl(t).call(t,i)}}},{key:"remove",value:function(t,i){for(var e=[],n=[],r=rr(t)?t:[t],s=0,o=r.length;s<o;s++){var a=this._remove(r[s]);if(a){var h=a[this._idProp];null!=h&&(e.push(h),n.push(a))}}return e.length&&this._trigger("remove",{items:e,oldData:n},i),e}},{key:"_remove",value:function(t){var i;if($l(t)?i=t:t&&"object"===qn(t)&&(i=t[this._idProp]),null!=i&&this._data.has(i)){var e=this._data.get(i)||null;return this._data.delete(i),--this.length,e}return null}},{key:"clear",value:function(t){for(var i,e=Jn(wl(i=this._data).call(i)),n=[],r=0,s=e.length;r<s;r++)n.push(this._data.get(e[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:e,oldData:n},t),e}},{key:"max",value:function(t){var i,e,n=null,r=null,s=Nl(Dl(i=this._data).call(i));try{for(s.s();!(e=s.n()).done;){var o=e.value,a=o[t];"number"==typeof a&&(null==r||a>r)&&(n=o,r=a)}}catch(t){s.e(t)}finally{s.f()}return n||null}},{key:"min",value:function(t){var i,e,n=null,r=null,s=Nl(Dl(i=this._data).call(i));try{for(s.s();!(e=s.n()).done;){var o=e.value,a=o[t];"number"==typeof a&&(null==r||a<r)&&(n=o,r=a)}}catch(t){s.e(t)}finally{s.f()}return n||null}},{key:"distinct",value:function(t){for(var i=this._data,e=Jn(wl(i).call(i)),n=[],r=0,s=0,o=e.length;s<o;s++){for(var a=e[s],h=i.get(a)[t],u=!1,l=0;l<r;l++)if(n[l]==h){u=!0;break}u||void 0===h||(n[r]=h,r++)}return n}},{key:"_addItem",value:function(t){var i=function(t,i){return null==t[i]&&(t[i]=Ol()),t}(t,this._idProp),e=i[this._idProp];if(this._data.has(e))throw new Error("Cannot add item: item with id "+e+" already exists");return this._data.set(e,i),++this.length,e}},{key:"_updateItem",value:function(t){var i=t[this._idProp];if(null==i)throw new Error("Cannot update item: item has no id (item: "+$s(t)+")");var e=this._data.get(i);if(!e)throw new Error("Cannot update item: no item with id "+i+" found");return this._data.set(i,zl(zl({},e),t)),i}},{key:"stream",value:function(t){if(t){var i=this._data;return new Ul(pn({},Su,fu.mark((function e(){var n,r,s,o;return fu.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Nl(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(s=r.value,null==(o=i.get(s))){e.next=9;break}return e.next=9,[s,o];case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])}))))}var e;return new Ul(pn({},Su,br(e=Tl(this._data)).call(e,this._data)))}}]),e}(Wl),Vl=function(t){hu(e,t);var i=Il(e);function e(t,n){var r,s;return fn(this,e),(s=i.call(this)).length=0,s._ids=new Wu,s._options=n||{},s._listener=br(r=s._onEvent).call(r,ru(s)),s.setData(t),s}return vn(e,[{key:"idProp",get:function(){return this.getDataSet().idProp}},{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this._listener);var i=this._data.getIds({filter:os(this._options)}),e=this._data.get(i);this._ids.clear(),this.length=0,this._trigger("remove",{items:i,oldData:e})}if(null!=t){this._data=t;for(var n=this._data.getIds({filter:os(this._options)}),r=0,s=n.length;r<s;r++){var o=n[r];this._ids.add(o)}this.length=n.length,this._trigger("add",{items:n})}else this._data=new ql;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var t=this._data.getIds({filter:os(this._options)}),i=Jn(this._ids),e={},n=[],r=[],s=[],o=0,a=t.length;o<a;o++){var h=t[o];e[h]=!0,this._ids.has(h)||(n.push(h),this._ids.add(h))}for(var u=0,l=i.length;u<l;u++){var c=i[u],f=this._data.get(c);null==f?console.error("If you see this, report it please."):e[c]||(r.push(c),s.push(f),this._ids.delete(c))}this.length+=n.length-r.length,n.length&&this._trigger("add",{items:n}),r.length&&this._trigger("remove",{items:r,oldData:s})}},{key:"get",value:function(t,i){if(null==this._data)return null;var e,n=null;$l(t)||rr(t)?(n=t,e=i):e=t;var r=$r({},this._options,e),s=os(this._options),o=e&&os(e);return s&&o&&(r.filter=function(t){return s(t)&&o(t)}),null==n?this._data.get(r):this._data.get(n,r)}},{key:"getIds",value:function(t){if(this._data.length){var i,e=os(this._options),n=null!=t?os(t):null;return i=n?e?function(t){return e(t)&&n(t)}:n:e,this._data.getIds({filter:i,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,i){if(this._data){var e,n,r=os(this._options),s=i&&os(i);n=s?r?function(t){return r(t)&&s(t)}:s:r,Sr(e=this._data).call(e,t,{filter:n,order:i&&i.order})}}},{key:"map",value:function(t,i){if(this._data){var e,n,r=os(this._options),s=i&&os(i);return n=s?r?function(t){return r(t)&&s(t)}:s:r,ur(e=this._data).call(e,t,{filter:n,order:i&&i.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(t){var i;return this._data.stream(t||pn({},Su,br(i=wl(this._ids)).call(i,this._ids)))}},{key:"dispose",value:function(){var t;null!==(t=this._data)&&void 0!==t&&t.off&&this._data.off("*",this._listener);var i,n="This data view has already been disposed of.",r={get:function(){throw new Error(n)},set:function(){throw new Error(n)},configurable:!1},s=Nl(nr(e.prototype));try{for(s.s();!(i=s.n()).done;){var o=i.value;cn(this,o,r)}}catch(t){s.e(t)}finally{s.f()}}},{key:"_onEvent",value:function(t,i,e){if(i&&i.items&&this._data){var n=i.items,r=[],s=[],o=[],a=[],h=[],u=[];switch(t){case"add":for(var l=0,c=n.length;l<c;l++){var f=n[l];this.get(f)&&(this._ids.add(f),r.push(f))}break;case"update":for(var d=0,v=n.length;d<v;d++){var p=n[d];this.get(p)?this._ids.has(p)?(s.push(p),h.push(i.data[d]),a.push(i.oldData[d])):(this._ids.add(p),r.push(p)):this._ids.has(p)&&(this._ids.delete(p),o.push(p),u.push(i.oldData[d]))}break;case"remove":for(var m=0,g=n.length;m<g;m++){var y=n[m];this._ids.has(y)&&(this._ids.delete(y),o.push(y),u.push(i.oldData[m]))}}this.length+=r.length-o.length,r.length&&this._trigger("add",{items:r},e),s.length&&this._trigger("update",{items:s,oldData:a,data:h},e),o.length&&this._trigger("remove",{items:o,oldData:u},e)}}}]),e}(Wl);function Xl(t,i){return"object"===qn(i)&&null!==i&&t===i.idProp&&"function"==typeof Sr(i)&&"function"==typeof i.get&&"function"==typeof i.getDataSet&&"function"==typeof i.getIds&&"number"==typeof i.length&&"function"==typeof ur(i)&&"function"==typeof i.off&&"function"==typeof i.on&&"function"==typeof i.stream&&function(t,i){return"object"===qn(i)&&null!==i&&t===i.idProp&&"function"==typeof i.add&&"function"==typeof i.clear&&"function"==typeof i.distinct&&"function"==typeof Sr(i)&&"function"==typeof i.get&&"function"==typeof i.getDataSet&&"function"==typeof i.getIds&&"number"==typeof i.length&&"function"==typeof ur(i)&&"function"==typeof i.max&&"function"==typeof i.min&&"function"==typeof i.off&&"function"==typeof i.on&&"function"==typeof i.remove&&"function"==typeof i.setOptions&&"function"==typeof i.stream&&"function"==typeof i.update&&"function"==typeof i.updateOnly}(t,i.getDataSet())}var Zl="undefined"!=typeof window&&window.moment||s;function Jl(){var t={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return t}var Kl=/javascript\s*\:/gim;var Ql={whiteList:Jl(),getDefaultWhiteList:Jl,onAttr:function(t,i,e){},onIgnoreAttr:function(t,i,e){},safeAttrValue:function(t,i){return Kl.test(i)?"":i}},tc=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},ic=function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")};var ec=function(t,i){";"!==(t=ic(t))[t.length-1]&&(t+=";");var e=t.length,n=!1,r=0,s=0,o="";function a(){if(!n){var e=tc(t.slice(r,s)),a=e.indexOf(":");if(-1!==a){var h=tc(e.slice(0,a)),u=tc(e.slice(a+1));if(h){var l=i(r,o.length,h,u,e);l&&(o+=l+"; ")}}}r=s+1}for(;s<e;s++){var h=t[s];if("/"===h&&"*"===t[s+1]){var u=t.indexOf("*/",s+2);if(-1===u)break;r=(s=u+1)+1,n=!1}else"("===h?n=!0:")"===h?n=!1:";"===h?n||a():"\n"===h&&a()}return tc(o)};function nc(t){return null==t}function rc(t){(t=function(t){var i={};for(var e in t)i[e]=t[e];return i}(t||{})).whiteList=t.whiteList||Ql.whiteList,t.onAttr=t.onAttr||Ql.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Ql.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Ql.safeAttrValue,this.options=t}rc.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var i=this.options,e=i.whiteList,n=i.onAttr,r=i.onIgnoreAttr,s=i.safeAttrValue;return ec(t,(function(t,i,o,a,h){var u=e[o],l=!1;if(!0===u?l=u:"function"==typeof u?l=u(a):u instanceof RegExp&&(l=u.test(a)),!0!==l&&(l=!1),a=s(o,a)){var c,f={position:i,sourcePosition:t,source:h,isWhite:l};return l?nc(c=n(o,a,f))?o+":"+a:c:nc(c=r(o,a,f))?void 0:c}}))};var sc=rc,oc=r((function(t,i){for(var e in(i=t.exports=function(t,i){return new sc(i).process(t)}).FilterCSS=sc,Ql)i[e]=Ql[e];"undefined"!=typeof window&&(window.filterCSS=t.exports)}));var ac=function(t,i){var e,n;if(Array.prototype.indexOf)return t.indexOf(i);for(e=0,n=t.length;e<n;e++)if(t[e]===i)return e;return-1},hc=function(t,i,e){var n,r;if(Array.prototype.forEach)return t.forEach(i,e);for(n=0,r=t.length;n<r;n++)i.call(e,t[n],n,t)},uc=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},lc=function(t){var i=/\s|\n|\t/.exec(t);return i?i.index:-1},cc=oc.FilterCSS,fc=oc.getDefaultWhiteList;function dc(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var vc=new cc;function pc(t){return t.replace(mc,"&lt;").replace(gc,"&gt;")}var mc=/</g,gc=/>/g,yc=/"/g,bc=/&quot;/g,wc=/&#([a-zA-Z0-9]*);?/gim,kc=/&colon;?/gim,_c=/&newline;?/gim,xc=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,Dc=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Mc=/u\s*r\s*l\s*\(.*/gi;function Sc(t){return t.replace(yc,"&quot;")}function Fc(t){return t.replace(bc,'"')}function Tc(t){return t.replace(wc,(function(t,i){return"x"===i[0]||"X"===i[0]?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))}))}function jc(t){return t.replace(kc,":").replace(_c," ")}function Yc(t){for(var i="",e=0,n=t.length;e<n;e++)i+=t.charCodeAt(e)<32?" ":t.charAt(e);return uc(i)}function Ec(t){return t=Yc(t=jc(t=Tc(t=Fc(t))))}function Ac(t){return t=pc(t=Sc(t))}var Cc=/<!--[\s\S]*?-->/g;var Oc={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},getDefaultWhiteList:dc,onTag:function(t,i,e){},onIgnoreTag:function(t,i,e){},onTagAttr:function(t,i,e){},onIgnoreTagAttr:function(t,i,e){},safeAttrValue:function(t,i,e,n){if(e=Ec(e),"href"===i||"src"===i){if("#"===(e=uc(e)))return"#";if("http://"!==e.substr(0,7)&&"https://"!==e.substr(0,8)&&"mailto:"!==e.substr(0,7)&&"tel:"!==e.substr(0,4)&&"data:image/"!==e.substr(0,11)&&"ftp://"!==e.substr(0,6)&&"./"!==e.substr(0,2)&&"../"!==e.substr(0,3)&&"#"!==e[0]&&"/"!==e[0])return""}else if("background"===i){if(xc.lastIndex=0,xc.test(e))return""}else if("style"===i){if(Dc.lastIndex=0,Dc.test(e))return"";if(Mc.lastIndex=0,Mc.test(e)&&(xc.lastIndex=0,xc.test(e)))return"";!1!==n&&(e=(n=n||vc).process(e))}return e=Ac(e)},escapeHtml:pc,escapeQuote:Sc,unescapeQuote:Fc,escapeHtmlEntities:Tc,escapeDangerHtml5Entities:jc,clearNonPrintableCharacter:Yc,friendlyAttrValue:Ec,escapeAttrValue:Ac,onIgnoreTagStripAll:function(){return""},StripTagBody:function(t,i){"function"!=typeof i&&(i=function(){});var e=!Array.isArray(t),n=[],r=!1;return{onIgnoreTag:function(s,o,a){if(function(i){return!!e||-1!==ac(t,i)}(s)){if(a.isClosing){var h="[/removed]",u=a.position+h.length;return n.push([!1!==r?r:a.position,u]),r=!1,h}return r||(r=a.position),"[removed]"}return i(s,o,a)},remove:function(t){var i="",e=0;return hc(n,(function(n){i+=t.slice(e,n[0]),e=n[1]})),i+=t.slice(e)}}},stripCommentTag:function(t){return t.replace(Cc,"")},stripBlankChar:function(t){var i=t.split("");return(i=i.filter((function(t){var i=t.charCodeAt(0);return 127!==i&&(!(i<=31)||(10===i||13===i))}))).join("")},cssFilter:vc,getDefaultCSSWhiteList:fc};function Lc(t){var i=lc(t);if(-1===i)var e=t.slice(1,-1);else e=t.slice(1,i+1);return"/"===(e=uc(e).toLowerCase()).slice(0,1)&&(e=e.slice(1)),"/"===e.slice(-1)&&(e=e.slice(0,-1)),e}function zc(t){return"</"===t.slice(0,2)}var Ic=/[^a-zA-Z0-9_:\.\-]/gim;function Nc(t,i){for(;i<t.length;i++){var e=t[i];if(" "!==e)return"="===e?i:-1}}function Hc(t,i){for(;i>0;i--){var e=t[i];if(" "!==e)return"="===e?i:-1}}function Bc(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}var Pc={parseTag:function(t,i,e){var n="",r=0,s=!1,o=!1,a=0,h=t.length,u="",l="";t:for(a=0;a<h;a++){var c=t.charAt(a);if(!1===s){if("<"===c){s=a;continue}}else if(!1===o){if("<"===c){n+=e(t.slice(r,a)),s=a,r=a;continue}if(">"===c){n+=e(t.slice(r,s)),u=Lc(l=t.slice(s,a+1)),n+=i(s,n.length,u,l,zc(l)),r=a+1,s=!1;continue}if('"'===c||"'"===c)for(var f=1,d=t.charAt(a-f);""===d.trim()||"="===d;){if("="===d){o=c;continue t}d=t.charAt(a-++f)}}else if(c===o){o=!1;continue}}return r<t.length&&(n+=e(t.substr(r))),n},parseAttr:function(t,i){var e=0,n=[],r=!1,s=t.length;function o(t,e){if(!((t=(t=uc(t)).replace(Ic,"").toLowerCase()).length<1)){var r=i(t,e||"");r&&n.push(r)}}for(var a=0;a<s;a++){var h,u=t.charAt(a);if(!1!==r||"="!==u)if(!1===r||a!==e||'"'!==u&&"'"!==u||"="!==t.charAt(a-1))if(/\s|\n|\t/.test(u)){if(t=t.replace(/\s|\n|\t/g," "),!1===r){if(-1===(h=Nc(t,a))){o(uc(t.slice(e,a))),r=!1,e=a+1;continue}a=h-1;continue}if(-1===(h=Hc(t,a-1))){o(r,Bc(uc(t.slice(e,a)))),r=!1,e=a+1;continue}}else;else{if(-1===(h=t.indexOf(u,a+1)))break;o(r,uc(t.slice(e+1,h))),r=!1,e=(a=h)+1}else r=t.slice(e,a),e=a+1}return e<t.length&&(!1===r?o(t.slice(e)):o(r,Bc(uc(t.slice(e))))),uc(n.join(" "))}},Rc=oc.FilterCSS,$c=Pc.parseTag,Gc=Pc.parseAttr;function Wc(t){return null==t}function Uc(t){(t=function(t){var i={};for(var e in t)i[e]=t[e];return i}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Oc.onIgnoreTagStripAll),t.whiteList=t.whiteList||Oc.whiteList,t.onTag=t.onTag||Oc.onTag,t.onTagAttr=t.onTagAttr||Oc.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Oc.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Oc.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Oc.safeAttrValue,t.escapeHtml=t.escapeHtml||Oc.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new Rc(t.css))}Uc.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var i=this.options,e=i.whiteList,n=i.onTag,r=i.onIgnoreTag,s=i.onTagAttr,o=i.onIgnoreTagAttr,a=i.safeAttrValue,h=i.escapeHtml,u=this.cssFilter;i.stripBlankChar&&(t=Oc.stripBlankChar(t)),i.allowCommentTag||(t=Oc.stripCommentTag(t));var l=!1;if(i.stripIgnoreTagBody){l=Oc.StripTagBody(i.stripIgnoreTagBody,r);r=l.onIgnoreTag}var c=$c(t,(function(t,i,l,c,f){var d,v={sourcePosition:t,position:i,isClosing:f,isWhite:e.hasOwnProperty(l)};if(!Wc(d=n(l,c,v)))return d;if(v.isWhite){if(v.isClosing)return"</"+l+">";var p=function(t){var i=lc(t);if(-1===i)return{html:"",closing:"/"===t[t.length-2]};var e="/"===(t=uc(t.slice(i+1,-1)))[t.length-1];return e&&(t=uc(t.slice(0,-1))),{html:t,closing:e}}(c),m=e[l],g=Gc(p.html,(function(t,i){var e,n=-1!==ac(m,t);return Wc(e=s(l,t,i,n))?n?(i=a(l,t,i,u))?t+'="'+i+'"':t:Wc(e=o(l,t,i,n))?void 0:e:e}));c="<"+l;return g&&(c+=" "+g),p.closing&&(c+=" /"),c+=">"}return Wc(d=r(l,c,v))?h(c):d}),h);return l&&(c=l.remove(c)),c};var qc=Uc,Vc=r((function(t,i){function e(t,i){return new qc(i).process(t)}for(var n in(i=t.exports=e).filterXSS=e,i.FilterXSS=qc,Oc)i[n]=Oc[n];for(var n in Pc)i[n]=Pc[n];"undefined"!=typeof window&&(window.filterXSS=t.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=t.exports)}));function Xc(t,i){var e=cr(t);if(nn){var n=nn(t);i&&(n=os(n).call(n,(function(i){return on(t,i).enumerable}))),e.push.apply(e,n)}return e}function Zc(t){for(var i=1;i<arguments.length;i++){var e,n=null!=arguments[i]?arguments[i]:{};if(i%2)Sr(e=Xc(Object(n),!0)).call(e,(function(i){pn(t,i,n[i])}));else if(hn)un(t,hn(n));else{var r;Sr(r=Xc(Object(n))).call(r,(function(i){cn(t,i,on(n,i))}))}}return t}var Jc=/^\/?Date\((-?\d+)/i,Kc=/^\d+$/;function Qc(t,i){var e;if(void 0!==t){if(null===t)return null;if(!i)return t;if("string"!=typeof i&&!(i instanceof String))throw new Error("Type must be a string");switch(i){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return ah(t)&&!isNaN(Date.parse(t))?s(t).valueOf():Number(t.valueOf());case"string":case"String":return String(t);case"Date":try{return Qc(t,"Moment").toDate()}catch(e){throw e instanceof TypeError?new TypeError("Cannot convert object of type "+fh(t)+" to type "+i):e}case"Moment":if(oh(t))return s(t);if(t instanceof Date)return s(t.valueOf());if(s.isMoment(t))return s(t);if(ah(t))return(e=Jc.exec(t))?s(Number(e[1])):(e=Kc.exec(t),s(e?Number(t):t));throw new TypeError("Cannot convert object of type "+fh(t)+" to type "+i);case"ISODate":if(oh(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(s.isMoment(t))return t.toDate().toISOString();if(ah(t))return(e=Jc.exec(t))?new Date(Number(e[1])).toISOString():s(t).format();throw new Error("Cannot convert object of type "+fh(t)+" to type ISODate");case"ASPDate":if(oh(t))return"/Date("+t+")/";if(t instanceof Date||s.isMoment(t))return"/Date("+t.valueOf()+")/";if(ah(t))return"/Date("+((e=Jc.exec(t))?new Date(Number(e[1])).valueOf():new Date(t).valueOf())+")/";throw new Error("Cannot convert object of type "+fh(t)+" to type ASPDate");default:throw new Error("Unknown type ".concat(i))}}}function tf(t){var i,e,n,r,s,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{start:"Date",end:"Date"},h=t._idProp,u=new ql({fieldId:h}),l=ur(i=Bl(t)).call(i,(function(t){var i;return wu(i=cr(t)).call(i,(function(i,e){return i[e]=Qc(t[e],a[e]),i}),{})})).to(u);return l.all().start(),{add:function(){var i;return(i=t.getDataSet()).add.apply(i,arguments)},remove:function(){var i;return(i=t.getDataSet()).remove.apply(i,arguments)},update:function(){var i;return(i=t.getDataSet()).update.apply(i,arguments)},updateOnly:function(){var i;return(i=t.getDataSet()).updateOnly.apply(i,arguments)},clear:function(){var i;return(i=t.getDataSet()).clear.apply(i,arguments)},forEach:br(e=Sr(u)).call(e,u),get:br(n=u.get).call(n,u),getIds:br(r=u.getIds).call(r,u),off:br(s=u.off).call(s,u),on:br(o=u.on).call(o,u),get length(){return u.length},idProp:h,type:a,rawDS:t,coercedDS:u,dispose:function(){return l.stop()}}}var ef=function(t){var i=new Vc.FilterXSS(t);return function(t){return i.process(t)}},nf=function(t){return t},rf=ef(),sf=Zc(Zc({},Rh),{},{convert:Qc,setupXSSProtection:function(t){t&&(!0===t.disabled?(rf=nf,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):t.filterOptions&&(rf=ef(t.filterOptions)))}});cn(sf,"xss",{get:function(){return rf}});var of=ms.trim,af=d.parseFloat,hf=1/af(cs+"-0")!=-1/0?function(t){var i=of(String(t)),e=af(i);return 0===e&&"-"==i.charAt(0)?-0:e}:af;Mt({global:!0,forced:parseFloat!=hf},{parseFloat:hf});var uf=wt.parseFloat,lf=function(){function t(i,e){fn(this,t),this.options=null,this.props=null}return vn(t,[{key:"setOptions",value:function(t){t&&sf.extend(this.options,t)}},{key:"redraw",value:function(){return!1}},{key:"destroy",value:function(){}},{key:"_isResized",value:function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t}}]),t}();Mt({target:"String",proto:!0},{repeat:function(t){var i=String(u(this)),e="",n=h(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(i+=i))1&n&&(e+=i);return e}});var cf=On("String").repeat,ff=String.prototype,df=function(t){var i=t.repeat;return"string"==typeof t||t===ff||t instanceof String&&i===ff.repeat?cf:i};function vf(t,i,e){if(e&&!rr(e))return vf(t,i,[e]);if(i.hiddenDates=[],e&&1==rr(e)){for(var n,r=0;r<e.length;r++)if(void 0===df(e[r])){var s={};s.start=t(e[r].start).toDate().valueOf(),s.end=t(e[r].end).toDate().valueOf(),i.hiddenDates.push(s)}cl(n=i.hiddenDates).call(n,(function(t,i){return t.start-i.start}))}}function pf(t,i,e){if(e&&!rr(e))return pf(t,i,[e]);if(e&&void 0!==i.domProps.centerContainer.width){vf(t,i,e);for(var n=t(i.range.start),r=t(i.range.end),s=(i.range.end-i.range.start)/i.domProps.centerContainer.width,o=0;o<e.length;o++)if(void 0!==df(e[o])){var a=t(e[o].start),h=t(e[o].end);if("Invalid Date"==a._d)throw new Error("Supplied start date is not valid: ".concat(e[o].start));if("Invalid Date"==h._d)throw new Error("Supplied end date is not valid: ".concat(e[o].end));if(h-a>=4*s){var u=0,l=r.clone();switch(df(e[o])){case"daily":a.day()!=h.day()&&(u=1),a.dayOfYear(n.dayOfYear()),a.year(n.year()),a.subtract(7,"days"),h.dayOfYear(n.dayOfYear()),h.year(n.year()),h.subtract(7-u,"days"),l.add(1,"weeks");break;case"weekly":var c=h.diff(a,"days"),f=a.day();a.date(n.date()),a.month(n.month()),a.year(n.year()),h=a.clone(),a.day(f),h.day(f),h.add(c,"days"),a.subtract(1,"weeks"),h.subtract(1,"weeks"),l.add(1,"weeks");break;case"monthly":a.month()!=h.month()&&(u=1),a.month(n.month()),a.year(n.year()),a.subtract(1,"months"),h.month(n.month()),h.year(n.year()),h.subtract(1,"months"),h.add(u,"months"),l.add(1,"months");break;case"yearly":a.year()!=h.year()&&(u=1),a.year(n.year()),a.subtract(1,"years"),h.year(n.year()),h.subtract(1,"years"),h.add(u,"years"),l.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",df(e[o]))}for(;a<l;)switch(i.hiddenDates.push({start:a.valueOf(),end:h.valueOf()}),df(e[o])){case"daily":a.add(1,"days"),h.add(1,"days");break;case"weekly":a.add(1,"weeks"),h.add(1,"weeks");break;case"monthly":a.add(1,"months"),h.add(1,"months");break;case"yearly":a.add(1,"y"),h.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",df(e[o]))}i.hiddenDates.push({start:a.valueOf(),end:h.valueOf()})}}mf(i);var d=Sf(i.range.start,i.hiddenDates),v=Sf(i.range.end,i.hiddenDates),p=i.range.start,m=i.range.end;1==d.hidden&&(p=1==i.range.startToFront?d.startDate-1:d.endDate+1),1==v.hidden&&(m=1==i.range.endToFront?v.startDate-1:v.endDate+1),1!=d.hidden&&1!=v.hidden||i.range._applyRange(p,m)}}function mf(t){for(var i,e=t.hiddenDates,n=[],r=0;r<e.length;r++)for(var s=0;s<e.length;s++)r!=s&&1!=e[s].remove&&1!=e[r].remove&&(e[s].start>=e[r].start&&e[s].end<=e[r].end?e[s].remove=!0:e[s].start>=e[r].start&&e[s].start<=e[r].end?(e[r].end=e[s].end,e[s].remove=!0):e[s].end>=e[r].start&&e[s].end<=e[r].end&&(e[r].start=e[s].start,e[s].remove=!0));for(r=0;r<e.length;r++)!0!==e[r].remove&&n.push(e[r]);t.hiddenDates=n,cl(i=t.hiddenDates).call(i,(function(t,i){return t.start-i.start}))}function gf(t,i,e){for(var n=!1,r=i.current.valueOf(),s=0;s<i.hiddenDates.length;s++){var o=i.hiddenDates[s].start,a=i.hiddenDates[s].end;if(r>=o&&r<a){n=!0;break}}if(1==n&&r<i._end.valueOf()&&r!=e){var h=t(e),u=t(a);h.year()!=u.year()?i.switchedYear=!0:h.month()!=u.month()?i.switchedMonth=!0:h.dayOfYear()!=u.dayOfYear()&&(i.switchedDay=!0),i.current=u}}function yf(t,i,e){var n;if(0==t.body.hiddenDates.length)return n=t.range.conversion(e),(i.valueOf()-n.offset)*n.scale;var r=Sf(i,t.body.hiddenDates);1==r.hidden&&(i=r.startDate);var s=wf(t.body.hiddenDates,t.range.start,t.range.end);if(i<t.range.start){n=t.range.conversion(e,s);var o=kf(t.body.hiddenDates,i,n.offset);return i=t.options.moment(i).toDate().valueOf(),i+=o,-(n.offset-i.valueOf())*n.scale}if(i>t.range.end){var a={start:t.range.start,end:i};return i=_f(t.options.moment,t.body.hiddenDates,a,i),n=t.range.conversion(e,s),(i.valueOf()-n.offset)*n.scale}return i=_f(t.options.moment,t.body.hiddenDates,t.range,i),n=t.range.conversion(e,s),(i.valueOf()-n.offset)*n.scale}function bf(t,i,e){if(0==t.body.hiddenDates.length){var n=t.range.conversion(e);return new Date(i/n.scale+n.offset)}var r=wf(t.body.hiddenDates,t.range.start,t.range.end),s=(t.range.end-t.range.start-r)*i/e,o=Df(t.body.hiddenDates,t.range,s);return new Date(o+s+t.range.start)}function wf(t,i,e){for(var n=0,r=0;r<t.length;r++){var s=t[r].start,o=t[r].end;s>=i&&o<e&&(n+=o-s)}return n}function kf(t,i,e){for(var n=0,r=0;r<t.length;r++){var s=t[r].start,o=t[r].end;s>=i&&o<=e&&(n+=o-s)}return n}function _f(t,i,e,n){return n=t(n).toDate().valueOf(),n-=xf(t,i,e,n)}function xf(t,i,e,n){var r=0;n=t(n).toDate().valueOf();for(var s=0;s<i.length;s++){var o=i[s].start,a=i[s].end;o>=e.start&&a<e.end&&n>=a&&(r+=a-o)}return r}function Df(t,i,e){for(var n=0,r=0,s=i.start,o=0;o<t.length;o++){var a=t[o].start,h=t[o].end;if(a>=i.start&&h<i.end){if(r+=a-s,s=h,r>=e)break;n+=h-a}}return n}function Mf(t,i,e,n){var r=Sf(i,t);return 1==r.hidden?e<0?1==n?r.startDate-(r.endDate-i)-1:r.startDate-1:1==n?r.endDate+(i-r.startDate)+1:r.endDate+1:i}function Sf(t,i){for(var e=0;e<i.length;e++){var n=i[e].start,r=i[e].end;if(t>=n&&t<r)return{hidden:!0,startDate:n,endDate:r}}return{hidden:!1,startDate:n,endDate:r}}var Ff=Object.freeze({__proto__:null,convertHiddenOptions:vf,updateHiddenDates:pf,removeDuplicates:mf,printDates:function(t){for(var i=0;i<t.length;i++)console.log(i,new Date(t[i].start),new Date(t[i].end),t[i].start,t[i].end,t[i].remove)},stepOverHiddenDates:gf,toScreen:yf,toTime:bf,getHiddenDurationBetween:wf,getHiddenDurationBeforeStart:kf,correctTimeForHidden:_f,getHiddenDurationBefore:xf,getAccumulatedHiddenDuration:Df,snapAwayFromHidden:Mf,getIsHidden:Sf});function Tf(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var jf=function(t){hu(e,t);var i=Tf(e);function e(t,n){var r,s,o,a,h,u,l,c;fn(this,e),c=i.call(this);var f=Zl().hours(0).minutes(0).seconds(0).milliseconds(0),d=f.clone().add(-3,"days").valueOf(),v=f.clone().add(3,"days").valueOf();return c.millisecondsPerPixelCache=void 0,void 0===n?(c.start=d,c.end=v):(c.start=n.start||d,c.end=n.end||v),c.rolling=!1,c.body=t,c.deltaDifference=0,c.scaleOffset=0,c.startToFront=!1,c.endToFront=!0,c.defaultOptions={rtl:!1,start:null,end:null,moment:Zl,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10,rollingMode:{follow:!1,offset:.5}},c.options=sf.extend({},c.defaultOptions),c.props={touch:{}},c.animationTimer=null,c.body.emitter.on("panstart",br(r=c._onDragStart).call(r,ru(c))),c.body.emitter.on("panmove",br(s=c._onDrag).call(s,ru(c))),c.body.emitter.on("panend",br(o=c._onDragEnd).call(o,ru(c))),c.body.emitter.on("mousewheel",br(a=c._onMouseWheel).call(a,ru(c))),c.body.emitter.on("touch",br(h=c._onTouch).call(h,ru(c))),c.body.emitter.on("pinch",br(u=c._onPinch).call(u,ru(c))),c.body.dom.rollingModeBtn.addEventListener("click",br(l=c.startRolling).call(l,ru(c))),c.setOptions(n),c}return vn(e,[{key:"setOptions",value:function(t){if(t){sf.selectiveExtend(["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll"],this.options,t),t.rollingMode&&t.rollingMode.follow&&this.startRolling(),("start"in t||"end"in t)&&this.setRange(t.start,t.end)}}},{key:"startRolling",value:function(){var t=this;!function i(){t.stopRolling(),t.rolling=!0;var e=t.end-t.start,n=sf.convert(new Date,"Date").valueOf(),r=t.options.rollingMode&&t.options.rollingMode.offset||.5,s=n-e*r,o=n+e*(1-r);t.setRange(s,o,{animation:!1}),(e=1/t.conversion(t.body.domProps.center.width).scale/10)<30&&(e=30),e>1e3&&(e=1e3),t.body.dom.rollingModeBtn.style.visibility="hidden",t.currentTimeTimer=qs(i,e)}()}},{key:"stopRolling",value:function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}},{key:"setRange",value:function(t,i,e,n,r){e||(e={}),!0!==e.byUser&&(e.byUser=!1);var s=this,o=null!=t?sf.convert(t,"Date").valueOf():null,a=null!=i?sf.convert(i,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,e.animation){var h,u=this.start,l=this.end,c="object"===qn(e.animation)&&"duration"in e.animation?e.animation.duration:500,f="object"===qn(e.animation)&&"easingFunction"in e.animation?e.animation.easingFunction:"easeInOutQuad",d=sf.easingFunctions[f];if(!d)throw new Error(ir(h="Unknown easing function ".concat($s(f),". Choose from: ")).call(h,cr(sf.easingFunctions).join(", ")));var v=fr(),p=!1;return function t(){if(!s.props.touch.dragging){var i=fr()-v,h=d(i/c),f=i>c,g=f||null===o?o:u+(o-u)*h,y=f||null===a?a:l+(a-l)*h;m=s._applyRange(g,y),pf(s.options.moment,s.body,s.options.hiddenDates),p=p||m;var b={start:new Date(s.start),end:new Date(s.end),byUser:e.byUser,event:e.event};if(r&&r(h,m,f),m&&s.body.emitter.emit("rangechange",b),f){if(p&&(s.body.emitter.emit("rangechanged",b),n))return n()}else s.animationTimer=qs(t,20)}}()}var m=this._applyRange(o,a);if(pf(this.options.moment,this.body,this.options.hiddenDates),m){var g={start:new Date(this.start),end:new Date(this.end),byUser:e.byUser,event:e.event};if(this.body.emitter.emit("rangechange",g),clearTimeout(s.timeoutID),s.timeoutID=qs((function(){s.body.emitter.emit("rangechanged",g)}),200),n)return n()}}},{key:"getMillisecondsPerPixel",value:function(){return void 0===this.millisecondsPerPixelCache&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}},{key:"_cancelAnimation",value:function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}},{key:"_applyRange",value:function(t,i){var e,n=null!=t?sf.convert(t,"Date").valueOf():this.start,r=null!=i?sf.convert(i,"Date").valueOf():this.end,s=null!=this.options.max?sf.convert(this.options.max,"Date").valueOf():null,o=null!=this.options.min?sf.convert(this.options.min,"Date").valueOf():null;if(isNaN(n)||null===n)throw new Error('Invalid start "'.concat(t,'"'));if(isNaN(r)||null===r)throw new Error('Invalid end "'.concat(i,'"'));if(r<n&&(r=n),null!==o&&n<o&&(n+=e=o-n,r+=e,null!=s&&r>s&&(r=s)),null!==s&&r>s&&(n-=e=r-s,r-=e,null!=o&&n<o&&(n=o)),null!==this.options.zoomMin){var a=uf(this.options.zoomMin);if(a<0&&(a=0),r-n<a){this.end-this.start===a&&n>=this.start-.5&&r<=this.end?(n=this.start,r=this.end):(n-=(e=a-(r-n))/2,r+=e/2)}}if(null!==this.options.zoomMax){var h=uf(this.options.zoomMax);h<0&&(h=0),r-n>h&&(this.end-this.start===h&&n<this.start&&r>this.end?(n=this.start,r=this.end):(n+=(e=r-n-h)/2,r-=e/2))}var u=this.start!=n||this.end!=r;return n>=this.start&&n<=this.end||r>=this.start&&r<=this.end||this.start>=n&&this.start<=r||this.end>=n&&this.end<=r||this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=r,u}},{key:"getRange",value:function(){return{start:this.start,end:this.end}}},{key:"conversion",value:function(t,i){return e.conversion(this.start,this.end,t,i)}},{key:"_onDragStart",value:function(t){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(t)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}},{key:"_onDrag",value:function(t){if(t&&this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var i=this.options.direction;Yf(i);var e="horizontal"==i?t.deltaX:t.deltaY;e-=this.deltaDifference;var n=this.props.touch.end-this.props.touch.start;n-=wf(this.body.hiddenDates,this.start,this.end);var r,s="horizontal"==i?this.body.domProps.center.width:this.body.domProps.center.height;r=this.options.rtl?e/s*n:-e/s*n;var o=this.props.touch.start+r,a=this.props.touch.end+r,h=Mf(this.body.hiddenDates,o,this.previousDelta-e,!0),u=Mf(this.body.hiddenDates,a,this.previousDelta-e,!0);if(h!=o||u!=a)return this.deltaDifference+=e,this.props.touch.start=h,this.props.touch.end=u,void this._onDrag(t);this.previousDelta=e,this._applyRange(o,a);var l=new Date(this.start),c=new Date(this.end);this.body.emitter.emit("rangechange",{start:l,end:c,byUser:!0,event:t}),this.body.emitter.emit("panmove")}}},{key:"_onDragEnd",value:function(t){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:t}))}},{key:"_onMouseWheel",value:function(t){var i=0;if(t.wheelDelta?i=t.wheelDelta/120:t.detail?i=-t.detail/3:t.deltaY&&(i=-t.deltaY/3),!(this.options.zoomKey&&!t[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(t)&&i){var e,n,r=this.options.zoomFriction||5;if(e=i<0?1-i/r:1/(1+i/r),this.rolling){var s=this.options.rollingMode&&this.options.rollingMode.offset||.5;n=this.start+(this.end-this.start)*s}else{var o=this.getPointer({x:t.clientX,y:t.clientY},this.body.dom.center);n=this._pointerToDate(o)}this.zoom(e,n,i,t),t.preventDefault()}}},{key:"_onTouch",value:function(t){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,sf.preventDefault(t)}},{key:"_onPinch",value:function(t){if(this.options.zoomable&&this.options.moveable){sf.preventDefault(t),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(t.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();var i=1/(t.scale+this.scaleOffset),e=this.props.touch.centerDate,n=wf(this.body.hiddenDates,this.start,this.end),r=xf(this.options.moment,this.body.hiddenDates,this,e),s=n-r,o=e-r+(this.props.touch.start-(e-r))*i,a=e+s+(this.props.touch.end-(e+s))*i;this.startToFront=1-i<=0,this.endToFront=i-1<=0;var h=Mf(this.body.hiddenDates,o,1-i,!0),u=Mf(this.body.hiddenDates,a,i-1,!0);h==o&&u==a||(this.props.touch.start=h,this.props.touch.end=u,this.scaleOffset=1-t.scale,o=h,a=u);var l={animation:!1,byUser:!0,event:t};this.setRange(o,a,l),this.startToFront=!1,this.endToFront=!0}}},{key:"_isInsideRange",value:function(t){var i=t.center?t.center.x:t.clientX,e=this.body.dom.centerContainer.getBoundingClientRect(),n=this.options.rtl?i-e.left:e.right-i,r=this.body.util.toTime(n);return r>=this.start&&r<=this.end}},{key:"_pointerToDate",value:function(t){var i,e=this.options.direction;if(Yf(e),"horizontal"==e)return this.body.util.toTime(t.x).valueOf();var n=this.body.domProps.center.height;return i=this.conversion(n),t.y/i.scale+i.offset}},{key:"getPointer",value:function(t,i){var e=i.getBoundingClientRect();return this.options.rtl?{x:e.right-t.x,y:t.y-e.top}:{x:t.x-e.left,y:t.y-e.top}}},{key:"zoom",value:function(t,i,e,n){null==i&&(i=(this.start+this.end)/2);var r=wf(this.body.hiddenDates,this.start,this.end),s=xf(this.options.moment,this.body.hiddenDates,this,i),o=r-s,a=i-s+(this.start-(i-s))*t,h=i+o+(this.end-(i+o))*t;this.startToFront=!(e>0),this.endToFront=!(-e>0);var u=Mf(this.body.hiddenDates,a,e,!0),l=Mf(this.body.hiddenDates,h,-e,!0);u==a&&l==h||(a=u,h=l);var c={animation:!1,byUser:!0,event:n};this.setRange(a,h,c),this.startToFront=!1,this.endToFront=!0}},{key:"move",value:function(t){var i=this.end-this.start,e=this.start+i*t,n=this.end+i*t;this.start=e,this.end=n}},{key:"moveTo",value:function(t){var i=(this.start+this.end)/2-t,e=this.start-i,n=this.end-i;this.setRange(e,n,{animation:!1,byUser:!0,event:null})}}],[{key:"conversion",value:function(t,i,e,n){return void 0===n&&(n=0),0!=e&&i-t!=0?{offset:t,scale:e/(i-t-n)}:{offset:0,scale:1}}}]),e}(lf);function Yf(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError('Unknown direction "'.concat(t,'". Choose "horizontal" or "vertical".'))}var Ef,Af=wt.setInterval,Cf=null;"undefined"!=typeof window?Ef=function t(i,e){var n=e||{preventDefault:!1};if(i.Manager){var r=i,s=function(i,e){var s=Object.create(n);return e&&r.assign(s,e),t(new r(i,s),s)};return r.assign(s,r),s.Manager=function(i,e){var s=Object.create(n);return e&&r.assign(s,e),t(new r.Manager(i,s),s)},s}var o=Object.create(i),a=i.element;function h(t){return t.match(/[^ ]+/g)}function u(t){if("hammer.input"!==t.type){if(t.srcEvent._handled||(t.srcEvent._handled={}),t.srcEvent._handled[t.type])return;t.srcEvent._handled[t.type]=!0}var i=!1;t.stopPropagation=function(){i=!0};var e=t.srcEvent.stopPropagation.bind(t.srcEvent);"function"==typeof e&&(t.srcEvent.stopPropagation=function(){e(),t.stopPropagation()}),t.firstTarget=Cf;for(var n=Cf;n&&!i;){var r=n.hammer;if(r)for(var s,o=0;o<r.length;o++)if(s=r[o]._handlers[t.type])for(var a=0;a<s.length&&!i;a++)s[a](t);n=n.parentNode}}return a.hammer||(a.hammer=[]),a.hammer.push(o),i.on("hammer.input",(function(t){!0!==n.preventDefault&&n.preventDefault!==t.pointerType||t.preventDefault(),t.isFirst&&(Cf=t.target)})),o._handlers={},o.on=function(t,e){return h(t).forEach((function(t){var n=o._handlers[t];n||(o._handlers[t]=n=[],i.on(t,u)),n.push(e)})),o},o.off=function(t,e){return h(t).forEach((function(t){var n=o._handlers[t];n&&((n=e?n.filter((function(t){return t!==e})):[]).length>0?o._handlers[t]=n:(i.off(t,u),delete o._handlers[t]))})),o},o.emit=function(t,e){Cf=e.target,i.emit(t,e)},o.destroy=function(){var t=i.element.hammer,e=t.indexOf(o);-1!==e&&t.splice(e,1),t.length||delete i.element.hammer,o._handlers={},i.destroy()},o}(window.Hammer||Ba,{preventDefault:"mouse"}):Ef=function(){return{on:t=function(){},off:t,destroy:t,emit:t,get:function(i){return{set:t}}};var t};var Of=Ef;function Lf(t,i){i.inputHandler=function(t){t.isFirst&&i(t)},t.on("hammer.input",i.inputHandler)}var zf=function(){function t(i,e,n,r,s){fn(this,t),this.moment=s&&s.moment||Zl,this.options=s||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(i,e,n),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,rr(r)?this.hiddenDates=r:this.hiddenDates=null!=r?[r]:[],this.format=t.FORMAT}return vn(t,[{key:"setMoment",value:function(t){this.moment=t,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}},{key:"setFormat",value:function(i){var e=sf.deepExtend({},t.FORMAT);this.format=sf.deepExtend(e,i)}},{key:"setRange",value:function(t,i,e){if(!(t instanceof Date&&i instanceof Date))throw"No legal start or end date in method setRange";this._start=null!=t?this.moment(t.valueOf()):fr(),this._end=null!=i?this.moment(i.valueOf()):fr(),this.autoScale&&this.setMinimumStep(e)}},{key:"start",value:function(){this.current=this._start.clone(),this.roundToMinor()}},{key:"roundToMinor",value:function(){switch("week"==this.scale&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step){var t=this.current.clone();switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}t.isSame(this.current)||(this.current=this.moment(Mf(this.hiddenDates,this.current.valueOf(),-1,!0)))}}},{key:"hasNext",value:function(){return this.current.valueOf()<=this._end.valueOf()}},{key:"next",value:function(){var t=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!=0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(0!==this.current.weekday())this.current.weekday(0),this.current.add(this.step,"week");else if(!1===this.options.showMajorLabels)this.current.add(this.step,"week");else{var i=this.current.clone();i.add(1,"week"),i.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()==t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,gf(this.moment,this,t)}},{key:"getCurrent",value:function(){return this.current.clone()}},{key:"setScale",value:function(t){t&&"string"==typeof t.scale&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)}},{key:"setAutoScale",value:function(t){this.autoScale=t}},{key:"setMinimumStep",value:function(t){if(null!=t){var i=31104e6,e=2592e6,n=864e5,r=36e5,s=6e4,o=1e3;1e3*i>t&&(this.scale="year",this.step=1e3),500*i>t&&(this.scale="year",this.step=500),100*i>t&&(this.scale="year",this.step=100),50*i>t&&(this.scale="year",this.step=50),10*i>t&&(this.scale="year",this.step=10),5*i>t&&(this.scale="year",this.step=5),i>t&&(this.scale="year",this.step=1),7776e6>t&&(this.scale="month",this.step=3),e>t&&(this.scale="month",this.step=1),6048e5>t&&this.options.showWeekScale&&(this.scale="week",this.step=1),1728e5>t&&(this.scale="day",this.step=2),n>t&&(this.scale="day",this.step=1),432e5>t&&(this.scale="weekday",this.step=1),144e5>t&&(this.scale="hour",this.step=4),r>t&&(this.scale="hour",this.step=1),9e5>t&&(this.scale="minute",this.step=15),6e5>t&&(this.scale="minute",this.step=10),3e5>t&&(this.scale="minute",this.step=5),s>t&&(this.scale="minute",this.step=1),15e3>t&&(this.scale="second",this.step=15),1e4>t&&(this.scale="second",this.step=10),5e3>t&&(this.scale="second",this.step=5),o>t&&(this.scale="second",this.step=1),200>t&&(this.scale="millisecond",this.step=200),100>t&&(this.scale="millisecond",this.step=100),50>t&&(this.scale="millisecond",this.step=50),10>t&&(this.scale="millisecond",this.step=10),5>t&&(this.scale="millisecond",this.step=5),1>t&&(this.scale="millisecond",this.step=1)}}},{key:"isMajor",value:function(){if(1==this.switchedYear)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return 0==t.milliseconds();case"second":return 0==t.seconds();case"minute":return 0==t.hours()&&0==t.minutes();case"hour":return 0==t.hours();case"weekday":case"day":case"week":return 1==t.date();case"month":return 0==t.month();case"year":default:return!1}}},{key:"getLabelMinor",value:function(t){if(null==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"==typeof this.format.minorLabels)return this.format.minorLabels(t,this.scale,this.step);var i=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(1===t.date()&&0!==t.weekday())return"";default:return i&&i.length>0?this.moment(t).format(i):""}}},{key:"getLabelMajor",value:function(t){if(null==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"==typeof this.format.majorLabels)return this.format.majorLabels(t,this.scale,this.step);var i=this.format.majorLabels[this.scale];return i&&i.length>0?this.moment(t).format(i):""}},{key:"getClassName",value:function(){var t,i=this.moment,e=this.moment(this.current),n=e.locale?e.locale("en"):e.lang("en"),r=this.step,s=[];function o(t){return t/r%2==0?" vis-even":" vis-odd"}function a(t){return t.isSame(fr(),"day")?" vis-today":t.isSame(i().add(1,"day"),"day")?" vis-tomorrow":t.isSame(i().add(-1,"day"),"day")?" vis-yesterday":""}function h(t){return t.isSame(fr(),"week")?" vis-current-week":""}function u(t){return t.isSame(fr(),"month")?" vis-current-month":""}switch(this.scale){case"millisecond":s.push(a(n)),s.push(o(n.milliseconds()));break;case"second":s.push(a(n)),s.push(o(n.seconds()));break;case"minute":s.push(a(n)),s.push(o(n.minutes()));break;case"hour":s.push(ir(t="vis-h".concat(n.hours())).call(t,4==this.step?"-h"+(n.hours()+4):"")),s.push(a(n)),s.push(o(n.hours()));break;case"weekday":s.push("vis-".concat(n.format("dddd").toLowerCase())),s.push(a(n)),s.push(h(n)),s.push(o(n.date()));break;case"day":s.push("vis-day".concat(n.date())),s.push("vis-".concat(n.format("MMMM").toLowerCase())),s.push(a(n)),s.push(u(n)),s.push(this.step<=2?a(n):""),s.push(this.step<=2?"vis-".concat(n.format("dddd").toLowerCase()):""),s.push(o(n.date()-1));break;case"week":s.push("vis-week".concat(n.format("w"))),s.push(h(n)),s.push(o(n.week()));break;case"month":s.push("vis-".concat(n.format("MMMM").toLowerCase())),s.push(u(n)),s.push(o(n.month()));break;case"year":s.push("vis-year".concat(n.year())),s.push(function(t){return t.isSame(fr(),"year")?" vis-current-year":""}(n)),s.push(o(n.year()))}return os(s).call(s,String).join(" ")}}],[{key:"snap",value:function(t,i,e){var n=Zl(t);if("year"==i){var r=n.year()+Math.round(n.month()/12);n.year(Math.round(r/e)*e),n.month(0),n.date(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("month"==i)n.date()>15?(n.date(1),n.add(1,"month")):n.date(1),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if("week"==i)n.weekday()>2?(n.weekday(0),n.add(1,"week")):n.weekday(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if("day"==i){switch(e){case 5:case 2:n.hours(24*Math.round(n.hours()/24));break;default:n.hours(12*Math.round(n.hours()/12))}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("weekday"==i){switch(e){case 5:case 2:n.hours(12*Math.round(n.hours()/12));break;default:n.hours(6*Math.round(n.hours()/6))}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("hour"==i){switch(e){case 4:n.minutes(60*Math.round(n.minutes()/60));break;default:n.minutes(30*Math.round(n.minutes()/30))}n.seconds(0),n.milliseconds(0)}else if("minute"==i){switch(e){case 15:case 10:n.minutes(5*Math.round(n.minutes()/5)),n.seconds(0);break;case 5:n.seconds(60*Math.round(n.seconds()/60));break;default:n.seconds(30*Math.round(n.seconds()/30))}n.milliseconds(0)}else if("second"==i)switch(e){case 15:case 10:n.seconds(5*Math.round(n.seconds()/5)),n.milliseconds(0);break;case 5:n.milliseconds(1e3*Math.round(n.milliseconds()/1e3));break;default:n.milliseconds(500*Math.round(n.milliseconds()/500))}else if("millisecond"==i){var s=e>5?e/2:1;n.milliseconds(Math.round(n.milliseconds()/s)*s)}return n}}]),t}();function If(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}zf.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};var Nf=function(t){hu(e,t);var i=If(e);function e(t,n){var r;return fn(this,e),(r=i.call(this)).dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},r.props={range:{start:0,end:0,minimumStep:0},lineTop:0},r.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:sf.extend({},zf.FORMAT),moment:Zl,timeAxis:null},r.options=sf.extend({},r.defaultOptions),r.body=t,r._create(),r.setOptions(n),r}return vn(e,[{key:"setOptions",value:function(t){t&&(sf.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,t),sf.selectiveDeepExtend(["format"],this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.axis=t.orientation:"object"===qn(t.orientation)&&"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis)),"locale"in t&&("function"==typeof Zl.locale?Zl.locale(t.locale):Zl.lang(t.locale)))}},{key:"_create",value:function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}},{key:"destroy",value:function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}},{key:"redraw",value:function(){var t=this.props,i=this.dom.foreground,e=this.dom.background,n="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,r=i.parentNode!==n;this._calculateCharSize();var s=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,o=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;t.minorLabelHeight=s?t.minorCharHeight:0,t.majorLabelHeight=o?t.majorCharHeight:0,t.height=t.minorLabelHeight+t.majorLabelHeight,t.width=i.offsetWidth,t.minorLineHeight=this.body.domProps.root.height-t.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),t.minorLineWidth=1,t.majorLineHeight=t.minorLineHeight+t.majorLabelHeight,t.majorLineWidth=1;var a=i.nextSibling,h=e.nextSibling;return i.parentNode&&i.parentNode.removeChild(i),e.parentNode&&e.parentNode.removeChild(e),i.style.height="".concat(this.props.height,"px"),this._repaintLabels(),a?n.insertBefore(i,a):n.appendChild(i),h?this.body.dom.backgroundVertical.insertBefore(e,h):this.body.dom.backgroundVertical.appendChild(e),this._isResized()||r}},{key:"_repaintLabels",value:function(){var t=this.options.orientation.axis,i=sf.convert(this.body.range.start,"Number"),e=sf.convert(this.body.range.end,"Number"),n=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),r=n-xf(this.options.moment,this.body.hiddenDates,this.body.range,n);r-=this.body.util.toTime(0).valueOf();var s=new zf(new Date(i),new Date(e),r,this.body.hiddenDates,this.options);s.setMoment(this.options.moment),this.options.format&&s.setFormat(this.options.format),this.options.timeAxis&&s.setScale(this.options.timeAxis),this.step=s;var o,a,h,u,l,c,f=this.dom;f.redundant.lines=f.lines,f.redundant.majorTexts=f.majorTexts,f.redundant.minorTexts=f.minorTexts,f.lines=[],f.majorTexts=[],f.minorTexts=[];var d,v,p,m=0,g=void 0,y=0,b=1e3;for(s.start(),a=s.getCurrent(),u=this.body.util.toScreen(a);s.hasNext()&&y<b;){switch(y++,l=s.isMajor(),p=s.getClassName(),o=a,h=u,s.next(),a=s.getCurrent(),d=m,m=(u=this.body.util.toScreen(a))-h,s.scale){case"week":c=!0;break;default:c=m>=.4*d}if(this.options.showMinorLabels&&c){var w=this._repaintMinorText(h,s.getLabelMinor(o),t,p);w.style.width="".concat(m,"px")}l&&this.options.showMajorLabels?(h>0&&(null==g&&(g=h),w=this._repaintMajorText(h,s.getLabelMajor(o),t,p)),v=this._repaintMajorLine(h,m,t,p)):c?v=this._repaintMinorLine(h,m,t,p):v&&(v.style.width="".concat(ks(v.style.width)+m,"px"))}if(y!==b||Hf||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(b," lines.")),Hf=!0),this.options.showMajorLabels){var k=this.body.util.toTime(0),_=s.getLabelMajor(k),x=_.length*(this.props.majorCharWidth||10)+10;(null==g||x<g)&&this._repaintMajorText(0,_,t,p)}Sr(sf).call(sf,this.dom.redundant,(function(t){for(;t.length;){var i=t.pop();i&&i.parentNode&&i.parentNode.removeChild(i)}}))}},{key:"_repaintMinorText",value:function(t,i,e,n){var r=this.dom.redundant.minorTexts.shift();if(!r){var s=document.createTextNode("");(r=document.createElement("div")).appendChild(s),this.dom.foreground.appendChild(r)}this.dom.minorTexts.push(r),r.innerHTML=sf.xss(i);var o="top"==e?this.props.majorLabelHeight:0;return this._setXY(r,t,o),r.className="vis-text vis-minor ".concat(n),r}},{key:"_repaintMajorText",value:function(t,i,e,n){var r=this.dom.redundant.majorTexts.shift();if(!r){var s=document.createElement("div");(r=document.createElement("div")).appendChild(s),this.dom.foreground.appendChild(r)}r.childNodes[0].innerHTML=sf.xss(i),r.className="vis-text vis-major ".concat(n);var o="top"==e?0:this.props.minorLabelHeight;return this._setXY(r,t,o),this.dom.majorTexts.push(r),r}},{key:"_setXY",value:function(t,i,e){var n,r=this.options.rtl?-1*i:i;t.style.transform=ir(n="translate(".concat(r,"px, ")).call(n,e,"px)")}},{key:"_repaintMinorLine",value:function(t,i,e,n){var r,s=this.dom.redundant.lines.shift();s||(s=document.createElement("div"),this.dom.background.appendChild(s)),this.dom.lines.push(s);var o=this.props;s.style.width="".concat(i,"px"),s.style.height="".concat(o.minorLineHeight,"px");var a="top"==e?o.majorLabelHeight:this.body.domProps.top.height,h=t-o.minorLineWidth/2;return this._setXY(s,h,a),s.className=ir(r="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(r,n),s}},{key:"_repaintMajorLine",value:function(t,i,e,n){var r,s=this.dom.redundant.lines.shift();s||(s=document.createElement("div"),this.dom.background.appendChild(s)),this.dom.lines.push(s);var o=this.props;s.style.width="".concat(i,"px"),s.style.height="".concat(o.majorLineHeight,"px");var a="top"==e?0:this.body.domProps.top.height,h=t-o.majorLineWidth/2;return this._setXY(s,h,a),s.className=ir(r="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(r,n),s}},{key:"_calculateCharSize",value:function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}]),e}(lf),Hf=!1;function Bf(t){var i,e=t&&t.preventDefault||!1,n=t&&t.container||window,r={},s={keydown:{},keyup:{}},o={};for(i=97;i<=122;i++)o[String.fromCharCode(i)]={code:i-97+65,shift:!1};for(i=65;i<=90;i++)o[String.fromCharCode(i)]={code:i,shift:!0};for(i=0;i<=9;i++)o[""+i]={code:48+i,shift:!1};for(i=1;i<=12;i++)o["F"+i]={code:111+i,shift:!1};for(i=0;i<=9;i++)o["num"+i]={code:96+i,shift:!1};o["num*"]={code:106,shift:!1},o["num+"]={code:107,shift:!1},o["num-"]={code:109,shift:!1},o["num/"]={code:111,shift:!1},o["num."]={code:110,shift:!1},o.left={code:37,shift:!1},o.up={code:38,shift:!1},o.right={code:39,shift:!1},o.down={code:40,shift:!1},o.space={code:32,shift:!1},o.enter={code:13,shift:!1},o.shift={code:16,shift:void 0},o.esc={code:27,shift:!1},o.backspace={code:8,shift:!1},o.tab={code:9,shift:!1},o.ctrl={code:17,shift:!1},o.alt={code:18,shift:!1},o.delete={code:46,shift:!1},o.pageup={code:33,shift:!1},o.pagedown={code:34,shift:!1},o["="]={code:187,shift:!1},o["-"]={code:189,shift:!1},o["]"]={code:221,shift:!1},o["["]={code:219,shift:!1};var a=function(t){u(t,"keydown")},h=function(t){u(t,"keyup")},u=function(t,i){if(void 0!==s[i][t.keyCode]){for(var n=s[i][t.keyCode],r=0;r<n.length;r++)(void 0===n[r].shift||1==n[r].shift&&1==t.shiftKey||0==n[r].shift&&0==t.shiftKey)&&n[r].fn(t);1==e&&t.preventDefault()}};return r.bind=function(t,i,e){if(void 0===e&&(e="keydown"),void 0===o[t])throw new Error("unsupported key: "+t);void 0===s[e][o[t].code]&&(s[e][o[t].code]=[]),s[e][o[t].code].push({fn:i,shift:o[t].shift})},r.bindAll=function(t,i){for(var e in void 0===i&&(i="keydown"),o)o.hasOwnProperty(e)&&r.bind(e,t,i)},r.getKey=function(t){for(var i in o)if(o.hasOwnProperty(i)){if(1==t.shiftKey&&1==o[i].shift&&t.keyCode==o[i].code)return i;if(0==t.shiftKey&&0==o[i].shift&&t.keyCode==o[i].code)return i;if(t.keyCode==o[i].code&&"shift"==i)return i}return"unknown key, currently not supported"},r.unbind=function(t,i,e){if(void 0===e&&(e="keydown"),void 0===o[t])throw new Error("unsupported key: "+t);if(void 0!==i){var n=[],r=s[e][o[t].code];if(void 0!==r)for(var a=0;a<r.length;a++)r[a].fn==i&&r[a].shift==o[t].shift||n.push(s[e][o[t].code][a]);s[e][o[t].code]=n}else s[e][o[t].code]=[]},r.reset=function(){s={keydown:{},keyup:{}}},r.destroy=function(){s={keydown:{},keyup:{}},n.removeEventListener("keydown",a,!0),n.removeEventListener("keyup",h,!0)},n.addEventListener("keydown",a,!0),n.addEventListener("keyup",h,!0),r}function Pf(t){var i,e;this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Of(this.dom.overlay),this.hammer.on("tap",br(i=this._onTapOverlay).call(i,this));var n=this,r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Sr(r).call(r,(function(t){n.hammer.on(t,(function(t){t.stopPropagation()}))})),document&&document.body&&(this.onClick=function(i){(function(t,i){for(;t;){if(t===i)return!0;t=t.parentNode}return!1})(i.target,t)||n.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=Bf(),this.escListener=br(e=this.deactivate).call(e,this)}Js(Pf.prototype),Pf.current=null,Pf.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null},Pf.prototype.activate=function(){var t;Pf.current&&Pf.current.deactivate(),Pf.current=this,this.active=!0,this.dom.overlay.style.display="none",sf.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),br(t=this.keycharm).call(t,"esc",this.escListener)},Pf.prototype.deactivate=function(){Pf.current===this&&(Pf.current=null),this.active=!1,this.dom.overlay.style.display="",sf.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},Pf.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()};var Rf={current:"current",time:"time",deleteSelected:"Delete selected"},$f={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},Gf={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},Wf={current:"Aktuelle",time:"Zeit",deleteSelected:"Lsche Auswahl"},Uf={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},qf={current:"corriente",time:"hora",deleteSelected:"Eliminar seleccin"},Vf={current:"",time:"",deleteSelected:" "},Xf={current:"",time:"",deleteSelected:" "},Zf={current:"aktualny",time:"czas",deleteSelected:"Usu wybrane"},Jf={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},Kf={current:"",time:"",deleteSelected:""},Qf={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},td={current:"nvrende",time:"tid",deleteSelected:"Slett valgte"},id={en:Rf,en_EN:Rf,en_US:Rf,it:$f,it_IT:$f,it_CH:$f,nl:Gf,nl_NL:Gf,nl_BE:Gf,de:Wf,de_DE:Wf,fr:Uf,fr_FR:Uf,fr_CA:Uf,fr_BE:Uf,es:qf,es_ES:qf,uk:Vf,uk_UA:Vf,ru:Xf,ru_RU:Xf,pl:Zf,pl_PL:Zf,pt:Jf,pt_BR:Jf,pt_PT:Jf,ja:Kf,ja_JP:Kf,sv:Qf,sv_SE:Qf,nb:td,nn:td,nb_NO:td,nn_NO:td};function ed(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var nd=function(t){hu(e,t);var i=ed(e);function e(t,n){var r,s;fn(this,e),(s=i.call(this)).body=t,s.defaultOptions={moment:Zl,locales:id,locale:"en",id:void 0,title:void 0},s.options=sf.extend({},s.defaultOptions),s.setOptions(n),s.options.locales=sf.extend({},id,s.options.locales);var o=s.defaultOptions.locales[s.defaultOptions.locale];return Sr(r=cr(s.options.locales)).call(r,(function(t){s.options.locales[t]=sf.extend({},o,s.options.locales[t])})),n&&null!=n.time?s.customTime=n.time:s.customTime=new Date,s.eventParams={},s._create(),s}return vn(e,[{key:"setOptions",value:function(t){t&&sf.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,t)}},{key:"_create",value:function(){var t,i,e,n=document.createElement("div");n["custom-time"]=this,n.className="vis-custom-time ".concat(this.options.id||""),n.style.position="absolute",n.style.top="0px",n.style.height="100%",this.bar=n;var r=document.createElement("div");function s(t){this.body.range._onMouseWheel(t)}r.style.position="relative",r.style.top="0px",this.options.rtl?r.style.right="-10px":r.style.left="-10px",r.style.height="100%",r.style.width="20px",r.addEventListener?(r.addEventListener("mousewheel",br(s).call(s,this),!1),r.addEventListener("DOMMouseScroll",br(s).call(s,this),!1)):r.attachEvent("onmousewheel",br(s).call(s,this)),n.appendChild(r),this.hammer=new Of(r),this.hammer.on("panstart",br(t=this._onDragStart).call(t,this)),this.hammer.on("panmove",br(i=this._onDrag).call(i,this)),this.hammer.on("panend",br(e=this._onDragEnd).call(e,this)),this.hammer.get("pan").set({threshold:5,direction:Of.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}},{key:"destroy",value:function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}},{key:"redraw",value:function(){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar));var i=this.body.util.toScreen(this.customTime),e=this.options.locales[this.options.locale];e||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),e=this.options.locales.en);var n,r=this.options.title;void 0===r?r=(r=ir(n="".concat(e.time,": ")).call(n,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss"))).charAt(0).toUpperCase()+r.substring(1):"function"==typeof r&&(r=r.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(i,"px"):this.bar.style.left="".concat(i,"px"),this.bar.title=r,!1}},{key:"hide",value:function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"setCustomTime",value:function(t){this.customTime=sf.convert(t,"Date"),this.redraw()}},{key:"getCustomTime",value:function(){return new Date(this.customTime.valueOf())}},{key:"setCustomMarker",value:function(t,i){var e,n,r=document.createElement("div");(r.className="vis-custom-time-marker",r.innerHTML=sf.xss(t),r.style.position="absolute",i)&&(r.setAttribute("contenteditable","true"),r.addEventListener("pointerdown",(function(){r.focus()})),r.addEventListener("input",br(e=this._onMarkerChange).call(e,this)),r.title=t,r.addEventListener("blur",br(n=function(t){this.title!=t.target.innerHTML&&(this._onMarkerChanged(t),this.title=t.target.innerHTML)}).call(n,this)));this.bar.appendChild(r)}},{key:"setCustomTitle",value:function(t){this.options.title=t}},{key:"_onDragStart",value:function(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation()}},{key:"_onDrag",value:function(t){if(this.eventParams.dragging){var i=this.options.rtl?-1*t.deltaX:t.deltaX,e=this.body.util.toScreen(this.eventParams.customTime)+i,n=this.body.util.toTime(e),r=this.body.util.getScale(),s=this.body.util.getStep(),o=this.options.snap,a=o?o(n,r,s):n;this.setCustomTime(a),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation()}}},{key:"_onDragEnd",value:function(t){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation())}},{key:"_onMarkerChange",value:function(t){this.body.emitter.emit("markerchange",{id:this.options.id,title:t.target.innerHTML,event:t}),t.stopPropagation()}},{key:"_onMarkerChanged",value:function(t){this.body.emitter.emit("markerchanged",{id:this.options.id,title:t.target.innerHTML,event:t}),t.stopPropagation()}}],[{key:"customTimeFromTarget",value:function(t){for(var i=t.target;i;){if(i.hasOwnProperty("custom-time"))return i["custom-time"];i=i.parentNode}return null}}]),e}(lf),rd=function(){function t(){fn(this,t)}return vn(t,[{key:"_create",value:function(t){var i,e,n,r=this;this.dom={},this.dom.container=t,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",(function(){!0===r.initialDrawDone&&r._redraw()})),this.on("rangechanged",(function(){r.initialRangeChangeDone||(r.initialRangeChangeDone=!0)})),this.on("touch",br(i=this._onTouch).call(i,this)),this.on("panmove",br(e=this._onDrag).call(e,this));var s=this;this._origRedraw=br(n=this._redraw).call(n,this),this._redraw=sf.throttle(this._origRedraw),this.on("_change",(function(t){s.itemSet&&s.itemSet.initialItemSetDrawn&&t&&1==t.queue?s._redraw():s._origRedraw()})),this.hammer=new Of(this.dom.root);var o=this.hammer.get("pinch").set({enable:!0});o&&function(t){t.getTouchAction=function(){return["pan-y"]}}(o),this.hammer.get("pan").set({threshold:5,direction:Of.DIRECTION_ALL}),this.timelineListeners={};var a,h,u=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];function l(t){this.isActive()&&this.emit("mousewheel",t);var i=0,e=0;if("detail"in t&&(e=-1*t.detail),"wheelDelta"in t&&(e=t.wheelDelta),"wheelDeltaY"in t&&(e=t.wheelDeltaY),"wheelDeltaX"in t&&(i=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=-1*e,e=0),"deltaY"in t&&(e=-1*t.deltaY),"deltaX"in t&&(i=t.deltaX),t.deltaMode&&(1===t.deltaMode?(i*=40,e*=40):(i*=40,e*=800)),this.options.preferZoom){if(!this.options.zoomKey||t[this.options.zoomKey])return}else if(this.options.zoomKey&&t[this.options.zoomKey])return;if(this.options.verticalScroll||this.options.horizontalScroll)if(this.options.verticalScroll&&Math.abs(e)>=Math.abs(i)){var n=this.props.scrollTop,r=n+e;if(this.isActive())this._setScrollTop(r)!==n&&(this._redraw(),this.emit("scroll",t),t.preventDefault())}else if(this.options.horizontalScroll){var s=(Math.abs(i)>=Math.abs(e)?i:e)/120*(this.range.end-this.range.start)/20,o=this.range.start+s,a=this.range.end+s,h={animation:!1,byUser:!0,event:t};this.range.setRange(o,a,h),t.preventDefault()}}Sr(u).call(u,(function(t){var i=function(i){s.isActive()&&s.emit(t,i)};s.hammer.on(t,i),s.timelineListeners[t]=i})),Lf(this.hammer,(function(t){s.emit("touch",t)})),a=this.hammer,(h=function(t){s.emit("release",t)}).inputHandler=function(t){t.isFinal&&h(t)},a.on("hammer.input",h.inputHandler);var c="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";function f(t){if(s.options.verticalScroll&&(t.preventDefault(),s.isActive())){var i=-t.target.scrollTop;s._setScrollTop(i),s._redraw(),s.emit("scrollSide",t)}}this.dom.centerContainer.addEventListener(c,br(l).call(l,this),!1),this.dom.top.addEventListener(c,br(l).call(l,this),!1),this.dom.bottom.addEventListener(c,br(l).call(l,this),!1),this.dom.left.parentNode.addEventListener("scroll",br(f).call(f,this)),this.dom.right.parentNode.addEventListener("scroll",br(f).call(f,this));var d=!1;function v(t){var i;if(t.preventDefault&&(s.emit("dragover",s.getEventProperties(t)),t.preventDefault()),js(i=t.target.className).call(i,"timeline")>-1&&!d)return t.dataTransfer.dropEffect="move",d=!0,!1}function p(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();try{var i=JSON.parse(t.dataTransfer.getData("text"));if(!i||!i.content)return}catch(t){return!1}return d=!1,t.center={x:t.clientX,y:t.clientY},"item"!==i.target?s.itemSet._onAddItem(t):s.itemSet._onDropObjectOnItem(t),s.emit("drop",s.getEventProperties(t)),!1}if(this.dom.center.addEventListener("dragover",br(v).call(v,this),!1),this.dom.center.addEventListener("drop",br(p).call(p,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root),t.appendChild(this.dom.loadingScreen)}},{key:"setOptions",value:function(t){var i;if(t){if(sf.selectiveExtend(["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","verticalScroll","longSelectPressTime","snap"],this.options,t),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),"object"!==qn(this.options.orientation)&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation={item:t.orientation,axis:t.orientation}:"object"===qn(t.orientation)&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var e=this.timeAxis2=new Nf(this.body);e.setOptions=function(t){var i=t?sf.extend({},t):{};i.orientation="top",Nf.prototype.setOptions.call(e,i)},this.components.push(e)}}else if(this.timeAxis2){var n,r,s=js(n=this.components).call(n,this.timeAxis2);if(-1!==s)Hr(r=this.components).call(r,s,1);this.timeAxis2.destroy(),this.timeAxis2=null}"function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&vf(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new Pf(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(Sr(i=this.components).call(i,(function(i){return i.setOptions(t)})),"configure"in t){var o;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var a=sf.deepExtend({},this.options);Sr(o=this.components).call(o,(function(t){sf.deepExtend(a,t.options)})),this.configurator.setModuleOptions({global:a})}this._redraw()}},{key:"isActive",value:function(){return!this.activator||this.activator.active}},{key:"destroy",value:function(){var t;for(var i in this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator),this.timelineListeners)this.timelineListeners.hasOwnProperty(i)&&delete this.timelineListeners[i];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,Sr(t=this.components).call(t,(function(t){return t.destroy()})),this.body=null}},{key:"setCustomTime",value:function(t,i){var e,n=os(e=this.customTimes).call(e,(function(t){return i===t.options.id}));if(0===n.length)throw new Error("No custom time bar found with id ".concat($s(i)));n.length>0&&n[0].setCustomTime(t)}},{key:"getCustomTime",value:function(t){var i,e=os(i=this.customTimes).call(i,(function(i){return i.options.id===t}));if(0===e.length)throw new Error("No custom time bar found with id ".concat($s(t)));return e[0].getCustomTime()}},{key:"setCustomTimeMarker",value:function(t,i,e){var n,r=os(n=this.customTimes).call(n,(function(t){return t.options.id===i}));if(0===r.length)throw new Error("No custom time bar found with id ".concat($s(i)));r.length>0&&r[0].setCustomMarker(t,e)}},{key:"setCustomTimeTitle",value:function(t,i){var e,n=os(e=this.customTimes).call(e,(function(t){return t.options.id===i}));if(0===n.length)throw new Error("No custom time bar found with id ".concat($s(i)));if(n.length>0)return n[0].setCustomTitle(t)}},{key:"getEventProperties",value:function(t){return{event:t}}},{key:"addCustomTime",value:function(t,i){var e,n=void 0!==t?sf.convert(t,"Date"):new Date;if(ml(e=this.customTimes).call(e,(function(t){return t.options.id===i})))throw new Error("A custom time with id ".concat($s(i)," already exists"));var r=new nd(this.body,sf.extend({},this.options,{time:n,id:i,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(r),this.components.push(r),this._redraw(),i}},{key:"removeCustomTime",value:function(t){var i,e=this,n=os(i=this.customTimes).call(i,(function(i){return i.options.id===t}));if(0===n.length)throw new Error("No custom time bar found with id ".concat($s(t)));Sr(n).call(n,(function(t){var i,n,r,s;Hr(i=e.customTimes).call(i,js(n=e.customTimes).call(n,t),1),Hr(r=e.components).call(r,js(s=e.components).call(s,t),1),t.destroy()}))}},{key:"getVisibleItems",value:function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}},{key:"getItemsAtCurrentTime",value:function(t){return this.time=t,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}},{key:"getVisibleGroups",value:function(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}},{key:"fit",value:function(t,i){var e=this.getDataRange();if(null!==e.min||null!==e.max){var n=e.max-e.min,r=new Date(e.min.valueOf()-.01*n),s=new Date(e.max.valueOf()+.01*n),o=!t||void 0===t.animation||t.animation;this.range.setRange(r,s,{animation:o},i)}}},{key:"getDataRange",value:function(){throw new Error("Cannot invoke abstract method getDataRange")}},{key:"setWindow",value:function(t,i,e,n){var r,s;"function"==typeof arguments[2]&&(n=arguments[2],e={}),1==arguments.length?(r=void 0===(s=arguments[0]).animation||s.animation,this.range.setRange(s.start,s.end,{animation:r})):2==arguments.length&&"function"==typeof arguments[1]?(n=arguments[1],r=void 0===(s=arguments[0]).animation||s.animation,this.range.setRange(s.start,s.end,{animation:r},n)):(r=!e||void 0===e.animation||e.animation,this.range.setRange(t,i,{animation:r},n))}},{key:"moveTo",value:function(t,i,e){"function"==typeof arguments[1]&&(e=arguments[1],i={});var n=this.range.end-this.range.start,r=sf.convert(t,"Date").valueOf(),s=r-n/2,o=r+n/2,a=!i||void 0===i.animation||i.animation;this.range.setRange(s,o,{animation:a},e)}},{key:"getWindow",value:function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}}},{key:"zoomIn",value:function(t,i,e){if(!(!t||t<0||t>1)){"function"==typeof arguments[1]&&(e=arguments[1],i={});var n=this.getWindow(),r=n.start.valueOf(),s=n.end.valueOf(),o=s-r,a=o/(1+t),h=(o-a)/2,u=r+h,l=s-h;this.setWindow(u,l,i,e)}}},{key:"zoomOut",value:function(t,i,e){if(!(!t||t<0||t>1)){"function"==typeof arguments[1]&&(e=arguments[1],i={});var n=this.getWindow(),r=n.start.valueOf(),s=n.end.valueOf(),o=s-r,a=r-o*t/2,h=s+o*t/2;this.setWindow(a,h,i,e)}}},{key:"redraw",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t;this.redrawCount++;var i=this.dom;if(i&&i.container&&0!=i.root.offsetWidth){var e=!1,n=this.options,r=this.props;pf(this.options.moment,this.body,this.options.hiddenDates),"top"==n.orientation?(sf.addClassName(i.root,"vis-top"),sf.removeClassName(i.root,"vis-bottom")):(sf.removeClassName(i.root,"vis-top"),sf.addClassName(i.root,"vis-bottom")),n.rtl?(sf.addClassName(i.root,"vis-rtl"),sf.removeClassName(i.root,"vis-ltr")):(sf.addClassName(i.root,"vis-ltr"),sf.removeClassName(i.root,"vis-rtl")),i.root.style.maxHeight=sf.option.asSize(n.maxHeight,""),i.root.style.minHeight=sf.option.asSize(n.minHeight,""),i.root.style.width=sf.option.asSize(n.width,"");var s=i.root.offsetWidth;r.border.left=1,r.border.right=1,r.border.top=1,r.border.bottom=1,r.center.height=i.center.offsetHeight,r.left.height=i.left.offsetHeight,r.right.height=i.right.offsetHeight,r.top.height=i.top.clientHeight||-r.border.top,r.bottom.height=Math.round(i.bottom.getBoundingClientRect().height)||i.bottom.clientHeight||-r.border.bottom;var o=Math.max(r.left.height,r.center.height,r.right.height),a=r.top.height+o+r.bottom.height+r.border.top+r.border.bottom;i.root.style.height=sf.option.asSize(n.height,"".concat(a,"px")),r.root.height=i.root.offsetHeight,r.background.height=r.root.height;var h=r.root.height-r.top.height-r.bottom.height;r.centerContainer.height=h,r.leftContainer.height=h,r.rightContainer.height=r.leftContainer.height,r.root.width=s,r.background.width=r.root.width,this.initialDrawDone||(r.scrollbarWidth=sf.getScrollBarWidth());var u=i.leftContainer.clientWidth,l=i.rightContainer.clientWidth;n.verticalScroll?n.rtl?(r.left.width=u||-r.border.left,r.right.width=l+r.scrollbarWidth||-r.border.right):(r.left.width=u+r.scrollbarWidth||-r.border.left,r.right.width=l||-r.border.right):(r.left.width=u||-r.border.left,r.right.width=l||-r.border.right),this._setDOM();var c=this._updateScrollTop();"top"!=n.orientation.item&&(c+=Math.max(r.centerContainer.height-r.center.height-r.border.top-r.border.bottom,0)),i.center.style.transform="translateY(".concat(c,"px)");var f=0==r.scrollTop?"hidden":"",d=r.scrollTop==r.scrollTopMin?"hidden":"";i.shadowTop.style.visibility=f,i.shadowBottom.style.visibility=d,i.shadowTopLeft.style.visibility=f,i.shadowBottomLeft.style.visibility=d,i.shadowTopRight.style.visibility=f,i.shadowBottomRight.style.visibility=d,n.verticalScroll&&(i.rightContainer.className="vis-panel vis-right vis-vertical-scroll",i.leftContainer.className="vis-panel vis-left vis-vertical-scroll",i.shadowTopRight.style.visibility="hidden",i.shadowBottomRight.style.visibility="hidden",i.shadowTopLeft.style.visibility="hidden",i.shadowBottomLeft.style.visibility="hidden",i.left.style.top="0px",i.right.style.top="0px"),(!n.verticalScroll||r.center.height<r.centerContainer.height)&&(i.left.style.top="".concat(c,"px"),i.right.style.top="".concat(c,"px"),i.rightContainer.className=i.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),i.leftContainer.className=i.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),r.left.width=u||-r.border.left,r.right.width=l||-r.border.right,this._setDOM());var v=r.center.height>r.centerContainer.height;this.hammer.get("pan").set({direction:v?Of.DIRECTION_ALL:Of.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),Sr(t=this.components).call(t,(function(t){e=t.redraw()||e}));if(e){if(this.redrawCount<5)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.body.emitter.emit("changed")}}},{key:"_setDOM",value:function(){var t=this.props,i=this.dom;t.leftContainer.width=t.left.width,t.rightContainer.width=t.right.width;var e=t.root.width-t.left.width-t.right.width;t.center.width=e,t.centerContainer.width=e,t.top.width=e,t.bottom.width=e,i.background.style.height="".concat(t.background.height,"px"),i.backgroundVertical.style.height="".concat(t.background.height,"px"),i.backgroundHorizontal.style.height="".concat(t.centerContainer.height,"px"),i.centerContainer.style.height="".concat(t.centerContainer.height,"px"),i.leftContainer.style.height="".concat(t.leftContainer.height,"px"),i.rightContainer.style.height="".concat(t.rightContainer.height,"px"),i.background.style.width="".concat(t.background.width,"px"),i.backgroundVertical.style.width="".concat(t.centerContainer.width,"px"),i.backgroundHorizontal.style.width="".concat(t.background.width,"px"),i.centerContainer.style.width="".concat(t.center.width,"px"),i.top.style.width="".concat(t.top.width,"px"),i.bottom.style.width="".concat(t.bottom.width,"px"),i.background.style.left="0",i.background.style.top="0",i.backgroundVertical.style.left="".concat(t.left.width+t.border.left,"px"),i.backgroundVertical.style.top="0",i.backgroundHorizontal.style.left="0",i.backgroundHorizontal.style.top="".concat(t.top.height,"px"),i.centerContainer.style.left="".concat(t.left.width,"px"),i.centerContainer.style.top="".concat(t.top.height,"px"),i.leftContainer.style.left="0",i.leftContainer.style.top="".concat(t.top.height,"px"),i.rightContainer.style.left="".concat(t.left.width+t.center.width,"px"),i.rightContainer.style.top="".concat(t.top.height,"px"),i.top.style.left="".concat(t.left.width,"px"),i.top.style.top="0",i.bottom.style.left="".concat(t.left.width,"px"),i.bottom.style.top="".concat(t.top.height+t.centerContainer.height,"px"),i.center.style.left="0",i.left.style.left="0",i.right.style.left="0"}},{key:"setCurrentTime",value:function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)}},{key:"getCurrentTime",value:function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}},{key:"_toTime",value:function(t){return bf(this,t,this.props.center.width)}},{key:"_toGlobalTime",value:function(t){return bf(this,t,this.props.root.width)}},{key:"_toScreen",value:function(t){return yf(this,t,this.props.center.width)}},{key:"_toGlobalScreen",value:function(t){return yf(this,t,this.props.root.width)}},{key:"_initAutoResize",value:function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()}},{key:"_startAutoResize",value:function(){var t=this;this._stopAutoResize(),this._onResize=function(){if(1==t.options.autoResize){if(t.dom.root){var i=t.dom.root.offsetHeight,e=t.dom.root.offsetWidth;e==t.props.lastWidth&&i==t.props.lastHeight||(t.props.lastWidth=e,t.props.lastHeight=i,t.props.scrollbarWidth=sf.getScrollBarWidth(),t.body.emitter.emit("_change"))}}else t._stopAutoResize()},sf.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=Af(this._onResize,1e3)}},{key:"_stopAutoResize",value:function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(sf.removeEventListener(window,"resize",this._onResize),this._onResize=null)}},{key:"_onTouch",value:function(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}},{key:"_onPinch",value:function(t){this.touch.allowDragging=!1}},{key:"_onDrag",value:function(t){if(t&&this.touch.allowDragging){var i=t.deltaY,e=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+i);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),n!=e&&this.emit("verticalDrag")}}},{key:"_setScrollTop",value:function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop}},{key:"_updateScrollTop",value:function(){var t=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return t!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}},{key:"_getScrollTop",value:function(){return this.props.scrollTop}},{key:"_createConfigurator",value:function(){throw new Error("Cannot invoke abstract method _createConfigurator")}}]),t}();function sd(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}Js(rd.prototype);var od=function(t){hu(e,t);var i=sd(e);function e(t,n){var r,s;fn(this,e),(s=i.call(this)).body=t,s.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:Zl,locales:id,locale:"en"},s.options=sf.extend({},s.defaultOptions),s.setOptions(n),s.options.locales=sf.extend({},id,s.options.locales);var o=s.defaultOptions.locales[s.defaultOptions.locale];return Sr(r=cr(s.options.locales)).call(r,(function(t){s.options.locales[t]=sf.extend({},o,s.options.locales[t])})),s.offset=0,s._create(),s}return vn(e,[{key:"_create",value:function(){var t=document.createElement("div");t.className="vis-current-time",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t}},{key:"destroy",value:function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}},{key:"setOptions",value:function(t){t&&sf.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,t)}},{key:"redraw",value:function(){if(this.options.showCurrentTime){var t,i,e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());var n=this.options.moment(fr()+this.offset);this.options.alignCurrentTime&&(n=n.startOf(this.options.alignCurrentTime));var r=this.body.util.toScreen(n),s=this.options.locales[this.options.locale];s||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),s=this.options.locales.en);var o=ir(t=ir(i="".concat(s.current," ")).call(i,s.time,": ")).call(t,n.format("dddd, MMMM Do YYYY, H:mm:ss"));o=o.charAt(0).toUpperCase()+o.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(-1*r,"px)"):this.bar.style.transform="translateX(".concat(r,"px)"),this.bar.title=o}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}},{key:"start",value:function(){var t=this;!function i(){t.stop();var e=1/t.body.range.conversion(t.body.domProps.center.width).scale/10;e<30&&(e=30),e>1e3&&(e=1e3),t.redraw(),t.body.emitter.emit("currentTimeTick"),t.currentTimeTimer=qs(i,e)}()}},{key:"stop",value:function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}},{key:"setCurrentTime",value:function(t){var i=sf.convert(t,"Date").valueOf(),e=fr();this.offset=i-e,this.redraw()}},{key:"getCurrentTime",value:function(){return new Date(fr()+this.offset)}}]),e}(lf),ad=Me.find,hd="find",ud=!0;hd in[]&&Array(1).find((function(){ud=!1})),Mt({target:"Array",proto:!0,forced:ud},{find:function(t){return ad(this,t,arguments.length>1?arguments[1]:void 0)}});var ld=On("Array").find,cd=Array.prototype,fd=function(t){var i=t.find;return t===cd||t instanceof Array&&i===cd.find?ld:i},dd=.001;function vd(t){cl(t).call(t,(function(t,i){return t.data.start-i.data.start}))}function pd(t){cl(t).call(t,(function(t,i){return("end"in t.data?t.data.end:t.data.start)-("end"in i.data?i.data.end:i.data.start)}))}function md(t,i,e,n){if(e)for(var r=0;r<t.length;r++)t[r].top=null;for(r=0;r<t.length;r++){var s=t[r];if(s.stack&&null===s.top){s.top=i.axis;var o=!1;do{for(var a=null,h=0,u=t.length;h<u;h++){var l=t[h];if(o=n()||!1)return!0;if(null!==l.top&&l!==s&&l.stack&&kd(s,l,i.item,l.options.rtl)){a=l;break}}null!=a&&(s.top=a.top+a.height+i.item.vertical)}while(a)}}return o}function gd(t,i,e){for(var n=0;n<t.length;n++)t[n].top=null;var r=e.height;for(n=0;n<t.length;n++){var s=t[n];if(s.stack&&null===s.top){s.top=s.baseTop;do{for(var o=null,a=0,h=t.length;a<h;a++){var u=t[a];if(null!==u.top&&u!==s&&kd(s,u,i.item,u.options.rtl)){o=u;break}}null!=o&&(s.top=o.top+o.height+i.item.vertical),s.top+s.height>r&&(r=s.top+s.height)}while(o)}}e.height=r-e.top+.5*i.item.vertical}function yd(t,i,e,n){for(var r=0;r<t.length;r++)if(null==t[r].data.subgroup)t[r].top=i.item.vertical;else if(void 0!==t[r].data.subgroup&&n){var s=0;for(var o in e)e.hasOwnProperty(o)&&1==e[o].visible&&e[o].index<e[t[r].data.subgroup].index&&(s+=e[o].height,e[t[r].data.subgroup].top=s);t[r].top=s+.5*i.item.vertical}n||bd(t,i,e)}function bd(t,i,e){for(var n in e)if(e.hasOwnProperty(n)){e[n].top=0;do{var r=null;for(var s in e)if(null!==e[s].top&&s!==n&&e[n].index>e[s].index&&_d(e[n],e[s])){r=e[s];break}null!=r&&(e[n].top=r.top+r.height)}while(r)}for(var o=0;o<t.length;o++)void 0!==t[o].data.subgroup&&(t[o].top=e[t[o].data.subgroup].top+.5*i.item.vertical)}function wd(t,i,e){var n=!1,r=[];for(var s in e)e[s].hasOwnProperty("index")?r[e[s].index]=s:r.push(s);for(var o=0;o<r.length;o++)if(s=r[o],e.hasOwnProperty(s)){for(var a in n=n||e[s].stack,e[s].top=0,e)e[a].visible&&e[s].index>e[a].index&&(e[s].top+=e[a].height);for(var h=t[s],u=0;u<h.length;u++)void 0!==h[u].data.subgroup&&(h[u].top=e[h[u].data.subgroup].top+.5*i.item.vertical,e[s].stack&&(h[u].baseTop=h[u].top));n&&e[s].stack&&gd(t[s],i,e[s])}}function kd(t,i,e,n){return n?t.right-e.horizontal+dd<i.right+i.width&&t.right+t.width+e.horizontal-dd>i.right&&t.top-e.vertical+dd<i.top+i.height&&t.top+t.height+e.vertical-dd>i.top:t.left-e.horizontal+dd<i.left+i.width&&t.left+t.width+e.horizontal-dd>i.left&&t.top-e.vertical+dd<i.top+i.height&&t.top+t.height+e.vertical-dd>i.top}function _d(t,i){var e=t.start<i.end&&t.end>i.start,n=t.top<i.top+i.height&&t.top+t.height>i.top;return e&&n}var xd=Object.freeze({__proto__:null,orderByStart:vd,orderByEnd:pd,stack:md,substack:gd,nostack:yd,stackSubgroups:bd,stackSubgroupsWithInnerStack:wd,collision:kd,collisionByTimes:_d}),Dd="__background__",Md=function(){function t(i,e,n){var r=this;if(fn(this,t),this.groupId=i,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=e&&e.subgroupOrder,this.itemSet=n,this.isVisible=null,this.stackDirty=!0,this._disposeCallbacks=[],e&&e.nestedGroups&&(this.nestedGroups=e.nestedGroups,0==e.showNested?this.showNested=!1:this.showNested=!0),e&&e.subgroupStack)if("boolean"==typeof e.subgroupStack)this.doInnerStack=e.subgroupStack,this.subgroupStackAll=e.subgroupStack;else for(var s in e.subgroupStack)this.subgroupStack[s]=e.subgroupStack[s],this.doInnerStack=this.doInnerStack||e.subgroupStack[s];e&&e.heightMode?this.heightMode=e.heightMode:this.heightMode=n.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=function(){r.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",o),this._disposeCallbacks.push((function(){r.itemSet.body.emitter.off("checkRangedItems",o)})),this._create(),this.setData(e)}return vn(t,[{key:"_create",value:function(){var t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;var i=document.createElement("div");i.className="vis-inner",t.appendChild(i),this.dom.inner=i;var e=document.createElement("div");e.className="vis-group",e["vis-group"]=this,this.dom.foreground=e,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}},{key:"setData",value:function(t){if(!this.itemSet.groupTouchParams.isDragging){var i,e,n;if(t&&t.subgroupVisibility)for(var r in t.subgroupVisibility)this.subgroupVisibility[r]=t.subgroupVisibility[r];if(this.itemSet.options&&this.itemSet.options.groupTemplate)i=(e=br(n=this.itemSet.options.groupTemplate).call(n,this))(t,this.dom.inner);else i=t&&t.content;if(i instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(i)}else i instanceof Object&&i.isReactComponent||(i instanceof Object?e(t,this.dom.inner):this.dom.inner.innerHTML=null!=i?sf.xss(i):sf.xss(this.groupId||""));this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?sf.removeClassName(this.dom.inner,"vis-hidden"):sf.addClassName(this.dom.inner,"vis-hidden"),t&&t.nestedGroups?(this.nestedGroups&&this.nestedGroups==t.nestedGroups||(this.nestedGroups=t.nestedGroups),void 0===t.showNested&&void 0!==this.showNested||(0==t.showNested?this.showNested=!1:this.showNested=!0),sf.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(sf.removeClassName(this.dom.label,"collapsed"),sf.addClassName(this.dom.label,"expanded")):(sf.removeClassName(this.dom.label,"expanded"),sf.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,sf.removeClassName(this.dom.label,"collapsed"),sf.removeClassName(this.dom.label,"expanded"),sf.removeClassName(this.dom.label,"vis-nesting-group")),t&&(t.treeLevel||t.nestedInGroup)?(sf.addClassName(this.dom.label,"vis-nested-group"),t.treeLevel?sf.addClassName(this.dom.label,"vis-group-level-"+t.treeLevel):sf.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):sf.addClassName(this.dom.label,"vis-group-level-0");var s=t&&t.className||null;s!=this.className&&(this.className&&(sf.removeClassName(this.dom.label,this.className),sf.removeClassName(this.dom.foreground,this.className),sf.removeClassName(this.dom.background,this.className),sf.removeClassName(this.dom.axis,this.className)),sf.addClassName(this.dom.label,s),sf.addClassName(this.dom.foreground,s),sf.addClassName(this.dom.background,s),sf.addClassName(this.dom.axis,s),this.className=s),this.style&&(sf.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(sf.addCssText(this.dom.label,t.style),this.style=t.style)}}},{key:"getLabelWidth",value:function(){return this.props.label.width}},{key:"_didMarkerHeightChange",value:function(){var t=this.dom.marker.clientHeight;if(t!=this.lastMarkerHeight){this.lastMarkerHeight=t;var i={},e=0;if(Sr(sf).call(sf,this.items,(function(t,n){if(t.dirty=!0,t.displayed){i[n]=t.redraw(!0),e=i[n].length}})),e>0)for(var n=function(t){Sr(sf).call(sf,i,(function(i){i[t]()}))},r=0;r<e;r++)n(r);return!0}return!1}},{key:"_calculateGroupSizeAndPosition",value:function(){var t=this.dom.foreground,i=t.offsetTop,e=t.offsetLeft,n=t.offsetWidth;this.top=i,this.right=e,this.width=n}},{key:"_shouldBailItemsRedraw",value:function(){var t=this,i=this.itemSet.options.onTimeout,e={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:i&&i.timeoutMs,userBailFunction:i&&i.callback,shouldBailStackItems:this.shouldBailStackItems},n=null;if(!this.itemSet.initialDrawDone){if(e.shouldBailStackItems)return!0;Math.abs(fr()-new Date(e.relativeBailingTime))>e.bailTimeMs&&(e.userBailFunction&&null==this.itemSet.userContinueNotBail?e.userBailFunction((function(i){t.itemSet.userContinueNotBail=i,n=!i})):n=0==t.itemSet.userContinueNotBail)}return n}},{key:"_redrawItems",value:function(t,i,e,n){var r=this;if(t||this.stackDirty||this.isVisible&&!i){var s,o,a,h,u,l,c={byEnd:os(s=this.orderedItems.byEnd).call(s,(function(t){return!t.isCluster})),byStart:os(o=this.orderedItems.byStart).call(o,(function(t){return!t.isCluster}))},f={byEnd:Jn(new Wu(os(a=ur(h=this.orderedItems.byEnd).call(h,(function(t){return t.cluster}))).call(a,(function(t){return!!t})))),byStart:Jn(new Wu(os(u=ur(l=this.orderedItems.byStart).call(l,(function(t){return t.cluster}))).call(u,(function(t){return!!t}))))},d=function(){var t,i,e,s=r._updateItemsInRange(c,os(t=r.visibleItems).call(t,(function(t){return!t.isCluster})),n),o=r._updateClustersInRange(f,os(i=r.visibleItems).call(i,(function(t){return t.isCluster})),n);return ir(e=[]).call(e,Jn(s),Jn(o))},v=function(t){var i={},e=function(e){var n,s=os(n=r.visibleItems).call(n,(function(t){return t.data.subgroup===e}));i[e]=t?cl(s).call(s,(function(i,e){return t(i.data,e.data)})):s};for(var n in r.subgroups)e(n);return i};if("function"==typeof this.itemSet.options.order){var p=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){wd(v(this.itemSet.options.order),e,this.subgroups),this.visibleItems=d(),this._updateSubGroupHeights(e)}else{var m,g,y,b;this.visibleItems=d(),this._updateSubGroupHeights(e);var w=cl(m=os(g=er(y=this.visibleItems).call(y)).call(g,(function(t){return t.isCluster||!t.isCluster&&!t.cluster}))).call(m,(function(t,i){return p.itemSet.options.order(t.data,i.data)}));this.shouldBailStackItems=md(w,e,!0,br(b=this._shouldBailItemsRedraw).call(b,this))}}else{var k;if(this.visibleItems=d(),this._updateSubGroupHeights(e),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups)wd(v(),e,this.subgroups);else this.shouldBailStackItems=md(this.visibleItems,e,!0,br(k=this._shouldBailItemsRedraw).call(k,this));else yd(this.visibleItems,e,this.subgroups,this.itemSet.options.stackSubgroups)}for(var _=0;_<this.visibleItems.length;_++)this.visibleItems[_].repositionX(),void 0!==this.subgroupVisibility[this.visibleItems[_].data.subgroup]&&(this.subgroupVisibility[this.visibleItems[_].data.subgroup]||this.visibleItems[_].hide());this.itemSet.options.cluster&&Sr(sf).call(sf,this.items,(function(t){t.cluster&&t.displayed&&t.hide()})),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}},{key:"_didResize",value:function(t,i){t=sf.updateProperty(this,"height",i)||t;var e=this.dom.inner.clientWidth,n=this.dom.inner.clientHeight;return t=sf.updateProperty(this.props.label,"width",e)||t,t=sf.updateProperty(this.props.label,"height",n)||t}},{key:"_applyGroupHeight",value:function(t){this.dom.background.style.height="".concat(t,"px"),this.dom.foreground.style.height="".concat(t,"px"),this.dom.label.style.height="".concat(t,"px")}},{key:"_updateItemsVerticalPosition",value:function(t){for(var i=0,e=this.visibleItems.length;i<e;i++){var n=this.visibleItems[i];n.repositionY(t),this.isVisible||this.groupId==Dd||n.displayed&&n.hide()}}},{key:"redraw",value:function(t,i,e,n){var r,s,o,a,h,u,l,c=this,f=!1,d=this.isVisible,v=[function(){e=c._didMarkerHeightChange.call(c)||e},br(r=this._updateSubGroupHeights).call(r,this,i),br(s=this._calculateGroupSizeAndPosition).call(s,this),function(){var e;c.isVisible=br(e=c._isGroupVisible).call(e,c)(t,i)},function(){var n;br(n=c._redrawItems).call(n,c)(e,d,i,t)},br(o=this._updateSubgroupsSizes).call(o,this),function(){var t;u=br(t=c._calculateHeight).call(t,c)(i)},br(a=this._calculateGroupSizeAndPosition).call(a,this),function(){var t;f=br(t=c._didResize).call(t,c)(f,u)},function(){var t;br(t=c._applyGroupHeight).call(t,c)(u)},function(){var t;br(t=c._updateItemsVerticalPosition).call(t,c)(i)},br(h=function(){return!c.isVisible&&c.height&&(f=!1),f}).call(h,this)];return n?v:(Sr(v).call(v,(function(t){l=t()})),l)}},{key:"_updateSubGroupHeights",value:function(t){var i=this;if(cr(this.subgroups).length>0){var e=this;this._resetSubgroups(),Sr(sf).call(sf,this.visibleItems,(function(n){void 0!==n.data.subgroup&&(e.subgroups[n.data.subgroup].height=Math.max(e.subgroups[n.data.subgroup].height,n.height+t.item.vertical),e.subgroups[n.data.subgroup].visible=void 0===i.subgroupVisibility[n.data.subgroup]||Boolean(i.subgroupVisibility[n.data.subgroup]))}))}}},{key:"_isGroupVisible",value:function(t,i){return this.top<=t.body.domProps.centerContainer.height-t.body.domProps.scrollTop+i.axis&&this.top+this.height+i.axis>=-t.body.domProps.scrollTop}},{key:"_calculateHeight",value:function(t){var i,e;if((e="fixed"===this.heightMode?sf.toArray(this.items):this.visibleItems).length>0){var n=e[0].top,r=e[0].top+e[0].height;if(Sr(sf).call(sf,e,(function(t){n=Math.min(n,t.top),r=Math.max(r,t.top+t.height)})),n>t.axis){var s=n-t.axis;r-=s,Sr(sf).call(sf,e,(function(t){t.top-=s}))}i=Math.ceil(r+t.item.vertical/2),"fitItems"!==this.heightMode&&(i=Math.max(i,this.props.label.height))}else i=this.props.label.height;return i}},{key:"show",value:function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}},{key:"hide",value:function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var i=this.dom.foreground;i.parentNode&&i.parentNode.removeChild(i);var e=this.dom.background;e.parentNode&&e.parentNode.removeChild(e);var n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)}},{key:"add",value:function(t){var i;if(this.items[t.id]=t,t.setParent(this),this.stackDirty=!0,void 0!==t.data.subgroup&&(this._addToSubgroup(t),this.orderSubgroups()),!Kr(i=this.visibleItems).call(i,t)){var e=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,e)}}},{key:"_addToSubgroup",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.data.subgroup;null!=i&&void 0===this.subgroups[i]&&(this.subgroups[i]={height:0,top:0,start:t.data.start,end:t.data.end||t.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[i]||!1},this.subgroupIndex++),new Date(t.data.start)<new Date(this.subgroups[i].start)&&(this.subgroups[i].start=t.data.start);var e=t.data.end||t.data.start;new Date(e)>new Date(this.subgroups[i].end)&&(this.subgroups[i].end=e),this.subgroups[i].items.push(t)}},{key:"_updateSubgroupsSizes",value:function(){var t=this;if(t.subgroups){var i=function(i){var e,n=t.subgroups[i].items[0].data.end||t.subgroups[i].items[0].data.start,r=t.subgroups[i].items[0].data.start,s=n-1;Sr(e=t.subgroups[i].items).call(e,(function(t){new Date(t.data.start)<new Date(r)&&(r=t.data.start);var i=t.data.end||t.data.start;new Date(i)>new Date(s)&&(s=i)})),t.subgroups[i].start=r,t.subgroups[i].end=new Date(s-1)};for(var e in t.subgroups)i(e)}}},{key:"orderSubgroups",value:function(){if(void 0!==this.subgroupOrderer){var t=[];if("string"==typeof this.subgroupOrderer){for(var i in this.subgroups)t.push({subgroup:i,sortField:this.subgroups[i].items[0].data[this.subgroupOrderer]});cl(t).call(t,(function(t,i){return t.sortField-i.sortField}))}else if("function"==typeof this.subgroupOrderer){for(var e in this.subgroups)t.push(this.subgroups[e].items[0].data);cl(t).call(t,this.subgroupOrderer)}if(t.length>0)for(var n=0;n<t.length;n++)this.subgroups[t[n].subgroup].index=n}}},{key:"_resetSubgroups",value:function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1,this.subgroups[t].height=0)}},{key:"remove",value:function(t){var i,e;delete this.items[t.id],t.setParent(null),this.stackDirty=!0;var n=js(i=this.visibleItems).call(i,t);-1!=n&&Hr(e=this.visibleItems).call(e,n,1),void 0!==t.data.subgroup&&(this._removeFromSubgroup(t),this.orderSubgroups())}},{key:"_removeFromSubgroup",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.data.subgroup;if(null!=i){var e=this.subgroups[i];if(e){var n,r,s=js(n=e.items).call(n,t);if(s>=0)Hr(r=e.items).call(r,s,1),e.items.length?this._updateSubgroupsSizes():delete this.subgroups[i]}}}},{key:"removeFromDataSet",value:function(t){this.itemSet.removeItem(t.id)}},{key:"order",value:function(){for(var t=sf.toArray(this.items),i=[],e=[],n=0;n<t.length;n++)void 0!==t[n].data.end&&e.push(t[n]),i.push(t[n]);this.orderedItems={byStart:i,byEnd:e},vd(this.orderedItems.byStart),pd(this.orderedItems.byEnd)}},{key:"_updateItemsInRange",value:function(t,i,e){var n=[],r={};if(!this.isVisible&&this.groupId!=Dd){for(var s=0;s<i.length;s++){var o=i[s];o.displayed&&o.hide()}return n}var a=(e.end-e.start)/4,h=e.start-a,u=e.end+a;if(i.length>0)for(var l=0;l<i.length;l++)this._checkIfVisibleWithReference(i[l],n,r,e);var c=sf.binarySearchCustom(t.byStart,(function(t){return t<h?-1:t<=u?0:1}),"data","start");if(this._traceVisible(c,t.byStart,n,r,(function(t){return t.data.start<h||t.data.start>u})),1==this.checkRangedItems){this.checkRangedItems=!1;for(var f=0;f<t.byEnd.length;f++)this._checkIfVisibleWithReference(t.byEnd[f],n,r,e)}else{var d=sf.binarySearchCustom(t.byEnd,(function(t){var i=t.start;return t.end<h?-1:i<=u?0:1}),"data");this._traceVisible(d,t.byEnd,n,r,(function(t){return t.data.end<h||t.data.start>u}))}for(var v={},p=0,m=0;m<n.length;m++){var g=n[m];if(!g.displayed){v[m]=g.redraw(!0),p=v[m].length}}if(p>0)for(var y=function(t){Sr(sf).call(sf,v,(function(i){i[t]()}))},b=0;b<p;b++)y(b);for(var w=0;w<n.length;w++)n[w].repositionX();return n}},{key:"_traceVisible",value:function(t,i,e,n,r){if(-1!=t){for(var s=t;s>=0;s--){var o=i[s];if(r(o))break;o.isCluster&&!o.hasItems()||o.cluster||void 0===n[o.id]&&(n[o.id]=!0,e.push(o))}for(var a=t+1;a<i.length;a++){var h=i[a];if(r(h))break;h.isCluster&&!h.hasItems()||h.cluster||void 0===n[h.id]&&(n[h.id]=!0,e.push(h))}}}},{key:"_checkIfVisible",value:function(t,i,e){t.isVisible(e)?(t.displayed||t.show(),t.repositionX(),i.push(t)):t.displayed&&t.hide()}},{key:"_checkIfVisibleWithReference",value:function(t,i,e,n){t.isVisible(n)?void 0===e[t.id]&&(e[t.id]=!0,i.push(t)):t.displayed&&t.hide()}},{key:"_updateClustersInRange",value:function(t,i,e){var n=[],r={};if(i.length>0)for(var s=0;s<i.length;s++)this._checkIfVisibleWithReference(i[s],n,r,e);for(var o=0;o<t.byStart.length;o++)this._checkIfVisibleWithReference(t.byStart[o],n,r,e);for(var a=0;a<t.byEnd.length;a++)this._checkIfVisibleWithReference(t.byEnd[a],n,r,e);for(var h={},u=0,l=0;l<n.length;l++){var c=n[l];if(!c.displayed){h[l]=c.redraw(!0),u=h[l].length}}if(u>0)for(var f=0;f<u;f++)Sr(sf).call(sf,h,(function(t){t[f]()}));for(var d=0;d<n.length;d++)n[d].repositionX();return n}},{key:"changeSubgroup",value:function(t,i,e){this._removeFromSubgroup(t,i),this._addToSubgroup(t,e),this.orderSubgroups()}},{key:"dispose",value:function(){var t;for(this.hide();t=this._disposeCallbacks.pop();)t()}}]),t}();function Sd(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var Fd=function(t){hu(e,t);var i=Sd(e);function e(t,n,r){var s;return fn(this,e),(s=i.call(this,t,n,r)).width=0,s.height=0,s.top=0,s.left=0,s}return vn(e,[{key:"redraw",value:function(t,i,e){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,t),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var n=0,r=this.visibleItems.length;n<r;n++){this.visibleItems[n].repositionY(i)}return!1}},{key:"show",value:function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}]),e}(Md);function Td(t,i){var e=void 0!==Kn&&ue(t)||t["@@iterator"];if(!e){if(rr(t)||(e=function(t,i){var e;if(!t)return;if("string"==typeof t)return jd(t,i);var n=er(e=Object.prototype.toString.call(t)).call(e,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return ie(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jd(t,i)}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw s}}}}function jd(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}var Yd=function(){function t(i,e,n){var r,s=this;fn(this,t),this.id=null,this.parent=null,this.data=i,this.dom=null,this.conversion=e||{},this.defaultOptions={locales:id,locale:"en"},this.options=sf.extend({},this.defaultOptions,n),this.options.locales=sf.extend({},id,this.options.locales);var o=this.defaultOptions.locales[this.defaultOptions.locale];Sr(r=cr(this.options.locales)).call(r,(function(t){s.options.locales[t]=sf.extend({},o,s.options.locales[t])})),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=n&&n.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(i),this.editable=null,this._updateEditStatus()}return vn(t,[{key:"select",value:function(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}},{key:"unselect",value:function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}},{key:"setData",value:function(t){null!=t.group&&this.data.group!=t.group&&null!=this.parent&&this.parent.itemSet._moveToGroup(this,t.group),this.setSelectability(t),this.parent&&(this.parent.stackDirty=!0),null!=t.subgroup&&this.data.subgroup!=t.subgroup&&null!=this.parent&&this.parent.changeSubgroup(this,this.data.subgroup,t.subgroup),this.data=t,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}},{key:"setSelectability",value:function(t){t&&(this.selectable=void 0===t.selectable||Boolean(t.selectable))}},{key:"setParent",value:function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t}},{key:"isVisible",value:function(t){return!1}},{key:"show",value:function(){return!1}},{key:"hide",value:function(){return!1}},{key:"redraw",value:function(){}},{key:"repositionX",value:function(){}},{key:"repositionY",value:function(){}},{key:"_repaintDragCenter",value:function(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var t,i,e=this,n=document.createElement("div");n.className="vis-drag-center",n.dragCenterItem=this,this.hammerDragCenter=new Of(n),this.hammerDragCenter.on("tap",(function(t){e.parent.itemSet.body.emitter.emit("click",{event:t,item:e.id})})),this.hammerDragCenter.on("doubletap",(function(t){t.stopPropagation(),e.parent.itemSet._onUpdateItem(e),e.parent.itemSet.body.emitter.emit("doubleClick",{event:t,item:e.id})})),this.hammerDragCenter.on("panstart",(function(t){t.stopPropagation(),e.parent.itemSet._onDragStart(t)})),this.hammerDragCenter.on("panmove",br(t=e.parent.itemSet._onDrag).call(t,e.parent.itemSet)),this.hammerDragCenter.on("panend",br(i=e.parent.itemSet._onDragEnd).call(i,e.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(n,this.dom.dragLeft):this.dom.box.appendChild(n):this.dom.point&&this.dom.point.appendChild(n),this.dom.dragCenter=n}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}},{key:"_repaintDeleteButton",value:function(t){var i=(this.options.editable.overrideItems||null==this.editable)&&this.options.editable.remove||!this.options.editable.overrideItems&&null!=this.editable&&this.editable.remove;if(this.selected&&i&&!this.dom.deleteButton){var e=this,n=document.createElement("div");this.options.rtl?n.className="vis-delete-rtl":n.className="vis-delete";var r=this.options.locales[this.options.locale];r||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),r=this.options.locales.en),n.title=r.deleteSelected,this.hammerDeleteButton=new Of(n).on("tap",(function(t){t.stopPropagation(),e.parent.removeFromDataSet(e)})),t.appendChild(n),this.dom.deleteButton=n}else this.selected&&i||!this.dom.deleteButton||(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}},{key:"_repaintOnItemUpdateTimeTooltip",value:function(t){if(this.options.tooltipOnItemUpdateTime){var i=(this.options.editable.updateTime||!0===this.data.editable)&&!1!==this.data.editable;if(this.selected&&i&&!this.dom.onItemUpdateTimeTooltip){var e=document.createElement("div");e.className="vis-onUpdateTime-tooltip",t.appendChild(e),this.dom.onItemUpdateTimeTooltip=e}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";var n,r,s=this.parent.itemSet.body.domProps.scrollTop;if(("top"==this.options.orientation.item?this.top:this.parent.height-this.top-this.height)+this.parent.top-50<-s?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px")),this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template)n=br(r=this.options.tooltipOnItemUpdateTime.template).call(r,this)(this.data);else n="start: ".concat(Zl(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(n+="<br> end: ".concat(Zl(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=sf.xss(n)}}}},{key:"_getItemData",value:function(){return this.parent.itemSet.itemsData.get(this.id)}},{key:"_updateContents",value:function(t){var i,e,n,r,s,o,a=this._getItemData(),h=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];this.options.visibleFrameTemplate?(r=br(s=this.options.visibleFrameTemplate).call(s,this),n=sf.xss(r(a,h))):n="";if(h)if(n instanceof Object&&!(n instanceof Element))r(a,h);else if(this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(n)){if(n instanceof Element)h.innerHTML="",h.appendChild(n);else if(null!=n)h.innerHTML=sf.xss(n);else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=n}this.options.template?i=(e=br(o=this.options.template).call(o,this))(a,t,this.data):i=this.data.content;if(i instanceof Object&&!(i instanceof Element))e(a,t);else if(this._contentToString(this.content)!==this._contentToString(i)){if(i instanceof Element)t.innerHTML="",t.appendChild(i);else if(null!=i)t.innerHTML=sf.xss(i);else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '.concat(this.id));this.content=i}}},{key:"_updateDataAttributes",value:function(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var i=[];if(rr(this.options.dataAttributes))i=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;i=cr(this.data)}var e,n=Td(i);try{for(n.s();!(e=n.n()).done;){var r=e.value,s=this.data[r];null!=s?t.setAttribute("data-".concat(r),s):t.removeAttribute("data-".concat(r))}}catch(t){n.e(t)}finally{n.f()}}}},{key:"_updateStyle",value:function(t){this.style&&(sf.removeCssText(t,this.style),this.style=null),this.data.style&&(sf.addCssText(t,this.data.style),this.style=this.data.style)}},{key:"_contentToString",value:function(t){return"string"==typeof t?t:t&&"outerHTML"in t?t.outerHTML:t}},{key:"_updateEditStatus",value:function(){this.options&&("boolean"==typeof this.options.editable?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:"object"===qn(this.options.editable)&&(this.editable={},sf.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),this.options&&this.options.editable&&!0===this.options.editable.overrideItems||this.data&&("boolean"==typeof this.data.editable?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:"object"===qn(this.data.editable)&&(this.editable={},sf.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}},{key:"getWidthLeft",value:function(){return 0}},{key:"getWidthRight",value:function(){return 0}},{key:"getTitle",value:function(){var t;return this.options.tooltip&&this.options.tooltip.template?br(t=this.options.tooltip.template).call(t,this)(this._getItemData(),this.data):this.data.title}}]),t}();function Ed(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}Yd.prototype.stack=!0;var Ad=function(t){hu(e,t);var i=Ed(e);function e(t,n,r){var s;if(fn(this,e),(s=i.call(this,t,n,r)).props={dot:{width:0,height:0},line:{width:0,height:0}},t&&null==t.start)throw new Error('Property "start" missing in item '.concat(t));return s}return vn(e,[{key:"isVisible",value:function(t){if(this.cluster)return!1;var i,e=this.data.align||this.options.align,n=this.width*t.getMillisecondsPerPixel();return i="right"==e?this.data.start.getTime()>t.start&&this.data.start.getTime()-n<t.end:"left"==e?this.data.start.getTime()+n>t.start&&this.data.start.getTime()<t.end:this.data.start.getTime()+n/2>t.start&&this.data.start.getTime()-n/2<t.end,i}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var i=this.parent.dom.background;if(!i)throw new Error("Cannot redraw item: parent has no background container element");i.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var e=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw item: parent has no axis container element");e.appendChild(this.dom.dot)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.editable.updateTime||this.editable.updateGroup,i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(i),this.dom.line.className="vis-item vis-line".concat(i),this.dom.dot.className="vis-item vis-dot".concat(i)}}},{key:"_getDomComponentsSizes",value:function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(t){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=t.dot.height,this.props.dot.width=t.dot.width,this.props.line.width=t.line.width,this.width=t.box.width,this.height=t.box.height,this.options.rtl?this.dom.box.style.right=t.previous.right:this.dom.box.style.left=t.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}},{key:"redraw",value:function(t){var i,e,n,r,s,o,a=this,h=[br(i=this._createDomElement).call(i,this),br(e=this._appendDomElement).call(e,this),br(n=this._updateDirtyDomComponents).call(n,this),function(){a.dirty&&(s=a._getDomComponentsSizes())},function(){var t;a.dirty&&br(t=a._updateDomComponentsSizes).call(t,a)(s)},br(r=this._repaintDomAdditionals).call(r,this)];return t?h:(Sr(h).call(h,(function(t){o=t()})),o)}},{key:"show",value:function(t){if(!this.displayed)return this.redraw(t)}},{key:"hide",value:function(){if(this.displayed){var t=this.dom;t.box.remove?t.box.remove():t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.remove?t.line.remove():t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.remove?t.dot.remove():t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.displayed=!1}}},{key:"repositionXY",value:function(){var t=this.options.rtl,i=function(t,i,e){var n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==i||void 0!==e){var s=r?-1*i:i;t.style.transform=void 0!==e?void 0!==i?ir(n="translate(".concat(s,"px, ")).call(n,e,"px)"):"translateY(".concat(e,"px)"):"translateX(".concat(s,"px)")}};i(this.dom.box,this.boxX,this.boxY,t),i(this.dom.dot,this.dotX,this.dotY,t),i(this.dom.line,this.lineX,this.lineY,t)}},{key:"repositionX",value:function(){var t=this.conversion.toScreen(this.data.start),i=void 0===this.data.align?this.options.align:this.data.align,e=this.props.line.width,n=this.props.dot.width;"right"==i?(this.boxX=t-this.width,this.lineX=t-e,this.dotX=t-e/2-n/2):"left"==i?(this.boxX=t,this.lineX=t,this.dotX=t+e/2-n/2):(this.boxX=t-this.width/2,this.lineX=this.options.rtl?t-e:t-e/2,this.dotX=t-n/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}},{key:"repositionY",value:function(){var t=this.options.orientation.item,i=this.dom.line.style;if("top"==t){var e=this.parent.top+this.top+1;this.boxY=this.top||0,i.height="".concat(e,"px"),i.bottom="",i.top="0"}else{var n=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),i.height="".concat(n,"px"),i.top="",i.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}}]),e}(Yd);function Cd(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var Od=function(t){hu(e,t);var i=Cd(e);function e(t,n,r){var s;if(fn(this,e),(s=i.call(this,t,n,r)).props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},t&&null==t.start)throw new Error('Property "start" missing in item '.concat(t));return s}return vn(e,[{key:"isVisible",value:function(t){if(this.cluster)return!1;var i=this.width*t.getMillisecondsPerPixel();return this.data.start.getTime()+i>t.start&&this.data.start<t.end}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.point)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var t=this.editable.updateTime||this.editable.updateGroup,i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(i),this.dom.dot.className="vis-item vis-dot".concat(i)}}},{key:"_getDomComponentsSizes",value:function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(t){this.props.dot.width=t.dot.width,this.props.dot.height=t.dot.height,this.props.content.height=t.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=t.point.width,this.height=t.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");var i=this.props.dot.width,e=this.options.rtl?i/2:i/2*-1;this.dom.dot.style.transform="translateX(".concat(e,"px"),this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}},{key:"redraw",value:function(t){var i,e,n,r,s,o,a=this,h=[br(i=this._createDomElement).call(i,this),br(e=this._appendDomElement).call(e,this),br(n=this._updateDirtyDomComponents).call(n,this),function(){a.dirty&&(s=a._getDomComponentsSizes())},function(){var t;a.dirty&&br(t=a._updateDomComponentsSizes).call(t,a)(s)},br(r=this._repaintDomAdditionals).call(r,this)];return t?h:(Sr(h).call(h,(function(t){o=t()})),o)}},{key:"repositionXY",value:function(){var t=this.options.rtl,i=function(t,i,e){var n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==i||void 0!==e){var s=r?-1*i:i;t.style.transform=void 0!==e?void 0!==i?ir(n="translate(".concat(s,"px, ")).call(n,e,"px)"):"translateY(".concat(e,"px)"):"translateX(".concat(s,"px)")}};i(this.dom.point,this.pointX,this.pointY,t)}},{key:"show",value:function(t){if(!this.displayed)return this.redraw(t)}},{key:"hide",value:function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}},{key:"repositionX",value:function(){var t=this.conversion.toScreen(this.data.start);this.pointX=t,this.options.rtl?this.right=t-this.props.dot.width:this.left=t-this.props.dot.width,this.repositionXY()}},{key:"repositionY",value:function(){var t=this.options.orientation.item;this.pointY="top"==t?this.top:this.parent.height-this.top-this.height,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.props.dot.width}},{key:"getWidthRight",value:function(){return this.props.dot.width}}]),e}(Yd);function Ld(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var zd=function(t){hu(e,t);var i=Ld(e);function e(t,n,r){var s;if(fn(this,e),(s=i.call(this,t,n,r)).props={content:{width:0}},s.overflow=!1,t){if(null==t.start)throw new Error('Property "start" missing in item '.concat(t.id));if(null==t.end)throw new Error('Property "end" missing in item '.concat(t.id))}return s}return vn(e,[{key:"isVisible",value:function(t){return!this.cluster&&(this.data.start<t.end&&this.data.end>t.start)}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.editable.updateTime||this.editable.updateGroup,i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+i,this.dom.content.style.maxWidth="none"}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.frame).overflow,this.whiteSpace="nowrap"!==window.getComputedStyle(this.dom.content).whiteSpace,{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(t){this.props.content.width=t.content.width,this.height=t.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}},{key:"redraw",value:function(t){var i,e,n,r,s,o,a=this,h=[br(i=this._createDomElement).call(i,this),br(e=this._appendDomElement).call(e,this),br(n=this._updateDirtyDomComponents).call(n,this),function(){var t;a.dirty&&(s=br(t=a._getDomComponentsSizes).call(t,a)())},function(){var t;a.dirty&&br(t=a._updateDomComponentsSizes).call(t,a)(s)},br(r=this._repaintDomAdditionals).call(r,this)];return t?h:(Sr(h).call(h,(function(t){o=t()})),o)}},{key:"show",value:function(t){if(!this.displayed)return this.redraw(t)}},{key:"hide",value:function(){if(this.displayed){var t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.displayed=!1}}},{key:"repositionX",value:function(t){var i,e,n=this.parent.width,r=this.conversion.toScreen(this.data.start),s=this.conversion.toScreen(this.data.end),o=void 0===this.data.align?this.options.align:this.data.align;!1===this.data.limitSize||void 0!==t&&!0!==t||(r<-n&&(r=-n),s>2*n&&(s=2*n));var a=Math.max(Math.round(1e3*(s-r))/1e3,1);switch(this.overflow?(this.options.rtl?this.right=r:this.left=r,this.width=a+this.props.content.width,e=this.props.content.width):(this.options.rtl?this.right=r:this.left=r,this.width=a,e=Math.min(s-r,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(-1*this.right,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(a,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),o){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){var h=-1*Math.max(a-e,0);this.dom.content.style.transform="translateX(".concat(h,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(a-e,0),"px)");break;case"center":if(this.options.rtl){var u=-1*Math.max((a-e)/2,0);this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((a-e)/2,0),"px)");break;default:if(i=this.overflow?s>0?Math.max(-r,0):-e:r<0?-r:0,this.options.rtl){var l=-1*i;this.dom.content.style.transform="translateX(".concat(l,"px)")}else this.dom.content.style.transform="translateX(".concat(i,"px)")}}},{key:"repositionY",value:function(){var t=this.options.orientation.item,i=this.dom.box;i.style.top="".concat("top"==t?this.top:this.parent.height-this.top-this.height,"px")}},{key:"_repaintDragLeft",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){var t=document.createElement("div");t.className="vis-drag-left",t.dragLeftItem=this,this.dom.box.appendChild(t),this.dom.dragLeft=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragLeft||(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}},{key:"_repaintDragRight",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){var t=document.createElement("div");t.className="vis-drag-right",t.dragRightItem=this,this.dom.box.appendChild(t),this.dom.dragRight=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragRight||(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}]),e}(Yd);function Id(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}zd.prototype.baseClassName="vis-item vis-range";var Nd=function(t){hu(e,t);var i=Id(e);function e(t,n,r){var s;if(fn(this,e),(s=i.call(this,t,n,r)).props={content:{width:0}},s.overflow=!1,t){if(null==t.start)throw new Error('Property "start" missing in item '.concat(t.id));if(null==t.end)throw new Error('Property "end" missing in item '.concat(t.id))}return s}return vn(e,[{key:"isVisible",value:function(t){return this.data.start<t.end&&this.data.end>t.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+t}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.content).overflow,{content:{width:this.dom.content.offsetWidth}}}},{key:"_updateDomComponentsSizes",value:function(t){this.props.content.width=t.content.width,this.height=0,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){}},{key:"redraw",value:function(t){var i,e,n,r,s,o,a=this,h=[br(i=this._createDomElement).call(i,this),br(e=this._appendDomElement).call(e,this),br(n=this._updateDirtyDomComponents).call(n,this),function(){var t;a.dirty&&(s=br(t=a._getDomComponentsSizes).call(t,a)())},function(){var t;a.dirty&&br(t=a._updateDomComponentsSizes).call(t,a)(s)},br(r=this._repaintDomAdditionals).call(r,this)];return t?h:(Sr(h).call(h,(function(t){o=t()})),o)}},{key:"repositionY",value:function(t){var i,e=this.options.orientation.item;if(void 0!==this.data.subgroup){var n=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[n].height,"px"),this.dom.box.style.top="".concat("top"==e?this.parent.top+this.parent.subgroups[n].top:this.parent.top+this.parent.height-this.parent.subgroups[n].top-this.parent.subgroups[n].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof Fd?(i=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom="bottom"==e?"0":"",this.dom.box.style.top="top"==e?"0":""):(i=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(i,"px")}}]),e}(Yd);Nd.prototype.baseClassName="vis-item vis-background",Nd.prototype.stack=!1,Nd.prototype.show=zd.prototype.show,Nd.prototype.hide=zd.prototype.hide,Nd.prototype.repositionX=zd.prototype.repositionX;var Hd=function(){function t(i,e){fn(this,t),this.container=i,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return vn(t,[{key:"setPosition",value:function(t,i){this.x=ks(t),this.y=ks(i)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=sf.xss(t)}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var i=this.frame.clientHeight,e=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,s=0,o=0;if("flip"==this.overflowMethod||"none"==this.overflowMethod){var a=!1,h=!0;"flip"==this.overflowMethod&&(this.y-i<this.padding&&(h=!1),this.x+e>r-this.padding&&(a=!0)),s=a?this.x-e:this.x,o=h?this.y-i:this.y}else(o=this.y-i)+i+this.padding>n&&(o=n-i-this.padding),o<this.padding&&(o=this.padding),(s=this.x)+e+this.padding>r&&(s=r-e-this.padding),s<this.padding&&(s=this.padding);this.frame.style.left=s+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),Bd=Me.every,Pd=wr("every");Mt({target:"Array",proto:!0,forced:!Pd},{every:function(t){return Bd(this,t,arguments.length>1?arguments[1]:void 0)}});var Rd=On("Array").every,$d=Array.prototype,Gd=function(t){var i=t.every;return t===$d||t instanceof Array&&i===$d.every?Rd:i};function Wd(t,i){var e=void 0!==Kn&&ue(t)||t["@@iterator"];if(!e){if(rr(t)||(e=function(t,i){var e;if(!t)return;if("string"==typeof t)return Ud(t,i);var n=er(e=Object.prototype.toString.call(t)).call(e,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return ie(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ud(t,i)}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw s}}}}function Ud(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function qd(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var Vd=function(t){hu(e,t);var i=qd(e);function e(t,n,r){var s;fn(this,e);var o=$r({},{fitOnDoubleClick:!0},r,{editable:!1});if((s=i.call(this,t,n,o)).props={content:{width:0,height:0}},!t||null==t.uiItems)throw new Error('Property "uiItems" missing in item '+t.id);return s.id=Ol(),s.group=t.group,s._setupRange(),s.emitter=s.data.eventEmitter,s.range=s.data.range,s.attached=!1,s.isCluster=!0,s.data.isCluster=!0,s}return vn(e,[{key:"hasItems",value:function(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}},{key:"setUiItems",value:function(t){this.detach(),this.data.uiItems=t,this._setupRange(),this.attach()}},{key:"isVisible",value:function(t){var i=this.data.end?this.data.end-this.data.start:0,e=this.width*t.getMillisecondsPerPixel(),n=Math.max(this.data.start.getTime()+i,this.data.start.getTime()+e);return this.data.start<t.end&&n>t.start&&this.hasItems()}},{key:"getData",value:function(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}},{key:"redraw",value:function(t){var i,e,n,r,s,o,a,h,u=[br(i=this._createDomElement).call(i,this),br(e=this._appendDomElement).call(e,this),br(n=this._updateDirtyDomComponents).call(n,this),br(r=function(){this.dirty&&(a=this._getDomComponentsSizes())}).call(r,this),br(s=function(){var t;this.dirty&&br(t=this._updateDomComponentsSizes).call(t,this)(a)}).call(s,this),br(o=this._repaintDomAdditionals).call(o,this)];return t?u:(Sr(u).call(u,(function(t){h=t()})),h)}},{key:"show",value:function(){this.displayed||this.redraw()}},{key:"hide",value:function(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),this.options.showStipes&&(t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot)),this.displayed=!1}}},{key:"repositionX",value:function(){var t=this.conversion.toScreen(this.data.start),i=this.data.end?this.conversion.toScreen(this.data.end):0;if(i)this.repositionXWithRanges(t,i);else{var e=void 0===this.data.align?this.options.align:this.data.align;this.repositionXWithoutRanges(t,e)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(t,i))}},{key:"repositionStype",value:function(t,i){this.dom.line.style.display="block",this.dom.dot.style.display="block";var e=this.dom.line.offsetWidth,n=this.dom.dot.offsetWidth;if(i){var r=e+t+(i-t)/2,s=r-n/2,o=this.options.rtl?-1*r:r,a=this.options.rtl?-1*s:s;this.dom.line.style.transform="translateX(".concat(o,"px)"),this.dom.dot.style.transform="translateX(".concat(a,"px)")}else{var h=this.options.rtl?-1*t:t,u=this.options.rtl?-1*(t-n/2):t-n/2;this.dom.line.style.transform="translateX(".concat(h,"px)"),this.dom.dot.style.transform="translateX(".concat(u,"px)")}}},{key:"repositionXWithoutRanges",value:function(t,i){"right"==i?this.options.rtl?(this.right=t-this.width,this.dom.box.style.right=this.right+"px"):(this.left=t-this.width,this.dom.box.style.left=this.left+"px"):"left"==i?this.options.rtl?(this.right=t,this.dom.box.style.right=this.right+"px"):(this.left=t,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=t-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=t-this.width/2,this.dom.box.style.left=this.left+"px")}},{key:"repositionXWithRanges",value:function(t,i){var e=Math.round(Math.max(i-t+.5,1));this.options.rtl?this.right=t:this.left=t,this.width=Math.max(e,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=e+"px"}},{key:"repositionY",value:function(){var t=this.options.orientation.item,i=this.dom.box;if(i.style.top="top"==t?(this.top||0)+"px":(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if("top"==t)this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var e=this.parent.itemSet.props.height,n=e-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=e-n+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}},{key:"move",value:function(){this.repositionX(),this.repositionY()}},{key:"attach",value:function(){var t,i,e=Wd(this.data.uiItems);try{for(e.s();!(i=e.n()).done;){i.value.cluster=this}}catch(t){e.e(t)}finally{e.f()}this.data.items=ur(t=this.data.uiItems).call(t,(function(t){return t.data})),this.attached=!0,this.dirty=!0}},{key:"detach",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.hasItems()){var i,e=Wd(this.data.uiItems);try{for(e.s();!(i=e.n()).done;){var n=i.value;delete n.cluster}}catch(t){e.e(t)}finally{e.f()}this.attached=!1,t&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}},{key:"_onDoubleClick",value:function(){this._fit()}},{key:"_setupRange",value:function(){var t,i,e,n=ur(t=this.data.uiItems).call(t,(function(t){return{start:t.data.start.valueOf(),end:t.data.end?t.data.end.valueOf():t.data.start.valueOf()}}));this.data.min=Math.min.apply(Math,Jn(ur(n).call(n,(function(t){return Math.min(t.start,t.end||t.start)})))),this.data.max=Math.max.apply(Math,Jn(ur(n).call(n,(function(t){return Math.max(t.start,t.end||t.start)}))));var r=ur(i=this.data.uiItems).call(i,(function(t){return t.center})),s=wu(r).call(r,(function(t,i){return t+i}),0)/this.data.uiItems.length;ml(e=this.data.uiItems).call(e,(function(t){return t.data.end}))?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(s),this.data.end=null)}},{key:"_getUiItems",value:function(){var t,i=this;return this.data.uiItems&&this.data.uiItems.length?os(t=this.data.uiItems).call(t,(function(t){return t.cluster===i})):[]}},{key:"_createDomElement",value:function(){if(!this.dom){var t;if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick)this.dom.box.ondblclick=br(t=e.prototype._onDoubleClick).call(t,this);this.dom.box["vis-item"]=this,this.dirty=!0}}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}var i=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!i)throw new Error("Cannot redraw item: parent has no background container element");i.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var e=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw item: parent has no axis container element");e.appendChild(this.dom.dot)}}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+t,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}},{key:"_getDomComponentsSizes",value:function(){var t={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(t.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},t.line={width:this.dom.line.offsetWidth}),t}},{key:"_updateDomComponentsSizes",value:function(t){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=t.box.width:this.width=t.box.width,this.height=t.box.height,this.options.rtl?this.dom.box.style.right=t.previous.right:this.dom.box.style.left=t.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}},{key:"_isStipeVisible",value:function(){return this.minWidth>=this.width||!this.data.end}},{key:"_getFitRange",value:function(){var t=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-t,fitEnd:this.data.max+t}}},{key:"_fit",value:function(){if(this.emitter){var t=this._getFitRange(),i=t.fitStart,e=t.fitEnd,n={start:new Date(i),end:new Date(e),animation:!0};this.emitter.emit("fit",n)}}},{key:"_getItemData",value:function(){return this.data}}]),e}(Yd);function Xd(t,i){var e=void 0!==Kn&&ue(t)||t["@@iterator"];if(!e){if(rr(t)||(e=function(t,i){var e;if(!t)return;if("string"==typeof t)return Zd(t,i);var n=er(e=Object.prototype.toString.call(t)).call(e,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return ie(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zd(t,i)}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw s}}}}function Zd(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}Vd.prototype.baseClassName="vis-item vis-range vis-cluster";var Jd="__ungrouped__",Kd=function(){function t(i){fn(this,t),this.itemSet=i,this.groups={},this.cache={},this.cache[-1]=[]}return vn(t,[{key:"createClusterItem",value:function(t,i,e){return new Vd(t,i,e)}},{key:"setItems",value:function(t,i){this.items=t||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,i&&i.applyOnChangedLevel&&(this.applyOnChangedLevel=i.applyOnChangedLevel)}},{key:"updateData",value:function(){this.dataChanged=!0,this.applyOnChangedLevel=!1}},{key:"getClusters",value:function(t,i,e){var n="boolean"==typeof e?{}:e,r=n.maxItems,s=n.clusterCriteria;s||(s=function(){return!0}),r=r||1;var o=-1,a=0;if(i>0){if(i>=1)return[];o=Math.abs(Math.round(Math.log(100/i)/Math.log(2))),a=Math.abs(Math.pow(2,o))}if(this.dataChanged){var h=o!=this.cacheLevel;(!this.applyOnChangedLevel||h)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=o;var u=this.cache[o];if(!u){for(var l in u=[],this.groups)if(this.groups.hasOwnProperty(l))for(var c=this.groups[l],f=c.length,d=0;d<f;){for(var v=c[d],p=1,m=d-1;m>=0&&v.center-c[m].center<a/2;)!c[m].cluster&&s(v.data,c[m].data)&&p++,m--;for(var g=d+1;g<c.length&&c[g].center-v.center<a/2;)s(v.data,c[g].data)&&p++,g++;for(var y=u.length-1;y>=0&&v.center-u[y].center<a;)v.group==u[y].group&&s(v.data,u[y].data)&&p++,y--;if(p>r){for(var b=p-r+1,w=[],k=d;w.length<b&&k<c.length;)s(c[d].data,c[k].data)&&w.push(c[k]),k++;var _=this.itemSet.getGroupId(v.data),x=this.itemSet.groups[_]||this.itemSet.groups[Jd],D=this._getClusterForItems(w,x,t,e);u.push(D),d+=b}else delete v.cluster,d+=1}this.cache[o]=u}return u}},{key:"_filterData",value:function(){var t={};this.groups=t;for(var i=0,e=ls(this.items);i<e.length;i++){var n=e[i],r=n.parent?n.parent.groupId:"",s=t[r];s||(s=[],t[r]=s),s.push(n),n.data.start&&(n.data.end?n.center=(n.data.start.valueOf()+n.data.end.valueOf())/2:n.center=n.data.start.valueOf())}for(var o in t){var a;if(t.hasOwnProperty(o))cl(a=t[o]).call(a,(function(t,i){return t.center-i.center}))}this.dataChanged=!1}},{key:"_getClusterForItems",value:function(t,i,e,n){var r,s,o=ur(r=e||[]).call(r,(function(t){var i;return{cluster:t,itemsIds:new Wu(ur(i=t.data.uiItems).call(i,(function(t){return t.id})))}}));if(o.length){var a,h=Xd(o);try{var u=function(){var i=a.value;if(i.itemsIds.size===t.length&&Gd(t).call(t,(function(t){return i.itemsIds.has(t.id)})))return s=i.cluster,"break"};for(h.s();!(a=h.n()).done;){if("break"===u())break}}catch(t){h.e(t)}finally{h.f()}}if(s)return s.setUiItems(t),s.group!==i&&(s.group&&s.group.remove(s),i&&(i.add(s),s.group=i)),s;var l=n.titleTemplate||"",c={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},f=l.replace(/{count}/,t.length),d='<div title="'+f+'">'+t.length+"</div>",v=$r({},n,this.itemSet.options),p={content:d,title:f,group:i,uiItems:t,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return s=this.createClusterItem(p,c,v),i&&(i.add(s),s.group=i),s.attach(),s}},{key:"_dropLevelsCache",value:function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}]),t}();function Qd(t,i){var e=void 0!==Kn&&ue(t)||t["@@iterator"];if(!e){if(rr(t)||(e=function(t,i){var e;if(!t)return;if("string"==typeof t)return tv(t,i);var n=er(e=Object.prototype.toString.call(t)).call(e,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return ie(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tv(t,i)}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw s}}}}function tv(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function iv(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var ev="__ungrouped__",nv="__background__",rv=function(t){hu(e,t);var i=iv(e);function e(t,n){var r;fn(this,e),(r=i.call(this)).body=t,r.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(t,i,e){var n=i.order;i.order=t.order,t.order=n},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:zf.snap,onDropObjectOnItem:function(t,i,e){e(i)},onAdd:function(t,i){i(t)},onUpdate:function(t,i){i(t)},onMove:function(t,i){i(t)},onRemove:function(t,i){i(t)},onMoving:function(t,i){i(t)},onAddGroup:function(t,i){i(t)},onMoveGroup:function(t,i){i(t)},onRemoveGroup:function(t,i){i(t)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},r.options=sf.extend({},r.defaultOptions),r.options.rtl=n.rtl,r.options.onTimeout=n.onTimeout,r.conversion={toScreen:t.util.toScreen,toTime:t.util.toTime},r.dom={},r.props={},r.hammer=null;var s=ru(r);return r.itemsData=null,r.groupsData=null,r.itemsSettingTime=null,r.initialItemSetDrawn=!1,r.userContinueNotBail=null,r.sequentialSelection=!1,r.itemListeners={add:function(t,i,e){s._onAdd(i.items),s.options.cluster&&s.clusterGenerator.setItems(s.items,{applyOnChangedLevel:!1}),s.redraw()},update:function(t,i,e){s._onUpdate(i.items),s.options.cluster&&s.clusterGenerator.setItems(s.items,{applyOnChangedLevel:!1}),s.redraw()},remove:function(t,i,e){s._onRemove(i.items),s.options.cluster&&s.clusterGenerator.setItems(s.items,{applyOnChangedLevel:!1}),s.redraw()}},r.groupListeners={add:function(t,i,e){if(s._onAddGroups(i.items),s.groupsData&&s.groupsData.length>0){var n,r=s.groupsData.getDataSet();Sr(n=r.get()).call(n,(function(t){if(t.nestedGroups){var i;0!=t.showNested&&(t.showNested=!0);var n=[];Sr(i=t.nestedGroups).call(i,(function(i){var e=r.get(i);e&&(e.nestedInGroup=t.id,0==t.showNested&&(e.visible=!1),n=ir(n).call(n,e))})),r.update(n,e)}}))}},update:function(t,i,e){s._onUpdateGroups(i.items)},remove:function(t,i,e){s._onRemoveGroups(i.items)}},r.items={},r.groups={},r.groupIds=[],r.selection=[],r.popup=null,r.popupTimer=null,r.touchParams={},r.groupTouchParams={group:null,isDragging:!1},r._create(),r.setOptions(n),r.clusters=[],r}return vn(e,[{key:"_create",value:function(){var t,i,e,n,r,s,o,a,h,u,l,c,f,d,v,p=this,m=document.createElement("div");m.className="vis-itemset",m["vis-itemset"]=this,this.dom.frame=m;var g=document.createElement("div");g.className="vis-background",m.appendChild(g),this.dom.background=g;var y=document.createElement("div");y.className="vis-foreground",m.appendChild(y),this.dom.foreground=y;var b=document.createElement("div");b.className="vis-axis",this.dom.axis=b;var w=document.createElement("div");w.className="vis-labelset",this.dom.labelSet=w,this._updateUngrouped();var k=new Fd(nv,null,this);k.show(),this.groups[nv]=k,this.hammer=new Of(this.body.dom.centerContainer),this.hammer.on("hammer.input",(function(t){t.isFirst&&p._onTouch(t)})),this.hammer.on("panstart",br(t=this._onDragStart).call(t,this)),this.hammer.on("panmove",br(i=this._onDrag).call(i,this)),this.hammer.on("panend",br(e=this._onDragEnd).call(e,this)),this.hammer.get("pan").set({threshold:5,direction:Of.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",br(n=this._onSelectItem).call(n,this)),this.hammer.on("press",br(r=this._onMultiSelectItem).call(r,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",br(s=this._onAddItem).call(s,this)),this.options.rtl?this.groupHammer=new Of(this.body.dom.rightContainer):this.groupHammer=new Of(this.body.dom.leftContainer),this.groupHammer.on("tap",br(o=this._onGroupClick).call(o,this)),this.groupHammer.on("panstart",br(a=this._onGroupDragStart).call(a,this)),this.groupHammer.on("panmove",br(h=this._onGroupDrag).call(h,this)),this.groupHammer.on("panend",br(u=this._onGroupDragEnd).call(u,this)),this.groupHammer.get("pan").set({threshold:5,direction:Of.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",br(l=this._onMouseOver).call(l,this)),this.body.dom.centerContainer.addEventListener("mouseout",br(c=this._onMouseOut).call(c,this)),this.body.dom.centerContainer.addEventListener("mousemove",br(f=this._onMouseMove).call(f,this)),this.body.dom.centerContainer.addEventListener("contextmenu",br(d=this._onDragEnd).call(d,this)),this.body.dom.centerContainer.addEventListener("mousewheel",br(v=this._onMouseWheel).call(v,this)),this.show()}},{key:"setOptions",value:function(t){var i=this;if(t){var e,n;sf.selectiveExtend(["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"],this.options,t),"itemsAlwaysDraggable"in t&&("boolean"==typeof t.itemsAlwaysDraggable?(this.options.itemsAlwaysDraggable.item=t.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):"object"===qn(t.itemsAlwaysDraggable)&&(sf.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,t.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in t&&"boolean"==typeof t.sequentialSelection&&(this.options.sequentialSelection=t.sequentialSelection),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.item="top"===t.orientation?"top":"bottom":"object"===qn(t.orientation)&&"item"in t.orientation&&(this.options.orientation.item=t.orientation.item)),"margin"in t&&("number"==typeof t.margin?(this.options.margin.axis=t.margin,this.options.margin.item.horizontal=t.margin,this.options.margin.item.vertical=t.margin):"object"===qn(t.margin)&&(sf.selectiveExtend(["axis"],this.options.margin,t.margin),"item"in t.margin&&("number"==typeof t.margin.item?(this.options.margin.item.horizontal=t.margin.item,this.options.margin.item.vertical=t.margin.item):"object"===qn(t.margin.item)&&sf.selectiveExtend(["horizontal","vertical"],this.options.margin.item,t.margin.item)))),Sr(e=["locale","locales"]).call(e,(function(e){e in t&&(i.options[e]=t[e])})),"editable"in t&&("boolean"==typeof t.editable?(this.options.editable.updateTime=t.editable,this.options.editable.updateGroup=t.editable,this.options.editable.add=t.editable,this.options.editable.remove=t.editable,this.options.editable.overrideItems=!1):"object"===qn(t.editable)&&sf.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,t.editable)),"groupEditable"in t&&("boolean"==typeof t.groupEditable?(this.options.groupEditable.order=t.groupEditable,this.options.groupEditable.add=t.groupEditable,this.options.groupEditable.remove=t.groupEditable):"object"===qn(t.groupEditable)&&sf.selectiveExtend(["order","add","remove"],this.options.groupEditable,t.groupEditable));Sr(n=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(n,(function(e){var n=t[e];if(n){var r;if("function"!=typeof n)throw new Error(ir(r="option ".concat(e," must be a function ")).call(r,e,"(item, callback)"));i.options[e]=n}})),t.cluster?($r(this.options,{cluster:t.cluster}),this.clusterGenerator||(this.clusterGenerator=new Kd(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}},{key:"markDirty",value:function(t){this.groupIds=[],t&&(t.refreshItems&&Sr(sf).call(sf,this.items,(function(t){t.dirty=!0,t.displayed&&t.redraw()})),t.restackGroups&&Sr(sf).call(sf,this.groups,(function(t,i){i!==nv&&(t.stackDirty=!0)})))}},{key:"destroy",value:function(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}},{key:"hide",value:function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}},{key:"show",value:function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}},{key:"setPopupTimer",value:function(t){if(this.clearPopupTimer(),t){var i=this.options.tooltip.delay||"number"==typeof this.options.tooltip.delay?this.options.tooltip.delay:500;this.popupTimer=qs((function(){t.show()}),i)}}},{key:"clearPopupTimer",value:function(){null!=this.popupTimer&&(clearTimeout(this.popupTimer),this.popupTimer=null)}},{key:"setSelection",value:function(t){var i;null==t&&(t=[]),rr(t)||(t=[t]);var e,n=Qd(os(i=this.selection).call(i,(function(i){return-1===js(t).call(t,i)})));try{for(n.s();!(e=n.n()).done;){var r=e.value,s=this.getItemById(r);s&&s.unselect()}}catch(t){n.e(t)}finally{n.f()}this.selection=Jn(t);var o,a=Qd(t);try{for(a.s();!(o=a.n()).done;){var h=o.value,u=this.getItemById(h);u&&u.select()}}catch(t){a.e(t)}finally{a.f()}}},{key:"getSelection",value:function(){var t;return ir(t=this.selection).call(t,[])}},{key:"getVisibleItems",value:function(){var t,i,e=this.body.range.getRange();this.options.rtl?(t=this.body.util.toScreen(e.start),i=this.body.util.toScreen(e.end)):(i=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end));var n=[];for(var r in this.groups)if(this.groups.hasOwnProperty(r)){var s,o=this.groups[r],a=Qd(o.isVisible?o.visibleItems:[]);try{for(a.s();!(s=a.n()).done;){var h=s.value;this.options.rtl?h.right<i&&h.right+h.width>t&&n.push(h.id):h.left<t&&h.left+h.width>i&&n.push(h.id)}}catch(t){a.e(t)}finally{a.f()}}return n}},{key:"getItemsAtCurrentTime",value:function(t){var i,e;this.options.rtl?(i=this.body.util.toScreen(t),e=this.body.util.toScreen(t)):(e=this.body.util.toScreen(t),i=this.body.util.toScreen(t));var n=[];for(var r in this.groups)if(this.groups.hasOwnProperty(r)){var s,o=this.groups[r],a=Qd(o.isVisible?o.visibleItems:[]);try{for(a.s();!(s=a.n()).done;){var h=s.value;this.options.rtl?h.right<e&&h.right+h.width>i&&n.push(h.id):h.left<i&&h.left+h.width>e&&n.push(h.id)}}catch(t){a.e(t)}finally{a.f()}}return n}},{key:"getVisibleGroups",value:function(){var t=[];for(var i in this.groups){if(this.groups.hasOwnProperty(i))this.groups[i].isVisible&&t.push(i)}return t}},{key:"getItemById",value:function(t){var i;return this.items[t]||fd(i=this.clusters).call(i,(function(i){return i.id===t}))}},{key:"_deselect",value:function(t){for(var i=this.selection,e=0,n=i.length;e<n;e++)if(i[e]==t){Hr(i).call(i,e,1);break}}},{key:"redraw",value:function(){var t=this,i=this.options.margin,e=this.body.range,n=sf.option.asSize,r=this.options,s=r.orientation.item,o=!1,a=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,a.className="vis-itemset",this.options.cluster&&this._clusterItems(),o=this._orderGroups()||o;var h=e.end-e.start,u=h!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,l=e.start!=this.lastRangeStart,c=r.stack!=this.lastStack,f=r.stackSubgroups!=this.lastStackSubgroups,d=u||l||c||f;this.lastVisibleInterval=h,this.lastRangeStart=e.start,this.lastStack=r.stack,this.lastStackSubgroups=r.stackSubgroups,this.props.lastWidth=this.props.width;var v=this._firstGroup(),p={item:i.item,axis:i.axis},m={item:i.item,axis:i.item.vertical/2},g=0,y=i.axis+i.item.vertical;this.groups[nv].redraw(e,m,d);var b={},w=0;return Sr(sf).call(sf,this.groups,(function(t,i){if(i!==nv){var n=t==v?p:m;b[i]=t.redraw(e,n,d,!0),w=b[i].length}})),w>0&&function(){for(var i={},e=function(t){Sr(sf).call(sf,b,(function(e,n){i[n]=e[t]()}))},n=0;n<w;n++)e(n);Sr(sf).call(sf,t.groups,(function(t,e){if(e!==nv){var n=i[e];o=n||o,g+=t.height}})),g=Math.max(g,y)}(),g=Math.max(g,y),a.style.height=n(g),this.props.width=a.offsetWidth,this.props.height=g,this.dom.axis.style.top=n("top"==s?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,o=this._isResized()||o}},{key:"_firstGroup",value:function(){var t="top"==this.options.orientation.item?0:this.groupIds.length-1,i=this.groupIds[t];return this.groups[i]||this.groups[ev]||null}},{key:"_updateUngrouped",value:function(){var t,i,e=this.groups[ev];if(this.groupsData){if(e)for(i in e.dispose(),delete this.groups[ev],this.items)if(this.items.hasOwnProperty(i)){(t=this.items[i]).parent&&t.parent.remove(t);var n=this.getGroupId(t.data),r=this.groups[n];r&&r.add(t)||t.hide()}}else if(!e){for(i in e=new Md(null,null,this),this.groups[ev]=e,this.items)this.items.hasOwnProperty(i)&&(t=this.items[i],e.add(t));e.show()}}},{key:"getLabelSet",value:function(){return this.dom.labelSet}},{key:"setItems",value:function(t){this.itemsSettingTime=new Date;var i,e=this,n=this.itemsData;if(t){if(!Xl("id",t))throw new TypeError("Data must implement the interface of DataSet or DataView");this.itemsData=tf(t)}else this.itemsData=null;if(n&&(Sr(sf).call(sf,this.itemListeners,(function(t,i){n.off(i,t)})),n.dispose(),i=n.getIds(),this._onRemove(i)),this.itemsData){var r=this.id;Sr(sf).call(sf,this.itemListeners,(function(t,i){e.itemsData.on(i,t,r)})),i=this.itemsData.getIds(),this._onAdd(i),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}},{key:"getItems",value:function(){return null!=this.itemsData?this.itemsData.rawDS:null}},{key:"setGroups",value:function(t){var i,e=this;if(this.groupsData&&(Sr(sf).call(sf,this.groupListeners,(function(t,i){e.groupsData.off(i,t)})),i=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(i)),t){if(!Xl("id",t))throw new TypeError("Data must implement the interface of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n,r=this.groupsData.getDataSet();Sr(n=r.get()).call(n,(function(t){var i;t.nestedGroups&&Sr(i=t.nestedGroups).call(i,(function(i){var e=r.get(i);e.nestedInGroup=t.id,0==t.showNested&&(e.visible=!1),r.update(e)}))}));var s=this.id;Sr(sf).call(sf,this.groupListeners,(function(t,i){e.groupsData.on(i,t,s)})),i=this.groupsData.getIds(),this._onAddGroups(i)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}},{key:"getGroups",value:function(){return this.groupsData}},{key:"removeItem",value:function(t){var i=this,e=this.itemsData.get(t);e&&this.options.onRemove(e,(function(e){e&&i.itemsData.remove(t)}))}},{key:"_getType",value:function(t){return t.type||this.options.type||(t.end?"range":"box")}},{key:"getGroupId",value:function(t){return"background"==this._getType(t)&&null==t.group?nv:this.groupsData?t.group:ev}},{key:"_onUpdate",value:function(t){var i=this,n=this;Sr(t).call(t,(function(t){var r,s=n.itemsData.get(t),o=n.items[t],a=s?n._getType(s):null,h=e.types[a];if(o&&(h&&o instanceof h?n._updateItem(o,s):(r=o.selected,n._removeItem(o),o=null)),!o&&s){if(!h)throw new TypeError('Unknown item type "'.concat(a,'"'));(o=new h(s,n.conversion,n.options)).id=t,n._addItem(o),r&&(i.selection.push(t),o.select())}})),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemove",value:function(t){var i=0,e=this;Sr(t).call(t,(function(t){var n=e.items[t];n&&(i++,e._removeItem(n))})),i&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}},{key:"_order",value:function(){Sr(sf).call(sf,this.groups,(function(t){t.order()}))}},{key:"_onUpdateGroups",value:function(t){this._onAddGroups(t)}},{key:"_onAddGroups",value:function(t){var i=this;Sr(t).call(t,(function(t){var e=i.groupsData.get(t),n=i.groups[t];if(n)n.setData(e);else{if(t==ev||t==nv)throw new Error("Illegal group id. ".concat(t," is a reserved id."));var r=zs(i.options);for(var s in sf.extend(r,{height:null}),n=new Md(t,e,i),i.groups[t]=n,i.items)if(i.items.hasOwnProperty(s)){var o=i.items[s];o.data.group==t&&n.add(o)}n.order(),n.show()}})),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemoveGroups",value:function(t){var i=this;Sr(t).call(t,(function(t){var e=i.groups[t];e&&(e.dispose(),delete i.groups[t])})),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_orderGroups",value:function(){if(this.groupsData){var t=this.groupsData.getIds({order:this.options.groupOrder});t=this._orderNestedGroups(t);var i=!sf.equalArray(t,this.groupIds);if(i){var e=this.groups;Sr(t).call(t,(function(t){e[t].hide()})),Sr(t).call(t,(function(t){e[t].show()})),this.groupIds=t}return i}return!1}},{key:"_orderNestedGroups",value:function(t){var i=this;return function t(i,e){var n=[];return Sr(e).call(e,(function(e){if(n.push(e),i.groupsData.get(e).nestedGroups){var r,s=ur(r=i.groupsData.get({filter:function(t){return t.nestedInGroup==e},order:i.options.groupOrder})).call(r,(function(t){return t.id}));n=ir(n).call(n,t(i,s))}})),n}(this,os(t).call(t,(function(t){return!i.groupsData.get(t).nestedInGroup})))}},{key:"_addItem",value:function(t){this.items[t.id]=t;var i=this.getGroupId(t.data),e=this.groups[i];e?e&&e.data&&e.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1,e&&e.add(t)}},{key:"_updateItem",value:function(t,i){t.setData(i);var e=this.getGroupId(t.data),n=this.groups[e];n?n&&n.data&&n.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1}},{key:"_removeItem",value:function(t){var i,e;t.hide(),delete this.items[t.id];var n=js(i=this.selection).call(i,t.id);-1!=n&&Hr(e=this.selection).call(e,n,1),t.parent&&t.parent.remove(t),null!=this.popup&&this.popup.hide()}},{key:"_constructByEndArray",value:function(t){for(var i=[],e=0;e<t.length;e++)t[e]instanceof zd&&i.push(t[e]);return i}},{key:"_onTouch",value:function(t){this.touchParams.item=this.itemFromTarget(t),this.touchParams.dragLeftItem=t.target.dragLeftItem||!1,this.touchParams.dragRightItem=t.target.dragRightItem||!1,this.touchParams.itemProps=null}},{key:"_getGroupIndex",value:function(t){for(var i=0;i<this.groupIds.length;i++)if(t==this.groupIds[i])return i}},{key:"_onDragStart",value:function(t){var i=this;if(!this.touchParams.itemIsDragging){var e,n=this.touchParams.item||null,r=this;if(n&&(n.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;if(null!=n.editable&&!n.editable.updateTime&&!n.editable.updateGroup&&!this.options.editable.overrideItems)return;var s=this.touchParams.dragLeftItem,o=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=n,s)e={item:s,initialX:t.center.x,dragLeft:!0,data:this._cloneItemData(n.data)},this.touchParams.itemProps=[e];else if(o)e={item:o,initialX:t.center.x,dragRight:!0,data:this._cloneItemData(n.data)},this.touchParams.itemProps=[e];else if(this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey))this._onDragStartAddItem(t);else{this.groupIds.length<1&&this.redraw();var a=this._getGroupIndex(n.data.group),h=this.options.itemsAlwaysDraggable.item&&!n.selected?[n.id]:this.getSelection();this.touchParams.itemProps=ur(h).call(h,(function(e){var n=r.items[e],s=r._getGroupIndex(n.data.group);return{item:n,initialX:t.center.x,groupOffset:a-s,data:i._cloneItemData(n.data)}}))}t.stopPropagation()}else this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey)&&this._onDragStartAddItem(t)}}},{key:"_onDragStartAddItem",value:function(t){var i=this.options.snap||null,e=this.dom.frame.getBoundingClientRect(),n=this.options.rtl?e.right-t.center.x+10:t.center.x-e.left-10,r=this.body.util.toTime(n),s=this.body.util.getScale(),o=this.body.util.getStep(),a=i?i(r,s,o):r,h={type:"range",start:a,end:a,content:"new item"},u=Ol();h[this.itemsData.idProp]=u;var l=this.groupFromTarget(t);l&&(h.group=l.groupId);var c=new zd(h,this.conversion,this.options);c.id=u,c.data=this._cloneItemData(h),this._addItem(c),this.touchParams.selectedItem=c;var f={item:c,initialX:t.center.x,data:c.data};this.options.rtl?f.dragLeft=!0:f.dragRight=!0,this.touchParams.itemProps=[f],t.stopPropagation()}},{key:"_onDrag",value:function(t){var i=this;if(null!=this.popup&&this.options.showTooltips&&!this.popup.hidden){var e=this.body.dom.centerContainer,n=e.getBoundingClientRect();this.popup.setPosition(t.center.x-n.left+e.offsetLeft,t.center.y-n.top+e.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var r;t.stopPropagation();var s=this,o=this.options.snap||null,a=this.body.dom.root.offsetLeft,h=this.options.rtl?a+this.body.domProps.right.width:a+this.body.domProps.left.width,u=this.body.util.getScale(),l=this.body.util.getStep(),c=this.touchParams.selectedItem,f=(this.options.editable.overrideItems||null==c.editable)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&null!=c.editable&&c.editable.updateGroup,d=null;if(f&&c&&null!=c.data.group){var v=s.groupFromTarget(t);v&&(d=this._getGroupIndex(v.groupId))}Sr(r=this.touchParams.itemProps).call(r,(function(e){var n,r,a,v,p,m=s.body.util.toTime(t.center.x-h),g=s.body.util.toTime(e.initialX-h);n=i.options.rtl?-(m-g):m-g;var y=i._cloneItemData(e.item.data);if(null==e.item.editable||e.item.editable.updateTime||e.item.editable.updateGroup||s.options.editable.overrideItems){if((i.options.editable.overrideItems||null==c.editable)&&i.options.editable.updateTime||!i.options.editable.overrideItems&&null!=c.editable&&c.editable.updateTime)if(e.dragLeft)i.options.rtl?null!=y.end&&(a=sf.convert(e.data.end,"Date"),p=new Date(a.valueOf()+n),y.end=o?o(p,u,l):p):null!=y.start&&(r=sf.convert(e.data.start,"Date"),v=new Date(r.valueOf()+n),y.start=o?o(v,u,l):v);else if(e.dragRight)i.options.rtl?null!=y.start&&(r=sf.convert(e.data.start,"Date"),v=new Date(r.valueOf()+n),y.start=o?o(v,u,l):v):null!=y.end&&(a=sf.convert(e.data.end,"Date"),p=new Date(a.valueOf()+n),y.end=o?o(p,u,l):p);else if(null!=y.start)if(r=sf.convert(e.data.start,"Date").valueOf(),v=new Date(r+n),null!=y.end){var b=(a=sf.convert(e.data.end,"Date")).valueOf()-r.valueOf();y.start=o?o(v,u,l):v,y.end=new Date(y.start.valueOf()+b)}else y.start=o?o(v,u,l):v;if(f&&!e.dragLeft&&!e.dragRight&&null!=d&&null!=y.group){var w=d-e.groupOffset;w=Math.max(0,w),w=Math.min(s.groupIds.length-1,w),y.group=s.groupIds[w]}y=i._cloneItemData(y),s.options.onMoving(y,(function(t){t&&e.item.setData(i._cloneItemData(t,"Date"))}))}})),this.body.emitter.emit("_change")}}},{key:"_moveToGroup",value:function(t,i){var e=this.groups[i];if(e&&e.groupId!=t.data.group){var n=t.parent;n.remove(t),n.order(),t.data.group=e.groupId,e.add(t),e.order()}}},{key:"_onDragEnd",value:function(t){var i=this;if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){t.stopPropagation();var e=this,n=this.touchParams.itemProps;this.touchParams.itemProps=null,Sr(n).call(n,(function(t){var n=t.item.id;if(null!=e.itemsData.get(n)){var r=i._cloneItemData(t.item.data);e.options.onMove(r,(function(r){r?(r[i.itemsData.idProp]=n,i.itemsData.update(r)):(t.item.setData(t.data),e.body.emitter.emit("_change"))}))}else e.options.onAdd(t.item.data,(function(i){e._removeItem(t.item),i&&e.itemsData.add(i),e.body.emitter.emit("_change")}))}))}}},{key:"_onGroupClick",value:function(t){var i=this,e=this.groupFromTarget(t);qs((function(){i.toggleGroupShowNested(e)}),1)}},{key:"toggleGroupShowNested",value:function(t){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t&&t.nestedGroups){var n=this.groupsData.getDataSet();t.showNested=null!=e?!!e:!t.showNested;var r=n.get(t.groupId);r.showNested=t.showNested;for(var s=t.nestedGroups,o=s;o.length>0;){var a=o;o=[];for(var h=0;h<a.length;h++){var u=n.get(a[h]);u.nestedGroups&&(o=ir(o).call(o,u.nestedGroups))}o.length>0&&(s=ir(s).call(s,o))}var l=ur(i=n.get(s)).call(i,(function(t){return null==t.visible&&(t.visible=!0),t.visible=!!r.showNested,t}));n.update(ir(l).call(l,r)),r.showNested?(sf.removeClassName(t.dom.label,"collapsed"),sf.addClassName(t.dom.label,"expanded")):(sf.removeClassName(t.dom.label,"expanded"),sf.addClassName(t.dom.label,"collapsed"))}}},{key:"toggleGroupDragClassName",value:function(t){t.dom.label.classList.toggle("vis-group-is-dragging"),t.dom.foreground.classList.toggle("vis-group-is-dragging")}},{key:"_onGroupDragStart",value:function(t){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(t),this.groupTouchParams.group&&(t.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}},{key:"_onGroupDrag",value:function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var i=this.groupsData.getDataSet(),e=this.groupFromTarget(t);if(e&&e.height!=this.groupTouchParams.group.height){var n=e.top<this.groupTouchParams.group.top,r=t.center?t.center.y:t.clientY,s=e.dom.foreground.getBoundingClientRect(),o=this.groupTouchParams.group.height;if(n){if(s.top+o<r)return}else{var a=e.height;if(s.top+a-o>r)return}}if(e&&e!=this.groupTouchParams.group){var h=i.get(e.groupId),u=i.get(this.groupTouchParams.group.groupId);u&&h&&(this.options.groupOrderSwap(u,h,i),i.update(u),i.update(h));var l=i.getIds({order:this.options.groupOrder});if(!sf.equalArray(l,this.groupTouchParams.originalOrder))for(var c=this.groupTouchParams.originalOrder,f=this.groupTouchParams.group.groupId,d=Math.min(c.length,l.length),v=0,p=0,m=0;v<d;){for(;v+p<d&&v+m<d&&l[v+p]==c[v+m];)v++;if(v+p>=d)break;if(l[v+p]==f)p=1;else if(c[v+m]==f)m=1;else{var g=js(l).call(l,c[v+m]),y=i.get(l[v+p]),b=i.get(c[v+m]);this.options.groupOrderSwap(y,b,i),i.update(y),i.update(b);var w=l[v+p];l[v+p]=c[v+m],l[g]=w,v++}}}}}},{key:"_onGroupDragEnd",value:function(t){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var i=this,e=i.groupTouchParams.group.groupId,n=i.groupsData.getDataSet(),r=sf.extend({},n.get(e));i.options.onMoveGroup(r,(function(t){if(t)t[n._idProp]=e,n.update(t);else{var r=n.getIds({order:i.options.groupOrder});if(!sf.equalArray(r,i.groupTouchParams.originalOrder))for(var s=i.groupTouchParams.originalOrder,o=Math.min(s.length,r.length),a=0;a<o;){for(;a<o&&r[a]==s[a];)a++;if(a>=o)break;var h=js(r).call(r,s[a]),u=n.get(r[a]),l=n.get(s[a]);i.options.groupOrderSwap(u,l,n),n.update(u),n.update(l);var c=r[a];r[a]=s[a],r[h]=c,a++}}})),i.body.emitter.emit("groupDragged",{groupId:e}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}},{key:"_onSelectItem",value:function(t){if(this.options.selectable){var i=t.srcEvent&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey),e=t.srcEvent&&t.srcEvent.shiftKey;if(i||e)this._onMultiSelectItem(t);else{var n=this.getSelection(),r=this.itemFromTarget(t),s=r&&r.selectable?[r.id]:[];this.setSelection(s);var o=this.getSelection();(o.length>0||n.length>0)&&this.body.emitter.emit("select",{items:o,event:t})}}}},{key:"_onMouseOver",value:function(t){var i=this.itemFromTarget(t);if(i&&i!==this.itemFromRelatedTarget(t)){var e=i.getTitle();if(this.options.showTooltips&&e){null==this.popup&&(this.popup=new Hd(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(e);var n=this.body.dom.centerContainer,r=n.getBoundingClientRect();this.popup.setPosition(t.clientX-r.left+n.offsetLeft,t.clientY-r.top+n.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),null!=this.popup&&this.popup.hide();this.body.emitter.emit("itemover",{item:i.id,event:t})}}},{key:"_onMouseOut",value:function(t){var i=this.itemFromTarget(t);i&&(i!==this.itemFromRelatedTarget(t)&&(this.clearPopupTimer(),null!=this.popup&&this.popup.hide(),this.body.emitter.emit("itemout",{item:i.id,event:t})))}},{key:"_onMouseMove",value:function(t){if(this.itemFromTarget(t)&&(null!=this.popupTimer&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){var i=this.body.dom.centerContainer,e=i.getBoundingClientRect();this.popup.setPosition(t.clientX-e.left+i.offsetLeft,t.clientY-e.top+i.offsetTop),this.popup.show()}}},{key:"_onMouseWheel",value:function(t){this.touchParams.itemIsDragging&&this._onDragEnd(t)}},{key:"_onUpdateItem",value:function(t){if(this.options.selectable&&(this.options.editable.updateTime||this.options.editable.updateGroup)){var i=this;if(t){var e=i.itemsData.get(t.id);this.options.onUpdate(e,(function(t){t&&i.itemsData.update(t)}))}}}},{key:"_onDropObjectOnItem",value:function(t){var i=this.itemFromTarget(t),e=JSON.parse(t.dataTransfer.getData("text"));this.options.onDropObjectOnItem(e,i)}},{key:"_onAddItem",value:function(t){if(this.options.selectable&&this.options.editable.add){var i,e,n=this,r=this.options.snap||null,s=this.dom.frame.getBoundingClientRect(),o=this.options.rtl?s.right-t.center.x:t.center.x-s.left,a=this.body.util.toTime(o),h=this.body.util.getScale(),u=this.body.util.getStep();"drop"==t.type?((e=JSON.parse(t.dataTransfer.getData("text"))).content=e.content?e.content:"new item",e.start=e.start?e.start:r?r(a,h,u):a,e.type=e.type||"box",e[this.itemsData.idProp]=e.id||Ol(),"range"!=e.type||e.end||(i=this.body.util.toTime(o+this.props.width/5),e.end=r?r(i,h,u):i)):((e={start:r?r(a,h,u):a,content:"new item"})[this.itemsData.idProp]=Ol(),"range"===this.options.type&&(i=this.body.util.toTime(o+this.props.width/5),e.end=r?r(i,h,u):i));var l=this.groupFromTarget(t);l&&(e.group=l.groupId),e=this._cloneItemData(e),this.options.onAdd(e,(function(i){i&&(n.itemsData.add(i),"drop"==t.type&&n.setSelection([i.id]))}))}}},{key:"_onMultiSelectItem",value:function(t){var i=this;if(this.options.selectable){var n=this.itemFromTarget(t);if(n){var r=this.options.multiselect?this.getSelection():[];if((t.srcEvent&&t.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){var s=this.itemsData.get(n.id).group,o=void 0;this.options.multiselectPerGroup&&r.length>0&&(o=this.itemsData.get(r[0]).group),this.options.multiselectPerGroup&&null!=o&&o!=s||r.push(n.id);var a=e._getItemRange(this.itemsData.get(r));if(!this.options.multiselectPerGroup||o==s)for(var h in r=[],this.items)if(this.items.hasOwnProperty(h)){var u=this.items[h],l=u.data.start,c=void 0!==u.data.end?u.data.end:l;!(l>=a.min&&c<=a.max)||this.options.multiselectPerGroup&&o!=this.itemsData.get(u.id).group||u instanceof Nd||r.push(u.id)}}else{var f=js(r).call(r,n.id);-1==f?r.push(n.id):Hr(r).call(r,f,1)}var d=os(r).call(r,(function(t){return i.getItemById(t).selectable}));this.setSelection(d),this.body.emitter.emit("select",{items:this.getSelection(),event:t})}}}},{key:"itemFromElement",value:function(t){for(var i=t;i;){if(i.hasOwnProperty("vis-item"))return i["vis-item"];i=i.parentNode}return null}},{key:"itemFromTarget",value:function(t){return this.itemFromElement(t.target)}},{key:"itemFromRelatedTarget",value:function(t){return this.itemFromElement(t.relatedTarget)}},{key:"groupFromTarget",value:function(t){var i=t.center?t.center.y:t.clientY,e=this.groupIds;e.length<=0&&this.groupsData&&(e=this.groupsData.getIds({order:this.options.groupOrder}));for(var n=0;n<e.length;n++){var r=e[n],s=this.groups[r],o=s.dom.foreground,a=o.getBoundingClientRect();if(i>=a.top&&i<a.top+o.offsetHeight)return s;if("top"===this.options.orientation.item){if(n===this.groupIds.length-1&&i>a.top)return s}else if(0===n&&i<a.top+o.offset)return s}return null}},{key:"_cloneItemData",value:function(t,i){var e=sf.extend({},t);return i||(i=this.itemsData.type),null!=e.start&&(e.start=sf.convert(e.start,i&&i.start||"Date")),null!=e.end&&(e.end=sf.convert(e.end,i&&i.end||"Date")),e}},{key:"_clusterItems",value:function(){if(this.options.cluster){var t=this.body.range.conversion(this.body.domProps.center.width).scale,i=this.clusterGenerator.getClusters(this.clusters,t,this.options.cluster);if(this.clusters!=i){if(this._detachAllClusters(),i){var e,n=Qd(i);try{for(n.s();!(e=n.n()).done;){e.value.attach()}}catch(t){n.e(t)}finally{n.f()}this.clusters=i}this._updateClusters(i)}}}},{key:"_detachAllClusters",value:function(){if(this.options.cluster&&this.clusters&&this.clusters.length){var t,i=Qd(this.clusters);try{for(i.s();!(t=i.n()).done;){t.value.detach()}}catch(t){i.e(t)}finally{i.f()}}}},{key:"_updateClusters",value:function(t){if(this.clusters&&this.clusters.length){var i,e,n=new Wu(ur(t).call(t,(function(t){return t.id}))),r=!1,s=Qd(os(i=this.clusters).call(i,(function(t){return!n.has(t.id)})));try{for(s.s();!(e=s.n()).done;){var o,a,h=e.value,u=js(o=this.selection).call(o,h.id);if(-1!==u)h.unselect(),Hr(a=this.selection).call(a,u,1),r=!0}}catch(t){s.e(t)}finally{s.f()}if(r){var l=this.getSelection();this.body.emitter.emit("select",{items:l,event})}}this.clusters=t||[]}}],[{key:"_getItemRange",value:function(t){var i=null,e=null;return Sr(t).call(t,(function(t){(null==e||t.start<e)&&(e=t.start),null!=t.end?(null==i||t.end>i)&&(i=t.end):(null==i||t.start>i)&&(i=t.start)})),{min:e,max:i}}},{key:"itemSetFromTarget",value:function(t){for(var i=t.target;i;){if(i.hasOwnProperty("vis-itemset"))return i["vis-itemset"];i=i.parentNode}return null}}]),e}(lf);rv.types={background:Nd,box:Ad,range:zd,point:Od},rv.prototype._onAdd=rv.prototype._onUpdate;var sv,ov=!1,av="background: #FFeeee; color: #dd0000",hv=function(){function t(){fn(this,t)}return vn(t,null,[{key:"validate",value:function(i,e,n){ov=!1,sv=e;var r=e;return void 0!==n&&(r=e[n]),t.parse(i,r,[]),ov}},{key:"parse",value:function(i,e,n){for(var r in i)i.hasOwnProperty(r)&&t.check(r,i,e,n)}},{key:"check",value:function(i,e,n,r){if(void 0!==n[i]||void 0!==n.__any__){var s=i,o=!0;void 0===n[i]&&void 0!==n.__any__&&(s="__any__",o="object"===t.getType(e[i]));var a=n[s];o&&void 0!==a.__type__&&(a=a.__type__),t.checkFields(i,e,n,s,a,r)}else t.getSuggestion(i,n,r)}},{key:"checkFields",value:function(i,e,n,r,s,o){var a=function(e){console.log("%c"+e+t.printLocation(o,i),av)},h=t.getType(e[i]),u=s[h];void 0!==u?"array"===t.getType(u)&&-1===js(u).call(u,e[i])?(a('Invalid option detected in "'+i+'". Allowed values are:'+t.print(u)+' not "'+e[i]+'". '),ov=!0):"object"===h&&"__any__"!==r&&(o=sf.copyAndExtendArray(o,i),t.parse(e[i],n[r],o)):void 0===s.any&&(a('Invalid type received for "'+i+'". Expected: '+t.print(cr(s))+". Received ["+h+'] "'+e[i]+'"'),ov=!0)}},{key:"getType",value:function(t){var i=qn(t);return"object"===i?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":rr(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===i?"number":"boolean"===i?"boolean":"string"===i?"string":void 0===i?"undefined":i}},{key:"getSuggestion",value:function(i,e,n){var r,s=t.findInOptions(i,e,n,!1),o=t.findInOptions(i,sv,[],!0);r=void 0!==s.indexMatch?" in "+t.printLocation(s.path,i,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+'"?\n\n':o.distance<=4&&s.distance>o.distance?" in "+t.printLocation(s.path,i,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(o.path,o.closestMatch,""):s.distance<=8?'. Did you mean "'+s.closestMatch+'"?'+t.printLocation(s.path,i):". Did you mean one of these: "+t.print(cr(e))+t.printLocation(n,i),console.log('%cUnknown option detected: "'+i+'"'+r,av),ov=!0}},{key:"findInOptions",value:function(i,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=1e9,o="",a=[],h=i.toLowerCase(),u=void 0;for(var l in e){var c=void 0;if(void 0!==e[l].__type__&&!0===r){var f=t.findInOptions(i,e[l],sf.copyAndExtendArray(n,l));s>f.distance&&(o=f.closestMatch,a=f.path,s=f.distance,u=f.indexMatch)}else{var d;-1!==js(d=l.toLowerCase()).call(d,h)&&(u=l),s>(c=t.levenshteinDistance(i,l))&&(o=l,a=sf.copyArray(n),s=c)}}return{closestMatch:o,path:a,distance:s,indexMatch:u}}},{key:"printLocation",value:function(t,i){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n",n="\n\n"+e+"options = {\n",r=0;r<t.length;r++){for(var s=0;s<r+1;s++)n+="  ";n+=t[r]+": {\n"}for(var o=0;o<t.length+1;o++)n+="  ";n+=i+"\n";for(var a=0;a<t.length+1;a++){for(var h=0;h<t.length-a;h++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return $s(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,i){if(0===t.length)return i.length;if(0===i.length)return t.length;var e,n,r=[];for(e=0;e<=i.length;e++)r[e]=[e];for(n=0;n<=t.length;n++)r[0][n]=n;for(e=1;e<=i.length;e++)for(n=1;n<=t.length;n++)i.charAt(e-1)==t.charAt(n-1)?r[e][n]=r[e-1][n-1]:r[e][n]=Math.min(r[e-1][n-1]+1,Math.min(r[e][n-1]+1,r[e-1][n]+1));return r[i.length][t.length]}}]),t}(),uv="string",lv="boolean",cv="number",fv="array",dv="date",vv="object",pv="moment",mv={configure:{enabled:{boolean:lv},filter:{boolean:lv,function:"function"},container:{dom:"dom"},__type__:{object:vv,boolean:lv,function:"function"}},align:{string:uv},alignCurrentTime:{string:uv,undefined:"undefined"},rtl:{boolean:lv,undefined:"undefined"},rollingMode:{follow:{boolean:lv},offset:{number:cv,undefined:"undefined"},__type__:{object:vv}},onTimeout:{timeoutMs:{number:cv},callback:{function:"function"},__type__:{object:vv}},verticalScroll:{boolean:lv,undefined:"undefined"},horizontalScroll:{boolean:lv,undefined:"undefined"},autoResize:{boolean:lv},throttleRedraw:{number:cv},clickToUse:{boolean:lv},dataAttributes:{string:uv,array:fv},editable:{add:{boolean:lv,undefined:"undefined"},remove:{boolean:lv,undefined:"undefined"},updateGroup:{boolean:lv,undefined:"undefined"},updateTime:{boolean:lv,undefined:"undefined"},overrideItems:{boolean:lv,undefined:"undefined"},__type__:{boolean:lv,object:vv}},end:{number:cv,date:dv,string:uv,moment:pv},format:{minorLabels:{millisecond:{string:uv,undefined:"undefined"},second:{string:uv,undefined:"undefined"},minute:{string:uv,undefined:"undefined"},hour:{string:uv,undefined:"undefined"},weekday:{string:uv,undefined:"undefined"},day:{string:uv,undefined:"undefined"},week:{string:uv,undefined:"undefined"},month:{string:uv,undefined:"undefined"},year:{string:uv,undefined:"undefined"},__type__:{object:vv,function:"function"}},majorLabels:{millisecond:{string:uv,undefined:"undefined"},second:{string:uv,undefined:"undefined"},minute:{string:uv,undefined:"undefined"},hour:{string:uv,undefined:"undefined"},weekday:{string:uv,undefined:"undefined"},day:{string:uv,undefined:"undefined"},week:{string:uv,undefined:"undefined"},month:{string:uv,undefined:"undefined"},year:{string:uv,undefined:"undefined"},__type__:{object:vv,function:"function"}},__type__:{object:vv}},moment:{function:"function"},groupHeightMode:{string:uv},groupOrder:{string:uv,function:"function"},groupEditable:{add:{boolean:lv,undefined:"undefined"},remove:{boolean:lv,undefined:"undefined"},order:{boolean:lv,undefined:"undefined"},__type__:{boolean:lv,object:vv}},groupOrderSwap:{function:"function"},height:{string:uv,number:cv},hiddenDates:{start:{date:dv,number:cv,string:uv,moment:pv},end:{date:dv,number:cv,string:uv,moment:pv},repeat:{string:uv},__type__:{object:vv,array:fv}},itemsAlwaysDraggable:{item:{boolean:lv,undefined:"undefined"},range:{boolean:lv,undefined:"undefined"},__type__:{boolean:lv,object:vv}},limitSize:{boolean:lv},locale:{string:uv},locales:{__any__:{any:"any"},__type__:{object:vv}},longSelectPressTime:{number:cv},margin:{axis:{number:cv},item:{horizontal:{number:cv,undefined:"undefined"},vertical:{number:cv,undefined:"undefined"},__type__:{object:vv,number:cv}},__type__:{object:vv,number:cv}},max:{date:dv,number:cv,string:uv,moment:pv},maxHeight:{number:cv,string:uv},maxMinorChars:{number:cv},min:{date:dv,number:cv,string:uv,moment:pv},minHeight:{number:cv,string:uv},moveable:{boolean:lv},multiselect:{boolean:lv},multiselectPerGroup:{boolean:lv},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:uv,undefined:"undefined"},item:{string:uv,undefined:"undefined"},__type__:{string:uv,object:vv}},selectable:{boolean:lv},sequentialSelection:{boolean:lv},showCurrentTime:{boolean:lv},showMajorLabels:{boolean:lv},showMinorLabels:{boolean:lv},showWeekScale:{boolean:lv},stack:{boolean:lv},stackSubgroups:{boolean:lv},cluster:{maxItems:{number:cv,undefined:"undefined"},titleTemplate:{string:uv,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:lv,undefined:"undefined"},fitOnDoubleClick:{boolean:lv,undefined:"undefined"},__type__:{boolean:lv,object:vv}},snap:{function:"function",null:"null"},start:{date:dv,number:cv,string:uv,moment:pv},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:uv,function:"function"},showTooltips:{boolean:lv},tooltip:{followMouse:{boolean:lv},overflowMethod:{string:["cap","flip","none"]},delay:{number:cv},template:{function:"function"},__type__:{object:vv}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:lv,object:vv}},timeAxis:{scale:{string:uv,undefined:"undefined"},step:{number:cv,undefined:"undefined"},__type__:{object:vv}},type:{string:uv},width:{string:uv,number:cv},preferZoom:{boolean:lv},zoomable:{boolean:lv},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:cv},zoomMax:{number:cv},zoomMin:{number:cv},xss:{disabled:{boolean:lv},filterOptions:{__any__:{any:"any"},__type__:{object:vv}},__type__:{object:vv}},__type__:{object:vv}},gv={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}},yv={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},bv=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;fn(this,t),this.pixelRatio=i,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return vn(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return yv[t]}},{key:"setColor",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var e,n=this._isColorString(t);if(void 0!==n&&(t=n),!0===sf.isString(t)){if(!0===sf.isValidRGB(t)){var r=t.substr(4).substr(0,t.length-5).split(",");e={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===sf.isValidRGBA(t)){var s=t.substr(5).substr(0,t.length-6).split(",");e={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(!0===sf.isValidHex(t)){var o=sf.hexToRGB(t);e={r:o.r,g:o.g,b:o.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var a=void 0!==t.a?t.a:"1.0";e={r:t.r,g:t.g,b:t.b,a}}if(void 0===e)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+$s(t));this._setColor(e,i)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!0===i&&(this.previousColor=sf.extend({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",qs((function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!0===i&&(this.initialColor=sf.extend({},t)),this.color=t;var e=sf.RGBToHSV(t.r,t.g,t.b),n=2*Math.PI,r=this.r*e.s,s=this.centerCoordinates.x+r*Math.sin(n*e.h),o=this.centerCoordinates.y+r*Math.cos(n*e.h);this.colorPickerSelector.style.left=s-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var i=sf.RGBToHSV(this.color.r,this.color.g,this.color.b);i.v=t/100;var e=sf.HSVToRGB(i.h,i.s,i.v);e.a=this.color.a,this.color=e,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,i=sf.RGBToHSV(t.r,t.g,t.b),e=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,n,r),e.putImageData(this.hueCircle,0,0),e.fillStyle="rgba(0,0,0,"+(1-i.v)+")",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Zs(e).call(e),this.brightnessRange.value=100*i.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,i,e,n;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var r=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var s=document.createElement("DIV");s.style.color="red",s.style.fontWeight="bold",s.style.padding="10px",s.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(s)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var o=this;this.opacityRange.onchange=function(){o._setOpacity(this.value)},this.opacityRange.oninput=function(){o._setOpacity(this.value)},this.brightnessRange.onchange=function(){o._setBrightness(this.value)},this.brightnessRange.oninput=function(){o._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=br(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=br(i=this._apply).call(i,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=br(e=this._save).call(e,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=br(n=this._loadLast).call(n,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new Of(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),Lf(this.hammer,(function(i){t._moveSelector(i)})),this.hammer.on("tap",(function(i){t._moveSelector(i)})),this.hammer.on("panstart",(function(i){t._moveSelector(i)})),this.hammer.on("panmove",(function(i){t._moveSelector(i)})),this.hammer.on("panend",(function(i){t._moveSelector(i)}))}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i,e,n,r,s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,s,o),this.centerCoordinates={x:.5*s,y:.5*o},this.r=.49*s;var a,h=2*Math.PI/360,u=1/this.r;for(n=0;n<360;n++)for(r=0;r<this.r;r++)i=this.centerCoordinates.x+r*Math.sin(h*n),e=this.centerCoordinates.y+r*Math.cos(h*n),a=sf.HSVToRGB(.002777777777777778*n,r*u,1),t.fillStyle="rgb("+a.r+","+a.g+","+a.b+")",t.fillRect(i-.5,e-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,s,o)}this.generated=!0}},{key:"_moveSelector",value:function(t){var i=this.colorPickerDiv.getBoundingClientRect(),e=t.center.x-i.left,n=t.center.y-i.top,r=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,o=e-s,a=n-r,h=Math.atan2(o,a),u=.98*Math.min(Math.sqrt(o*o+a*a),s),l=Math.cos(h)*u+r,c=Math.sin(h)*u+s;this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var f=h/(2*Math.PI);f=f<0?f+1:f;var d=u/this.r,v=sf.RGBToHSV(this.color.r,this.color.g,this.color.b);v.h=f,v.s=d;var p=sf.HSVToRGB(v.h,v.s,v.v);p.a=this.color.a,this.color=p,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}(),wv=function(){function t(i,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;fn(this,t),this.parent=i,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},sf.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new bv(r),this.wrapper=void 0}return vn(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var i=!0;if("string"==typeof t)this.options.filter=t;else if(rr(t))this.options.filter=t.join();else if("object"===qn(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==os(t)&&(this.options.filter=os(t)),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(i=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,i=t):"function"==typeof t&&(this.options.filter=t,i=!0);!1===os(this.options)&&(i=!1),this.options.enabled=i}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=os(this.options),i=0,e=!1;for(var n in this.configureOptions)this.configureOptions.hasOwnProperty(n)&&(this.allowCreation=!1,e=!1,"function"==typeof t?e=(e=t(n,[]))||this._handleObject(this.configureOptions[n],[n],!0):!0!==t&&-1===js(t).call(t,n)||(e=!0),!1!==e&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),i++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var i=this.moduleOptions,e=0;e<t.length;e++){if(void 0===i[t[e]]){i=void 0;break}i=i[t[e]]}return i}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var i=document.createElement("div");i.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Sr(n).call(n,(function(t){i.appendChild(t)})),this.domElements.push(i),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var i=document.createElement("div");i.className="vis-configuration vis-config-header",i.innerHTML=sf.xss(t),this._makeItem([],i)}},{key:"_makeLabel",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+i.length,n.innerHTML=!0===e?sf.xss("<i><b>"+t+":</b></i>"):sf.xss(t+":"),n}},{key:"_makeDropdown",value:function(t,i,e){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var r=0;void 0!==i&&-1!==js(t).call(t,i)&&(r=js(t).call(t,i));for(var s=0;s<t.length;s++){var o=document.createElement("option");o.value=t[s],s===r&&(o.selected="selected"),o.innerHTML=t[s],n.appendChild(o)}var a=this;n.onchange=function(){a._update(this.value,e)};var h=this._makeLabel(e[e.length-1],e);this._makeItem(e,h,n)}},{key:"_makeRange",value:function(t,i,e){var n=t[0],r=t[1],s=t[2],o=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=r,a.max=s}catch(t){}a.step=o;var h="",u=0;if(void 0!==i){var l=1.2;i<0&&i*l<r?(a.min=Math.ceil(i*l),u=a.min,h="range increased"):i/l<r&&(a.min=Math.ceil(i/l),u=a.min,h="range increased"),i*l>s&&1!==s&&(a.max=Math.ceil(i*l),u=a.max,h="range increased"),a.value=i}else a.value=n;var c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=Number(a.value);var f=this;a.onchange=function(){c.value=this.value,f._update(Number(this.value),e)},a.oninput=function(){c.value=this.value};var d=this._makeLabel(e[e.length-1],e),v=this._makeItem(e,d,a,c);""!==h&&this.popupHistory[v]!==u&&(this.popupHistory[v]=u,this._setupPopup(h,v))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var i=document.createElement("div");i.className="vis-configuration vis-config-button",i.innerHTML="generate options",i.onclick=function(){t._printOptions()},i.onmouseover=function(){i.className="vis-configuration vis-config-button hover"},i.onmouseout=function(){i.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(i)}}},{key:"_setupPopup",value:function(t,i){var e=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=sf.xss(t),n.onclick=function(){e._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:i}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var i=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=qs((function(){t.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=qs((function(){t._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(t,i,e){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==i&&(n.checked=i,i!==t&&("object"===qn(t)?i!==t.enabled&&this.changedOptions.push({path:e,value:i}):this.changedOptions.push({path:e,value:i})));var r=this;n.onchange=function(){r._update(this.checked,e)};var s=this._makeLabel(e[e.length-1],e);this._makeItem(e,s,n)}},{key:"_makeTextInput",value:function(t,i,e){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=i,i!==t&&this.changedOptions.push({path:e,value:i});var r=this;n.onchange=function(){r._update(this.value,e)};var s=this._makeLabel(e[e.length-1],e);this._makeItem(e,s,n)}},{key:"_makeColorField",value:function(t,i,e){var n=this,r=t[1],s=document.createElement("div");"none"!==(i=void 0===i?r:i)?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=i):s.className="vis-configuration vis-config-colorBlock none",i=void 0===i?r:i,s.onclick=function(){n._showColorPicker(i,s,e)};var o=this._makeLabel(e[e.length-1],e);this._makeItem(e,o,s)}},{key:"_showColorPicker",value:function(t,i,e){var n=this;i.onclick=function(){},this.colorPicker.insertTo(i),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback((function(t){var r="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";i.style.backgroundColor=r,n._update(r,e)})),this.colorPicker.setCloseCallback((function(){i.onclick=function(){n._showColorPicker(t,i,e)}}))}},{key:"_handleObject",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,r=os(this.options),s=!1;for(var o in t)if(t.hasOwnProperty(o)){n=!0;var a=t[o],h=sf.copyAndExtendArray(i,o);if("function"==typeof r&&!1===(n=r(o,i))&&!rr(a)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,n=this._handleObject(a,h,!0),this.allowCreation=!1===e),!1!==n){s=!0;var u=this._getValue(h);if(rr(a))this._handleArray(a,u,h);else if("string"==typeof a)this._makeTextInput(a,u,h);else if("boolean"==typeof a)this._makeCheckbox(a,u,h);else if(a instanceof Object){var l=!0;if(-1!==js(i).call(i,"physics")&&this.moduleOptions.physics.solver!==o&&(l=!1),!0===l)if(void 0!==a.enabled){var c=sf.copyAndExtendArray(h,"enabled"),f=this._getValue(c);if(!0===f){var d=this._makeLabel(o,h,!0);this._makeItem(h,d),s=this._handleObject(a,h)||s}else this._makeCheckbox(a,f,h)}else{var v=this._makeLabel(o,h,!0);this._makeItem(h,v),s=this._handleObject(a,h)||s}}else console.error("dont know how to handle",a,o,h)}}return s}},{key:"_handleArray",value:function(t,i,e){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,i,e),t[1]!==i&&this.changedOptions.push({path:e,value:i})):"string"==typeof t[0]?(this._makeDropdown(t,i,e),t[0]!==i&&this.changedOptions.push({path:e,value:i})):"number"==typeof t[0]&&(this._makeRange(t,i,e),t[0]!==i&&this.changedOptions.push({path:e,value:Number(i)}))}},{key:"_update",value:function(t,i){var e=this._constructOptions(t,i);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",e),this.initialized=!0,this.parent.setOptions(e)}},{key:"_constructOptions",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e;t="false"!==(t="true"===t||t)&&t;for(var r=0;r<i.length;r++)"global"!==i[r]&&(void 0===n[i[r]]&&(n[i[r]]={}),r!==i.length-1?n=n[i[r]]:n[i[r]]=t);return e}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+$s(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},i=0;i<this.changedOptions.length;i++)this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,t);return t}}]),t}();function kv(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var _v=function(t){hu(e,t);var i=kv(e);function e(t,n,r,s){var o,a,h,u,l,c,f,d;if(fn(this,e),(d=i.call(this)).initTime=new Date,d.itemsDone=!1,!(ru(d)instanceof e))throw new SyntaxError("Constructor must be called with the new operator");if(!rr(r)&&!Xl("id",r)&&r instanceof Object){var v=s;s=r,r=v}s&&s.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var p=ru(d);if(d.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:Zl},d.options=sf.deepExtend({},d.defaultOptions),s&&sf.setupXSSProtection(s.xss),d._create(t),!s||s&&void 0===s.rtl){var m;d.dom.root.style.visibility="hidden";for(var g=d.dom.root;!m&&g;)m=window.getComputedStyle(g,null).direction,g=g.parentElement;d.options.rtl=m&&"rtl"==m.toLowerCase()}else d.options.rtl=s.rtl;s&&(s.rollingMode&&(d.options.rollingMode=s.rollingMode),s.onInitialDrawComplete&&(d.options.onInitialDrawComplete=s.onInitialDrawComplete),s.onTimeout&&(d.options.onTimeout=s.onTimeout),s.loadingScreenTemplate&&(d.options.loadingScreenTemplate=s.loadingScreenTemplate));var y=document.createElement("div");if(d.options.loadingScreenTemplate){var b,w=br(b=d.options.loadingScreenTemplate).call(b,ru(d)),k=w(d.dom.loadingScreen);k instanceof Object&&!(k instanceof Element)?w(y):k instanceof Element?(y.innerHTML="",y.appendChild(k)):null!=k&&(y.innerHTML=sf.xss(k))}function _(t,i){p.hasListeners(t)&&p.emit(t,p.getEventProperties(i))}return d.dom.loadingScreen.appendChild(y),d.components=[],d.body={dom:d.dom,domProps:d.props,emitter:{on:br(o=d.on).call(o,ru(d)),off:br(a=d.off).call(a,ru(d)),emit:br(h=d.emit).call(h,ru(d))},hiddenDates:[],util:{getScale:function(){return p.timeAxis.step.scale},getStep:function(){return p.timeAxis.step.step},toScreen:br(u=p._toScreen).call(u,p),toGlobalScreen:br(l=p._toGlobalScreen).call(l,p),toTime:br(c=p._toTime).call(c,p),toGlobalTime:br(f=p._toGlobalTime).call(f,p)}},d.range=new jf(d.body,d.options),d.components.push(d.range),d.body.range=d.range,d.timeAxis=new Nf(d.body,d.options),d.timeAxis2=null,d.components.push(d.timeAxis),d.currentTime=new od(d.body,d.options),d.components.push(d.currentTime),d.itemSet=new rv(d.body,d.options),d.components.push(d.itemSet),d.itemsData=null,d.groupsData=null,d.dom.root.onclick=function(t){_("click",t)},d.dom.root.ondblclick=function(t){_("doubleClick",t)},d.dom.root.oncontextmenu=function(t){_("contextmenu",t)},d.dom.root.onmouseover=function(t){_("mouseOver",t)},window.PointerEvent?(d.dom.root.onpointerdown=function(t){_("mouseDown",t)},d.dom.root.onpointermove=function(t){_("mouseMove",t)},d.dom.root.onpointerup=function(t){_("mouseUp",t)}):(d.dom.root.onmousemove=function(t){_("mouseMove",t)},d.dom.root.onmousedown=function(t){_("mouseDown",t)},d.dom.root.onmouseup=function(t){_("mouseUp",t)}),d.initialFitDone=!1,d.on("changed",(function(){if(null!=p.itemsData){if(!p.initialFitDone&&!p.options.rollingMode)if(p.initialFitDone=!0,null!=p.options.start||null!=p.options.end){if(null==p.options.start||null==p.options.end)var t=p.getItemRange();var i=null!=p.options.start?p.options.start:t.min,e=null!=p.options.end?p.options.end:t.max;p.setWindow(i,e,{animation:!1})}else p.fit({animation:!1});p.initialDrawDone||!p.initialRangeChangeDone&&(p.options.start||p.options.end)&&!p.options.rollingMode||(p.initialDrawDone=!0,p.itemSet.initialDrawDone=!0,p.dom.root.style.visibility="visible",p.dom.loadingScreen.parentNode.removeChild(p.dom.loadingScreen),p.options.onInitialDrawComplete&&qs((function(){return p.options.onInitialDrawComplete()}),0))}})),d.on("destroyTimeline",(function(){p.destroy()})),s&&d.setOptions(s),d.body.emitter.on("fit",(function(t){d._onFit(t),d.redraw()})),r&&d.setGroups(r),n&&d.setItems(n),d._redraw(),d}return vn(e,[{key:"_createConfigurator",value:function(){return new wv(this,this.dom.container,gv)}},{key:"redraw",value:function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}},{key:"setOptions",value:function(t){if(!0===hv.validate(t,mv)&&console.log("%cErrors have been found in the supplied options object.",av),rd.prototype.setOptions.call(this,t),"type"in t&&t.type!==this.options.type){this.options.type=t.type;var i=this.itemsData;if(i){var e=this.getSelection();this.setItems(null),this.setItems(i.rawDS),this.setSelection(e)}}}},{key:"setItems",value:function(t){var i;this.itemsDone=!1,i=t?Xl("id",t)?tf(t):tf(new ql(t)):null,this.itemsData&&this.itemsData.dispose(),this.itemsData=i,this.itemSet&&this.itemSet.setItems(null!=i?i.rawDS:null)}},{key:"setGroups",value:function(t){var i;t?(rr(t)&&(t=new ql(t)),i=new Vl(t,{filter:function(t){return!1!==t.visible}})):i=null,null!=this.groupsData&&"function"==typeof this.groupsData.setData&&this.groupsData.setData(null),this.groupsData=i,this.itemSet.setGroups(i)}},{key:"setData",value:function(t){t&&t.groups&&this.setGroups(t.groups),t&&t.items&&this.setItems(t.items)}},{key:"setSelection",value:function(t,i){this.itemSet&&this.itemSet.setSelection(t),i&&i.focus&&this.focus(t,i)}},{key:"getSelection",value:function(){return this.itemSet&&this.itemSet.getSelection()||[]}},{key:"focus",value:function(t,i){if(this.itemsData&&null!=t){var e=rr(t)?t:[t],n=this.itemsData.get(e),r=null,s=null;if(Sr(n).call(n,(function(t){var i=t.start.valueOf(),e="end"in t?t.end.valueOf():t.start.valueOf();(null===r||i<r)&&(r=i),(null===s||e>s)&&(s=e)})),null!==r&&null!==s){var o=this,a=this.itemSet.items[e[0]],h=-1*this._getScrollTop(),u=null,l=function(){var t=Mv(o,a);t.shouldScroll&&t.itemTop!=u.itemTop&&(o._setScrollTop(-t.scrollOffset),o._redraw())},c=!i||void 0===i.zoom||i.zoom,f=(r+s)/2,d=c?1.1*(s-r):Math.max(this.range.end-this.range.start,1.1*(s-r)),v=!i||void 0===i.animation||i.animation;v||(u={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(f-d/2,f+d/2,{animation:v},(function(){l(),qs(l,100)}),(function(t,i,e){var n=Mv(o,a);if(!1!==n&&(u||(u=n),u.itemTop!=n.itemTop||u.shouldScroll)){u.itemTop!=n.itemTop&&n.shouldScroll&&(u=n,h=-1*o._getScrollTop());var r=h,s=u.scrollOffset,l=e?s:r+(s-r)*t;o._setScrollTop(-l),i||o._redraw()}}))}}}},{key:"fit",value:function(t,i){var e,n=!t||void 0===t.animation||t.animation;1===this.itemsData.length&&void 0===this.itemsData.get()[0].end?(e=this.getDataRange(),this.moveTo(e.min.valueOf(),{animation:n},i)):(e=this.getItemRange(),this.range.setRange(e.min,e.max,{animation:n},i))}},{key:"getItemRange",value:function(){var t=this,i=this.getDataRange(),e=null!==i.min?i.min.valueOf():null,n=null!==i.max?i.max.valueOf():null,r=null,s=null;if(null!=e&&null!=n){var o=n-e;o<=0&&(o=10);var a=o/this.props.center.width,h={},u=0;if(Sr(sf).call(sf,this.itemSet.items,(function(t,i){if(t.groupShowing){h[i]=t.redraw(!0),u=h[i].length}})),u>0)for(var l=function(t){Sr(sf).call(sf,h,(function(i){i[t]()}))},c=0;c<u;c++)l(c);if(Sr(sf).call(sf,this.itemSet.items,(function(i){var o,h,u=xv(i),l=Dv(i);t.options.rtl?(o=u-(i.getWidthRight()+10)*a,h=l+(i.getWidthLeft()+10)*a):(o=u-(i.getWidthLeft()+10)*a,h=l+(i.getWidthRight()+10)*a),o<e&&(e=o,r=i),h>n&&(n=h,s=i)})),r&&s){var f=r.getWidthLeft()+10,d=s.getWidthRight()+10,v=this.props.center.width-f-d;v>0&&(this.options.rtl?(e=xv(r)-d*o/v,n=Dv(s)+f*o/v):(e=xv(r)-f*o/v,n=Dv(s)+d*o/v))}}return{min:null!=e?new Date(e):null,max:null!=n?new Date(n):null}}},{key:"getDataRange",value:function(){var t,i=null,e=null;this.itemsData&&Sr(t=this.itemsData).call(t,(function(t){var n=sf.convert(t.start,"Date").valueOf(),r=sf.convert(null!=t.end?t.end:t.start,"Date").valueOf();(null===i||n<i)&&(i=n),(null===e||r>e)&&(e=r)}));return{min:null!=i?new Date(i):null,max:null!=e?new Date(e):null}}},{key:"getEventProperties",value:function(t){var i=t.center?t.center.x:t.clientX,e=t.center?t.center.y:t.clientY,n=this.dom.centerContainer.getBoundingClientRect(),r=this.options.rtl?n.right-i:i-n.left,s=e-n.top,o=this.itemSet.itemFromTarget(t),a=this.itemSet.groupFromTarget(t),h=nd.customTimeFromTarget(t),u=this.itemSet.options.snap||null,l=this.body.util.getScale(),c=this.body.util.getStep(),f=this._toTime(r),d=u?u(f,l,c):f,v=sf.getTarget(t),p=null;return null!=o?p="item":null!=h?p="custom-time":sf.hasParent(v,this.timeAxis.dom.foreground)||this.timeAxis2&&sf.hasParent(v,this.timeAxis2.dom.foreground)?p="axis":sf.hasParent(v,this.itemSet.dom.labelSet)?p="group-label":sf.hasParent(v,this.currentTime.bar)?p="current-time":sf.hasParent(v,this.dom.center)&&(p="background"),{event:t,item:o?o.id:null,isCluster:!!o&&!!o.isCluster,items:o?o.items||[]:null,group:a?a.groupId:null,customTime:h?h.options.id:null,what:p,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:r,y:s,time:f,snappedTime:d}}},{key:"toggleRollingMode",value:function(){this.range.rolling?this.range.stopRolling():(null==this.options.rollingMode&&this.setOptions(this.options),this.range.startRolling())}},{key:"_redraw",value:function(){rd.prototype._redraw.call(this)}},{key:"_onFit",value:function(t){var i=t.start,e=t.end,n=t.animation;e?this.range.setRange(i,e,{animation:n}):this.moveTo(i.valueOf(),{animation:n})}}]),e}(rd);function xv(t){return sf.convert(t.data.start,"Date").valueOf()}function Dv(t){var i=null!=t.data.end?t.data.end:t.data.start;return sf.convert(i,"Date").valueOf()}function Mv(t,i){if(!i.parent)return!1;var e=t.options.rtl?t.props.rightContainer.height:t.props.leftContainer.height,n=t.props.center.height,r=i.parent,s=r.top,o=!0,a=t.timeAxis.options.orientation.axis,h=function(){return"bottom"==a?r.height-i.top-i.height:i.top},u=-1*t._getScrollTop(),l=s+h(),c=i.height;return l<u?s+e<=s+h()+c&&(s+=h()-t.itemSet.options.margin.item.vertical):l+c>u+e?s+=h()+c-e+t.itemSet.options.margin.item.vertical:o=!1,{shouldScroll:o,scrollOffset:s=Math.min(s,n-e),itemTop:l}}var Sv=function(){function t(i,e,n,r,s,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(fn(this,t),this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=s,this.majorCharHeight=o,this._start=i,this._end=e,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=a,this.autoScaleStart=n,this.autoScaleEnd=r,this.formattingFunction=h,n||r){var u=this,l=function(t){var i=t-t%(u.magnitudefactor*u.minorSteps[u.minorStepIdx]);return t%(u.magnitudefactor*u.minorSteps[u.minorStepIdx])>u.magnitudefactor*u.minorSteps[u.minorStepIdx]*.5?i+u.magnitudefactor*u.minorSteps[u.minorStepIdx]:i};n&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=l(this._start)),r&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=l(this._end)),this.determineScale()}}return vn(t,[{key:"setCharHeight",value:function(t){this.majorCharHeight=t}},{key:"setHeight",value:function(t){this.containerHeight=t}},{key:"determineScale",value:function(){var t=this._end-this._start;this.scale=this.containerHeight/t;var i=this.majorCharHeight/this.scale,e=t>0?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,e);var n=0;e<0&&(n=e);for(var r=!1,s=n;Math.abs(s)<=Math.abs(e);s++){this.magnitudefactor=Math.pow(10,s);for(var o=0;o<this.minorSteps.length;o++){if(this.magnitudefactor*this.minorSteps[o]>=i){r=!0,this.minorStepIdx=o;break}}if(!0===r)break}}},{key:"is_major",value:function(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])==0}},{key:"getStep",value:function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}},{key:"getFirstMajor",value:function(){var t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)}},{key:"formatValue",value:function(t){var i=t.toPrecision(5);return"function"==typeof this.formattingFunction&&(i=this.formattingFunction(t)),"number"==typeof i?"".concat(i):"string"==typeof i?i:t.toPrecision(5)}},{key:"getLines",value:function(){for(var t=[],i=this.getStep(),e=(i-this._start%i)%i,n=this._start+e;this._end-n>1e-5;n+=i)n!=this._start&&t.push({major:this.is_major(n),y:this.convertValue(n),val:this.formatValue(n)});return t}},{key:"followScale",value:function(t){var i=this.minorStepIdx,e=this._start,n=this._end,r=this,s=function(){r.magnitudefactor*=2},o=function(){r.magnitudefactor/=2};t.minorStepIdx<=1&&this.minorStepIdx<=1||t.minorStepIdx>1&&this.minorStepIdx>1||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==i||s(),s()):(this.minorStepIdx=2,1==i||o(),o()));for(var a=t.convertValue(0),h=t.getStep()*t.scale,u=!1,l=0;!u&&l++<5;){this.scale=h/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var c=this.containerHeight/this.scale;this._start=e,this._end=this._start+c;var f=this._end*this.scale,d=this.magnitudefactor*this.majorSteps[this.minorStepIdx],v=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){var p=a-f;this._end+=p/this.scale,this._start=this._end-c}else this.autoScaleStart?(this._start-=v/this.scale,this._end=this._start+c):(this._start+=d-v/this.scale,this._end=this._start+c);if(!this.autoScaleEnd&&this._end>n+1e-5)o(),u=!1;else{if(!this.autoScaleStart&&this._start<e-1e-5){if(!(this.zeroAlign&&e>=0)){o(),u=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}this.autoScaleStart&&this.autoScaleEnd&&c<n-e?(s(),u=!1):u=!0}}}},{key:"convertValue",value:function(t){return this.containerHeight-(t-this._start)*this.scale}},{key:"screenToValue",value:function(t){return(this.containerHeight-t)/this.scale+this._start}}]),t}();function Fv(t,i){var e=void 0!==Kn&&ue(t)||t["@@iterator"];if(!e){if(rr(t)||(e=function(t,i){var e;if(!t)return;if("string"==typeof t)return Tv(t,i);var n=er(e=Object.prototype.toString.call(t)).call(e,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return ie(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tv(t,i)}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw s}}}}function Tv(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function jv(t){var i=function(){if("undefined"==typeof Reflect||!eu)return!1;if(eu.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(eu(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=cu(t);if(i){var r=cu(this).constructor;e=eu(n,arguments,r)}else e=n.apply(this,arguments);return uu(this,e)}}var Yv=function(t){hu(e,t);var i=jv(e);function e(t,n,r,s){var o;fn(this,e),(o=i.call(this)).id=Ol(),o.body=t,o.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(t){return"".concat(uf(t.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(t){return"".concat(uf(t.toPrecision(3)))},title:{text:void 0,style:void 0}}},o.linegraphOptions=s,o.linegraphSVG=r,o.props={},o.DOMelements={lines:{},labels:{},title:{}},o.dom={},o.scale=void 0,o.range={start:0,end:0},o.options=sf.extend({},o.defaultOptions),o.conversionFactor=1,o.setOptions(n),o.width=Number("".concat(o.options.width).replace("px","")),o.minWidth=o.width,o.height=o.linegraphSVG.getBoundingClientRect().height,o.hidden=!1,o.stepPixels=25,o.zeroCrossing=-1,o.amountOfSteps=-1,o.lineOffset=0,o.master=!0,o.masterAxis=null,o.svgElements={},o.iconsRemoved=!1,o.groups={},o.amountOfGroups=0,o._create(),null==o.scale&&o._redrawLabels(),o.framework={svg:o.svg,svgElements:o.svgElements,options:o.options,groups:o.groups};var a=ru(o);return o.body.emitter.on("verticalDrag",(function(){a.dom.lineContainer.style.top="".concat(a.body.domProps.scrollTop,"px")})),o}return vn(e,[{key:"addGroup",value:function(t,i){this.groups.hasOwnProperty(t)||(this.groups[t]=i),this.amountOfGroups+=1}},{key:"updateGroup",value:function(t,i){this.groups.hasOwnProperty(t)||(this.amountOfGroups+=1),this.groups[t]=i}},{key:"removeGroup",value:function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)}},{key:"setOptions",value:function(t){if(t){var i=!1;this.options.orientation!=t.orientation&&void 0!==t.orientation&&(i=!0);sf.selectiveDeepExtend(["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"],this.options,t),this.minWidth=Number("".concat(this.options.width).replace("px","")),!0===i&&this.dom.frame&&(this.hide(),this.show())}}},{key:"_create",value:function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}},{key:"_redrawGroupIcons",value:function(){var t;$h(this.svgElements);var i=this.options.iconWidth,e=11.5;t="left"===this.options.orientation?4:this.width-i-4;var n=cr(this.groups);cl(n).call(n,(function(t,i){return t<i?-1:1}));var r,s=Fv(n);try{for(s.s();!(r=s.n()).done;){var o=r.value;!0!==this.groups[o].visible||void 0!==this.linegraphOptions.visibility[o]&&!0!==this.linegraphOptions.visibility[o]||(this.groups[o].getLegend(i,15,this.framework,t,e),e+=19)}}catch(t){s.e(t)}finally{s.f()}Gh(this.svgElements),this.iconsRemoved=!1}},{key:"_cleanupIcons",value:function(){!1===this.iconsRemoved&&($h(this.svgElements),Gh(this.svgElements),this.iconsRemoved=!0)}},{key:"show",value:function(){this.hidden=!1,this.dom.frame.parentNode||("left"===this.options.orientation?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}},{key:"hide",value:function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}},{key:"setRange",value:function(t,i){this.range.start=t,this.range.end=i}},{key:"redraw",value:function(){var t=!1,i=0;for(var e in this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px"),this.groups)this.groups.hasOwnProperty(e)&&(!0!==this.groups[e].visible||void 0!==this.linegraphOptions.visibility[e]&&!0!==this.linegraphOptions.visibility[e]||i++);if(0===this.amountOfGroups||0===i)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=!0===this.options.visible?Number("".concat(this.options.width).replace("px","")):0;var n=this.props,r=this.dom.frame;r.className="vis-data-axis",this._calculateCharSize();var s=this.options.orientation,o=this.options.showMinorLabels,a=this.options.showMajorLabels,h=this.body.dom.backgroundHorizontal.offsetWidth;n.minorLabelHeight=o?n.minorCharHeight:0,n.majorLabelHeight=a?n.majorCharHeight:0,n.minorLineWidth=h-this.lineOffset-this.width+2*this.options.minorLinesOffset,n.minorLineHeight=1,n.majorLineWidth=h-this.lineOffset-this.width+2*this.options.majorLinesOffset,n.majorLineHeight=1,"left"===s?(r.style.top="0",r.style.left="0",r.style.bottom="",r.style.width="".concat(this.width,"px"),r.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(r.style.top="",r.style.bottom="0",r.style.left="0",r.style.width="".concat(this.width,"px"),r.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),t=this._redrawLabels(),t=this._isResized()||t,!0===this.options.icons?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(s)}return t}},{key:"_redrawLabels",value:function(){var t=this,i=!1;$h(this.DOMelements.lines),$h(this.DOMelements.labels);var e=this.options.orientation,n=null!=this.options[e].range?this.options[e].range:{},r=!0;null!=n.max&&(this.range.end=n.max,r=!1);var s=!0;null!=n.min&&(this.range.start=n.min,s=!1),this.scale=new Sv(this.range.start,this.range.end,s,r,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[e].format),!1===this.master&&null!=this.masterAxis?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;var o=this.scale.getLines();Sr(o).call(o,(function(i){var n=i.y,r=i.major;t.options.showMinorLabels&&!1===r&&t._redrawLabel(n-2,i.val,e,"vis-y-axis vis-minor",t.props.minorCharHeight),r&&n>=0&&t._redrawLabel(n-2,i.val,e,"vis-y-axis vis-major",t.props.majorCharHeight),!0===t.master&&(r?t._redrawLine(n,e,"vis-grid vis-horizontal vis-major",t.options.majorLinesOffset,t.props.majorLineWidth):t._redrawLine(n,e,"vis-grid vis-horizontal vis-minor",t.options.minorLinesOffset,t.props.minorLineWidth))}));var a=0;void 0!==this.options[e].title&&void 0!==this.options[e].title.text&&(a=this.props.titleCharHeight);var h=!0===this.options.icons?Math.max(this.options.iconWidth,a)+this.options.labelOffsetX+15:a+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-h&&!0===this.options.visible?(this.width=this.maxLabelSize+h,this.options.width="".concat(this.width,"px"),Gh(this.DOMelements.lines),Gh(this.DOMelements.labels),this.redraw(),i=!0):this.maxLabelSize<this.width-h&&!0===this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+h),this.options.width="".concat(this.width,"px"),Gh(this.DOMelements.lines),Gh(this.DOMelements.labels),this.redraw(),i=!0):(Gh(this.DOMelements.lines),Gh(this.DOMelements.labels),i=!1),i}},{key:"convertValue",value:function(t){return this.scale.convertValue(t)}},{key:"screenToValue",value:function(t){return this.scale.screenToValue(t)}},{key:"_redrawLabel",value:function(t,i,e,n,r){var s=qh("div",this.DOMelements.labels,this.dom.frame);s.className=n,s.innerHTML=sf.xss(i),"left"===e?(s.style.left="-".concat(this.options.labelOffsetX,"px"),s.style.textAlign="right"):(s.style.right="-".concat(this.options.labelOffsetX,"px"),s.style.textAlign="left"),s.style.top="".concat(t-.5*r+this.options.labelOffsetY,"px"),i+="";var o=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<i.length*o&&(this.maxLabelSize=i.length*o)}},{key:"_redrawLine",value:function(t,i,e,n,r){if(!0===this.master){var s=qh("div",this.DOMelements.lines,this.dom.lineContainer);s.className=e,s.innerHTML="","left"===i?s.style.left="".concat(this.width-n,"px"):s.style.right="".concat(this.width-n,"px"),s.style.width="".concat(r,"px"),s.style.top="".concat(t,"px")}}},{key:"_redrawTitle",value:function(t){if($h(this.DOMelements.title),void 0!==this.options[t].title&&void 0!==this.options[t].title.text){var i=qh("div",this.DOMelements.title,this.dom.frame);i.className="vis-y-axis vis-title vis-".concat(t),i.innerHTML=sf.xss(this.options[t].title.text),void 0!==this.options[t].title.style&&sf.addCssText(i,this.options[t].title.style),"left"===t?i.style.left="".concat(this.props.titleCharHeight,"px"):i.style.right="".concat(this.props.titleCharHeight,"px"),i.style.width="".concat(this.height,"px")}Gh(this.DOMelements.title)}},{key:"_calculateCharSize",value:function(){if(!("minorCharHeight"in this.props)){var t=document.createTextNode("0"),i=document.createElement("div");i.className="vis-y-axis vis-minor vis-measure",i.appendChild(t),this.dom.frame.appendChild(i),this.props.minorCharHeight=i.clientHeight,this.props.minorCharWidth=i.clientWidth,this.dom.frame.removeChild(i)}if(!("majorCharHeight"in this.props)){var e=document.createTextNode("0"),n=document.createElement("div");n.className="vis-y-axis vis-major vis-measure",n.appendChild(e),this.dom.frame.appendChild(n),this.props.majorCharHeight=n.clientHeight,this.props.majorCharWidth=n.clientWidth,this.dom.frame.removeChild(n)}if(!("titleCharHeight"in this.props)){var r=document.createTextNode("0"),s=document.createElement("div");s.className="vis-y-axis vis-title vis-measure",s.appendChild(r),this.dom.frame.appendChild(s),this.props.titleCharHeight=s.clientHeight,this.props.titleCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}}}]),e}(lf);function Ev(t,i){}function Av(t,i){return{style:(i=void 0===i?{}:i).style||t.options.drawPoints.style,styles:i.styles||t.options.drawPoints.styles,size:i.size||t.options.drawPoints.size,className:i.className||t.className}}function Cv(t,i){}function Ov(t,i){}function Lv(t,i,e,n){this.id=i;this.options=sf.selectiveBridgeObject(["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"],e),this.usingDefaultStyle=void 0===t.className,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(t),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===t.visible||t.visible}function zv(t,i,e,n){this.body=t,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=e,this.options=sf.extend({},this.defaultOptions),this.linegraphOptions=n,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(i)}Ev.draw=function(t,i,e,n){n=n||0;for(var r=function(t,i){var e=void 0;t.options&&t.options.drawPoints&&t.options.drawPoints.onRender&&"function"==typeof t.options.drawPoints.onRender&&(e=t.options.drawPoints.onRender);i.group.options&&i.group.options.drawPoints&&i.group.options.drawPoints.onRender&&"function"==typeof i.group.options.drawPoints.onRender&&(e=i.group.options.drawPoints.onRender);return e}(e,i),s=0;s<t.length;s++)if(r){var o=r(t[s],i);!0!==o&&"object"!==qn(o)||Vh(t[s].screen_x+n,t[s].screen_y,Av(i,o),e.svgElements,e.svg,t[s].label)}else Vh(t[s].screen_x+n,t[s].screen_y,Av(i),e.svgElements,e.svg,t[s].label)},Ev.drawIcon=function(t,i,e,n,r,s){var o=.5*r,a=Uh("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",i),a.setAttributeNS(null,"y",e-o),a.setAttributeNS(null,"width",n),a.setAttributeNS(null,"height",2*o),a.setAttributeNS(null,"class","vis-outline"),Vh(i+.5*n,e,Av(t),s.svgElements,s.svg)},Cv.drawIcon=function(t,i,e,n,r,s){var o=.5*r,a=Uh("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",i),a.setAttributeNS(null,"y",e-o),a.setAttributeNS(null,"width",n),a.setAttributeNS(null,"height",2*o),a.setAttributeNS(null,"class","vis-outline");var h=Math.round(.3*n),u=t.options.barChart.width/h,l=Math.round(.4*r),c=Math.round(.75*r),f=Math.round((n-2*h)/3);if(Xh(i+.5*h+f,e+o-l-1,h,l,t.className+" vis-bar",s.svgElements,s.svg,t.style),Xh(i+1.5*h+f+2,e+o-c-1,h,c,t.className+" vis-bar",s.svgElements,s.svg,t.style),1==t.options.drawPoints.enabled){var d={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size/u,className:t.className};Vh(i+.5*h+f,e+o-l-1,d,s.svgElements,s.svg),Vh(i+1.5*h+f+2,e+o-c-1,d,s.svgElements,s.svg)}},Cv.draw=function(t,i,e){var n,r,s,o,a,h,u=[],l={},c=0;for(a=0;a<t.length;a++)if("bar"===(o=e.groups[t[a]]).options.style&&!0===o.visible&&(void 0===e.options.groups.visibility[t[a]]||!0===e.options.groups.visibility[t[a]]))for(h=0;h<i[t[a]].length;h++)u.push({screen_x:i[t[a]][h].screen_x,screen_end:i[t[a]][h].screen_end,screen_y:i[t[a]][h].screen_y,x:i[t[a]][h].x,end:i[t[a]][h].end,y:i[t[a]][h].y,groupId:t[a],label:i[t[a]][h].label}),c+=1;if(0!==c)for(cl(u).call(u,(function(t,i){return t.screen_x===i.screen_x?t.groupId<i.groupId?-1:1:t.screen_x-i.screen_x})),Cv._getDataIntersections(l,u),a=0;a<u.length;a++){var f=null!=(o=e.groups[u[a].groupId]).options.barChart.minWidth?o.options.barChart.minWidth:.1*o.options.barChart.width,d=0;if(void 0===l[r=u[a].screen_x])a+1<u.length&&(n=Math.abs(u[a+1].screen_x-r)),s=Cv._getSafeDrawData(n,o,f);else{var v=a+(l[r].amount-l[r].resolved);v<u.length&&(n=Math.abs(u[v].screen_x-r)),s=Cv._getSafeDrawData(n,o,f),l[r].resolved+=1,!0===o.options.stack&&!0!==o.options.excludeFromStacking?u[a].screen_y<o.zeroPosition?(d=l[r].accumulatedNegative,l[r].accumulatedNegative+=o.zeroPosition-u[a].screen_y):(d=l[r].accumulatedPositive,l[r].accumulatedPositive+=o.zeroPosition-u[a].screen_y):!0===o.options.barChart.sideBySide&&(s.width=s.width/l[r].amount,s.offset+=l[r].resolved*s.width-.5*s.width*(l[r].amount+1))}var p=s.width,m=u[a].screen_x;if(null!=u[a].screen_end?m+=.5*(p=u[a].screen_end-u[a].screen_x):m+=s.offset,Xh(m,u[a].screen_y-d,p,o.zeroPosition-u[a].screen_y,o.className+" vis-bar",e.svgElements,e.svg,o.style),!0===o.options.drawPoints.enabled){var g={screen_x:u[a].screen_x,screen_y:u[a].screen_y-d,x:u[a].x,y:u[a].y,groupId:u[a].groupId,label:u[a].label};Ev.draw([g],o,e,s.offset)}}},Cv._getDataIntersections=function(t,i){for(var e,n=0;n<i.length;n++)n+1<i.length&&(e=Math.abs(i[n+1].screen_x-i[n].screen_x)),n>0&&(e=Math.min(e,Math.abs(i[n-1].screen_x-i[n].screen_x))),0===e&&(void 0===t[i[n].screen_x]&&(t[i[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),t[i[n].screen_x].amount+=1)},Cv._getSafeDrawData=function(t,i,e){var n,r;return t<i.options.barChart.width&&t>0?(n=t<e?e:t,r=0,"left"===i.options.barChart.align?r-=.5*t:"right"===i.options.barChart.align&&(r+=.5*t)):(n=i.options.barChart.width,r=0,"left"===i.options.barChart.align?r-=.5*i.options.barChart.width:"right"===i.options.barChart.align&&(r+=.5*i.options.barChart.width)),{width:n,offset:r}},Cv.getStackedYRange=function(t,i,e,n,r){if(t.length>0){cl(t).call(t,(function(t,i){return t.screen_x===i.screen_x?t.groupId<i.groupId?-1:1:t.screen_x-i.screen_x}));var s={};Cv._getDataIntersections(s,t),i[n]=Cv._getStackedYRange(s,t),i[n].yAxisOrientation=r,e.push(n)}},Cv._getStackedYRange=function(t,i){for(var e,n=i[0].screen_y,r=i[0].screen_y,s=0;s<i.length;s++)void 0===t[e=i[s].screen_x]?(n=n>i[s].screen_y?i[s].screen_y:n,r=r<i[s].screen_y?i[s].screen_y:r):i[s].screen_y<0?t[e].accumulatedNegative+=i[s].screen_y:t[e].accumulatedPositive+=i[s].screen_y;for(var o in t)t.hasOwnProperty(o)&&(n=(n=n>t[o].accumulatedNegative?t[o].accumulatedNegative:n)>t[o].accumulatedPositive?t[o].accumulatedPositive:n,r=(r=r<t[o].accumulatedNegative?t[o].accumulatedNegative:r)<t[o].accumulatedPositive?t[o].accumulatedPositive:r);return{min:n,max:r}},Ov.calcPath=function(t,i){if(null!=t&&t.length>0){return 1==i.options.interpolation.enabled?Ov._catmullRom(t,i):Ov._linear(t)}},Ov.drawIcon=function(t,i,e,n,r,s){var o,a,h=.5*r,u=Uh("rect",s.svgElements,s.svg);(u.setAttributeNS(null,"x",i),u.setAttributeNS(null,"y",e-h),u.setAttributeNS(null,"width",n),u.setAttributeNS(null,"height",2*h),u.setAttributeNS(null,"class","vis-outline"),(o=Uh("path",s.svgElements,s.svg)).setAttributeNS(null,"class",t.className),void 0!==t.style&&o.setAttributeNS(null,"style",t.style),o.setAttributeNS(null,"d","M"+i+","+e+" L"+(i+n)+","+e),1==t.options.shaded.enabled&&(a=Uh("path",s.svgElements,s.svg),"top"==t.options.shaded.orientation?a.setAttributeNS(null,"d","M"+i+", "+(e-h)+"L"+i+","+e+" L"+(i+n)+","+e+" L"+(i+n)+","+(e-h)):a.setAttributeNS(null,"d","M"+i+","+e+" L"+i+","+(e+h)+" L"+(i+n)+","+(e+h)+"L"+(i+n)+","+e),a.setAttributeNS(null,"class",t.className+" vis-icon-fill"),void 0!==t.options.shaded.style&&""!==t.options.shaded.style&&a.setAttributeNS(null,"style",t.options.shaded.style)),1==t.options.drawPoints.enabled)&&Vh(i+.5*n,e,{style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size,className:t.className},s.svgElements,s.svg)},Ov.drawShading=function(t,i,e,n){if(1==i.options.shaded.enabled){var r,s=Number(n.svg.style.height.replace("px","")),o=Uh("path",n.svgElements,n.svg),a="L";1==i.options.interpolation.enabled&&(a="C");var h=0;h="top"==i.options.shaded.orientation?0:"bottom"==i.options.shaded.orientation?s:Math.min(Math.max(0,i.zeroPosition),s),r="group"==i.options.shaded.orientation&&null!=e&&null!=e?"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,a,!1)+" L"+e[e.length-1][0]+","+e[e.length-1][1]+" "+this.serializePath(e,a,!0)+e[0][0]+","+e[0][1]+" Z":"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,a,!1)+" V"+h+" H"+t[0][0]+" Z",o.setAttributeNS(null,"class",i.className+" vis-fill"),void 0!==i.options.shaded.style&&o.setAttributeNS(null,"style",i.options.shaded.style),o.setAttributeNS(null,"d",r)}},Ov.draw=function(t,i,e){if(null!=t&&null!=t){var n=Uh("path",e.svgElements,e.svg);n.setAttributeNS(null,"class",i.className),void 0!==i.style&&n.setAttributeNS(null,"style",i.style);var r="L";1==i.options.interpolation.enabled&&(r="C"),n.setAttributeNS(null,"d","M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,r,!1))}},Ov.serializePath=function(t,i,e){if(t.length<2)return"";var n,r=i;if(e)for(n=t.length-2;n>0;n--)r+=t[n][0]+","+t[n][1]+" ";else for(n=1;n<t.length;n++)r+=t[n][0]+","+t[n][1]+" ";return r},Ov._catmullRomUniform=function(t){var i,e,n,r,s,o,a=[];a.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var h=1/6,u=t.length,l=0;l<u-1;l++)i=0==l?t[0]:t[l-1],e=t[l],n=t[l+1],r=l+2<u?t[l+2]:n,s={screen_x:(-i.screen_x+6*e.screen_x+n.screen_x)*h,screen_y:(-i.screen_y+6*e.screen_y+n.screen_y)*h},o={screen_x:(e.screen_x+6*n.screen_x-r.screen_x)*h,screen_y:(e.screen_y+6*n.screen_y-r.screen_y)*h},a.push([s.screen_x,s.screen_y]),a.push([o.screen_x,o.screen_y]),a.push([n.screen_x,n.screen_y]);return a},Ov._catmullRom=function(t,i){var e=i.options.interpolation.alpha;if(0==e||void 0===e)return this._catmullRomUniform(t);var n,r,s,o,a,h,u,l,c,f,d,v,p,m,g,y,b,w,k,_=[];_.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var x=t.length,D=0;D<x-1;D++)n=0==D?t[0]:t[D-1],r=t[D],s=t[D+1],o=D+2<x?t[D+2]:s,u=Math.sqrt(Math.pow(n.screen_x-r.screen_x,2)+Math.pow(n.screen_y-r.screen_y,2)),l=Math.sqrt(Math.pow(r.screen_x-s.screen_x,2)+Math.pow(r.screen_y-s.screen_y,2)),c=Math.sqrt(Math.pow(s.screen_x-o.screen_x,2)+Math.pow(s.screen_y-o.screen_y,2)),m=Math.pow(c,e),y=Math.pow(c,2*e),g=Math.pow(l,e),b=Math.pow(l,2*e),k=Math.pow(u,e),f=2*(w=Math.pow(u,2*e))+3*k*g+b,d=2*y+3*m*g+b,(v=3*k*(k+g))>0&&(v=1/v),(p=3*m*(m+g))>0&&(p=1/p),a={screen_x:(-b*n.screen_x+f*r.screen_x+w*s.screen_x)*v,screen_y:(-b*n.screen_y+f*r.screen_y+w*s.screen_y)*v},h={screen_x:(y*r.screen_x+d*s.screen_x-b*o.screen_x)*p,screen_y:(y*r.screen_y+d*s.screen_y-b*o.screen_y)*p},0==a.screen_x&&0==a.screen_y&&(a=r),0==h.screen_x&&0==h.screen_y&&(h=s),_.push([a.screen_x,a.screen_y]),_.push([h.screen_x,h.screen_y]),_.push([s.screen_x,s.screen_y]);return _},Ov._linear=function(t){for(var i=[],e=0;e<t.length;e++)i.push([t[e].screen_x,t[e].screen_y]);return i},Lv.prototype.setItems=function(t){null!=t?(this.itemsData=t,1==cl(this.options)&&sf.insertSort(this.itemsData,(function(t,i){return t.x>i.x?1:-1}))):this.itemsData=[]},Lv.prototype.getItems=function(){return this.itemsData},Lv.prototype.setZeroPosition=function(t){this.zeroPosition=t},Lv.prototype.setOptions=function(t){if(void 0!==t){sf.selectiveDeepExtend(["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"],this.options,t),"function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),sf.mergeOptions(this.options,t,"interpolation"),sf.mergeOptions(this.options,t,"drawPoints"),sf.mergeOptions(this.options,t,"shaded"),t.interpolation&&"object"==qn(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}},Lv.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===t.visible||t.visible,this.style=t.style,this.setOptions(t.options)},Lv.prototype.getLegend=function(t,i,e,n,r){null!=e&&null!=e||(e={svg:document.createElementNS("http://www.w3.org/2000/svg","svg"),svgElements:{},options:this.options,groups:[this]});switch(null!=n&&null!=n||(n=0),null!=r&&null!=r||(r=.5*i),this.options.style){case"line":Ov.drawIcon(this,n,r,t,i,e);break;case"points":case"point":Ev.drawIcon(this,n,r,t,i,e);break;case"bar":Cv.drawIcon(this,n,r,t,i,e)}return{icon:e.svg,label:this.content,orientation:this.options.yAxisOrientation}},Lv.prototype.getYRange=function(t){for(var i=t[0].y,e=t[0].y,n=0;n<t.length;n++)i=i>t[n].y?t[n].y:i,e=e<t[n].y?t[n].y:e;return{min:i,max:e,yAxisOrientation:this.options.yAxisOrientation}},zv.prototype=new lf,zv.prototype.clear=function(){this.groups={},this.amountOfGroups=0},zv.prototype.addGroup=function(t,i){1!=i.options.excludeFromLegend&&(this.groups.hasOwnProperty(t)||(this.groups[t]=i),this.amountOfGroups+=1)},zv.prototype.updateGroup=function(t,i){this.groups[t]=i},zv.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},zv.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},zv.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},zv.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},zv.prototype.setOptions=function(t){sf.selectiveDeepExtend(["enabled","orientation","icons","left","right"],this.options,t)},zv.prototype.redraw=function(){var t=0,i=cr(this.groups);cl(i).call(i,(function(t,i){return t<i?-1:1}));for(var e=0;e<i.length;e++){var n=i[e];1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||t++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==t)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var r=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+r+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var s="";for(e=0;e<i.length;e++)n=i[e],1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||(s+=this.groups[n].content+"<br />");this.dom.textArea.innerHTML=sf.xss(s),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},zv.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var t=cr(this.groups);cl(t).call(t,(function(t,i){return t<i?-1:1})),Wh(this.svgElements);var i=window.getComputedStyle(this.dom.frame).paddingTop,e=Number(i.replace("px","")),n=e,r=this.options.iconSize,s=.75*this.options.iconSize,o=e+.5*s+3;this.svg.style.width=r+5+e+"px";for(var a=0;a<t.length;a++){var h=t[a];1!=this.groups[h].visible||void 0!==this.linegraphOptions.visibility[h]&&1!=this.linegraphOptions.visibility[h]||(this.groups[h].getLegend(r,s,this.framework,n,o),o+=s+this.options.iconSpacing)}}};var Iv="__ungrouped__";function Nv(t,i){this.id=Ol(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=sf.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var e=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,i,n){e._onAdd(i.items)},update:function(t,i,n){e._onUpdate(i.items)},remove:function(t,i,n){e._onRemove(i.items)}},this.groupListeners={add:function(t,i,n){e._onAddGroups(i.items)},update:function(t,i,n){e._onUpdateGroups(i.items)},remove:function(t,i,n){e._onRemoveGroups(i.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(i),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",(function(){e.svg.style.left=sf.option.asSize(-e.props.width),e.forceGraphUpdate=!0,e.redraw.call(e)})),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}Nv.prototype=new lf,Nv.prototype._create=function(){var t=document.createElement("div");t.className="vis-line-graph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new Yv(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new Yv(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new zv(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new zv(this.body,this.options.legend,"right",this.options.groups),this.show()},Nv.prototype.setOptions=function(t){if(t){void 0===t.graphHeight&&void 0!==t.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==t.graphHeight&&ks((t.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),sf.selectiveDeepExtend(["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"],this.options,t),sf.mergeOptions(this.options,t,"interpolation"),sf.mergeOptions(this.options,t,"drawPoints"),sf.mergeOptions(this.options,t,"shaded"),sf.mergeOptions(this.options,t,"legend"),t.interpolation&&"object"==qn(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==t.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==t.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(Iv)&&this.groups[Iv].setOptions(t)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},Nv.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},Nv.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},Nv.prototype.setItems=function(t){var i,e=this,n=this.itemsData;if(t){if(!Xl("id",t))throw new TypeError("Data must implement the interface of DataSet or DataView");this.itemsData=tf(t)}else this.itemsData=null;if(n&&(Sr(sf).call(sf,this.itemListeners,(function(t,i){n.off(i,t)})),n.dispose(),i=n.getIds(),this._onRemove(i)),this.itemsData){var r=this.id;Sr(sf).call(sf,this.itemListeners,(function(t,i){e.itemsData.on(i,t,r)})),i=this.itemsData.getIds(),this._onAdd(i)}},Nv.prototype.setGroups=function(t){var i,e=this;if(this.groupsData){Sr(sf).call(sf,this.groupListeners,(function(t,i){e.groupsData.off(i,t)})),i=this.groupsData.getIds(),this.groupsData=null;for(var n=0;n<i.length;n++)this._removeGroup(i[n])}if(t){if(!Xl("id",t))throw new TypeError("Data must implement the interface of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var r=this.id;Sr(sf).call(sf,this.groupListeners,(function(t,i){e.groupsData.on(i,t,r)})),i=this.groupsData.getIds(),this._onAddGroups(i)}},Nv.prototype._onUpdate=function(t){this._updateAllGroupData(t)},Nv.prototype._onAdd=function(t){this._onUpdate(t)},Nv.prototype._onRemove=function(t){this._onUpdate(t)},Nv.prototype._onUpdateGroups=function(t){this._updateAllGroupData(null,t)},Nv.prototype._onAddGroups=function(t){this._onUpdateGroups(t)},Nv.prototype._onRemoveGroups=function(t){for(var i=0;i<t.length;i++)this._removeGroup(t[i]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},Nv.prototype._removeGroup=function(t){this.groups.hasOwnProperty(t)&&("right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t),this.legendLeft.redraw()),delete this.groups[t])},Nv.prototype._updateGroup=function(t,i){this.groups.hasOwnProperty(i)?(this.groups[i].update(t),"right"==this.groups[i].options.yAxisOrientation?(this.yAxisRight.updateGroup(i,this.groups[i]),this.legendRight.updateGroup(i,this.groups[i]),this.yAxisLeft.removeGroup(i),this.legendLeft.removeGroup(i)):(this.yAxisLeft.updateGroup(i,this.groups[i]),this.legendLeft.updateGroup(i,this.groups[i]),this.yAxisRight.removeGroup(i),this.legendRight.removeGroup(i))):(this.groups[i]=new Lv(t,i,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[i].options.yAxisOrientation?(this.yAxisRight.addGroup(i,this.groups[i]),this.legendRight.addGroup(i,this.groups[i])):(this.yAxisLeft.addGroup(i,this.groups[i]),this.legendLeft.addGroup(i,this.groups[i]))),this.legendLeft.redraw(),this.legendRight.redraw()},Nv.prototype._updateAllGroupData=function(t,i){if(null!=this.itemsData){var e={},n=this.itemsData.get(),r=this.itemsData.idProp,s={};t&&ur(t).call(t,(function(t){s[t]=t}));for(var o={},a=0;a<n.length;a++){var h=n[a],u=h.group;null==u&&(u=Iv),o.hasOwnProperty(u)?o[u]++:o[u]=1}var l={};if(!i&&t)for(u in this.groups)if(this.groups.hasOwnProperty(u)){var c=(p=this.groups[u]).getItems();e[u]=os(c).call(c,(function(t){return l[t[r]]=t[r],t[r]!==s[t[r]]}));var f=o[u];o[u]-=e[u].length,e[u].length<f&&(e[u][f-1]={})}for(a=0;a<n.length;a++)if(null==(u=(h=n[a]).group)&&(u=Iv),i||!t||h[r]===s[h[r]]||!l.hasOwnProperty(h[r])){e.hasOwnProperty(u)||(e[u]=new Array(o[u]));var d=sf.bridgeObject(h);d.x=sf.convert(h.x,"Date"),d.end=sf.convert(h.end,"Date"),d.orginalY=h.y,d.y=Number(h.y),d[r]=h[r];var v=e[u].length-o[u]--;e[u][v]=d}for(u in this.groups)this.groups.hasOwnProperty(u)&&(e.hasOwnProperty(u)||(e[u]=new Array(0)));for(u in e)if(e.hasOwnProperty(u))if(0==e[u].length)this.groups.hasOwnProperty(u)&&this._removeGroup(u);else{var p=void 0;null!=this.groupsData&&(p=this.groupsData.get(u)),null==p&&(p={id:u,content:this.options.defaultGroup+u}),this._updateGroup(p,u),this.groups[u].setItems(e[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},Nv.prototype.redraw=function(){var t=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,t=this._isResized()||t;var i,e=this.body.range.end-this.body.range.start,n=e!=this.lastVisibleInterval;(this.lastVisibleInterval=e,1==t)&&(this.svg.style.width=sf.option.asSize(3*this.props.width),this.svg.style.left=sf.option.asSize(-this.props.width),-1==js(i=this.options.height+"").call(i,"%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0));if(1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==t||1==n||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)t=this._updateGraph()||t,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(0!=this.lastStart){var r=this.body.range.start-this.lastStart,s=this.body.range.end-this.body.range.start;if(0!=this.props.width){var o=r*(this.props.width/s);this.svg.style.left=-this.props.width-o+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),t},Nv.prototype._getSortedGroupIds=function(){var t=[];for(var i in this.groups)if(this.groups.hasOwnProperty(i)){var e=this.groups[i];1!=e.visible||void 0!==this.options.groups.visibility[i]&&1!=this.options.groups.visibility[i]||t.push({id:i,zIndex:e.options.zIndex})}sf.insertSort(t,(function(t,i){var e=t.zIndex,n=i.zIndex;return void 0===e&&(e=0),void 0===n&&(n=0),e==n?0:e<n?-1:1}));for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].id;return n},Nv.prototype._updateGraph=function(){if($h(this.svgElements),0!=this.props.width&&null!=this.itemsData){var t,i,e={},n=this.body.util.toGlobalTime(-this.body.domProps.root.width),r=this.body.util.toGlobalTime(2*this.body.domProps.root.width),s=this._getSortedGroupIds();if(s.length>0){var o={};for(this._getRelevantData(s,o,n,r),this._applySampling(s,o),i=0;i<s.length;i++)this._convertXcoordinates(o[s[i]]);if(this._getYRanges(s,o,e),1==this._updateYAxis(s,e))return Gh(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var a=void 0;for(i=0;i<s.length;i++)t=this.groups[s[i]],!0===this.options.stack&&"line"===this.options.style&&(null!=t.options.excludeFromStacking&&t.options.excludeFromStacking||(null!=a&&(this._stack(o[t.id],o[a.id]),1==t.options.shaded.enabled&&"group"!==t.options.shaded.orientation&&("top"==t.options.shaded.orientation&&"group"!==a.options.shaded.orientation?(a.options.shaded.orientation="group",a.options.shaded.groupId=t.id):(t.options.shaded.orientation="group",t.options.shaded.groupId=a.id))),a=t)),this._convertYcoordinates(o[s[i]],t);var h={};for(i=0;i<s.length;i++)if("line"===(t=this.groups[s[i]]).options.style&&1==t.options.shaded.enabled){var u=o[s[i]];if(null==u||0==u.length)continue;if(h.hasOwnProperty(s[i])||(h[s[i]]=Ov.calcPath(u,t)),"group"===t.options.shaded.orientation){var l=t.options.shaded.groupId;if(-1===js(s).call(s,l)){console.log(t.id+": Unknown shading group target given:"+l);continue}h.hasOwnProperty(l)||(h[l]=Ov.calcPath(o[l],this.groups[l])),Ov.drawShading(h[s[i]],t,h[l],this.framework)}else Ov.drawShading(h[s[i]],t,void 0,this.framework)}for(Cv.draw(s,o,this.framework),i=0;i<s.length;i++)if(t=this.groups[s[i]],o[s[i]].length>0)switch(t.options.style){case"line":h.hasOwnProperty(s[i])||(h[s[i]]=Ov.calcPath(o[s[i]],t)),Ov.draw(h[s[i]],t,this.framework);case"point":case"points":"point"!=t.options.style&&"points"!=t.options.style&&1!=t.options.drawPoints.enabled||Ev.draw(o[s[i]],t,this.framework)}}}return Gh(this.svgElements),!1},Nv.prototype._stack=function(t,i){var e,n,r,s,o;e=0;for(var a=0;a<t.length;a++){s=void 0,o=void 0;for(var h=e;h<i.length;h++){if(i[h].x===t[a].x){s=i[h],o=i[h],e=h;break}if(i[h].x>t[a].x){o=i[h],s=0==h?o:i[h-1],e=h;break}}void 0===o&&(s=i[i.length-1],o=i[i.length-1]),n=o.x-s.x,r=o.y-s.y,t[a].y=0==n?t[a].orginalY+o.y:t[a].orginalY+r/n*(t[a].x-s.x)+s.y}},Nv.prototype._getRelevantData=function(t,i,e,n){var r,s,o,a;if(t.length>0)for(s=0;s<t.length;s++){var h=(r=this.groups[t[s]]).getItems();if(1==cl(r.options)){var u=function(t,i){return t.getTime()==i.getTime()?0:t<i?-1:1},l=Math.max(0,sf.binarySearchValue(h,e,"x","before",u)),c=Math.min(h.length,sf.binarySearchValue(h,n,"x","after",u)+1);c<=0&&(c=h.length);var f=new Array(c-l);for(o=l;o<c;o++)a=r.itemsData[o],f[o-l]=a;i[t[s]]=f}else i[t[s]]=r.itemsData}},Nv.prototype._applySampling=function(t,i){if(t.length>0)for(var e=0;e<t.length;e++)if(1==this.groups[t[e]].options.sampling){var n=i[t[e]];if(n.length>0){var r,s=n.length,o=s/(this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x));r=Math.min(Math.ceil(.2*s),Math.max(1,Math.round(o)));for(var a=new Array(s),h=0;h<s;h+=r){a[Math.round(h/r)]=n[h]}i[t[e]]=Hr(a).call(a,0,Math.round(s/r))}}},Nv.prototype._getYRanges=function(t,i,e){var n,r,s,o,a=[],h=[];if(t.length>0){for(s=0;s<t.length;s++)n=i[t[s]],o=this.groups[t[s]].options,n.length>0&&(r=this.groups[t[s]],!0===o.stack&&"bar"===o.style?"left"===o.yAxisOrientation?a=ir(a).call(a,n):h=ir(h).call(h,n):e[t[s]]=r.getYRange(n,t[s]));Cv.getStackedYRange(a,e,t,"__barStackLeft","left"),Cv.getStackedYRange(h,e,t,"__barStackRight","right")}},Nv.prototype._updateYAxis=function(t,i){var e,n,r=!1,s=!1,o=!1,a=1e9,h=1e9,u=-1e9,l=-1e9;if(t.length>0){for(var c=0;c<t.length;c++){var f=this.groups[t[c]];f&&"right"!=f.options.yAxisOrientation?(s=!0,a=1e9,u=-1e9):f&&f.options.yAxisOrientation&&(o=!0,h=1e9,l=-1e9)}for(c=0;c<t.length;c++)i.hasOwnProperty(t[c])&&!0!==i[t[c]].ignore&&(e=i[t[c]].min,n=i[t[c]].max,"right"!=i[t[c]].yAxisOrientation?(s=!0,a=a>e?e:a,u=u<n?n:u):(o=!0,h=h>e?e:h,l=l<n?n:l));1==s&&this.yAxisLeft.setRange(a,u),1==o&&this.yAxisRight.setRange(h,l)}r=this._toggleAxisVisiblity(s,this.yAxisLeft)||r,r=this._toggleAxisVisiblity(o,this.yAxisRight)||r,1==o&&1==s?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!s,this.yAxisRight.masterAxis=this.yAxisLeft,0==this.yAxisRight.master?(this.yAxisLeft.lineOffset=1==o?this.yAxisRight.width:0,r=this.yAxisLeft.redraw()||r,r=this.yAxisRight.redraw()||r):r=this.yAxisRight.redraw()||r;var d=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(c=0;c<d.length;c++)-1!=js(t).call(t,d[c])&&Hr(t).call(t,js(t).call(t,d[c]),1);return r},Nv.prototype._toggleAxisVisiblity=function(t,i){var e=!1;return 0==t?i.dom.frame.parentNode&&0==i.hidden&&(i.hide(),e=!0):i.dom.frame.parentNode||1!=i.hidden||(i.show(),e=!0),e},Nv.prototype._convertXcoordinates=function(t){for(var i=this.body.util.toScreen,e=0;e<t.length;e++)t[e].screen_x=i(t[e].x)+this.props.width,t[e].screen_y=t[e].y,null!=t[e].end?t[e].screen_end=i(t[e].end)+this.props.width:t[e].screen_end=void 0},Nv.prototype._convertYcoordinates=function(t,i){var e=this.yAxisLeft,n=Number(this.svg.style.height.replace("px",""));"right"==i.options.yAxisOrientation&&(e=this.yAxisRight);for(var r=0;r<t.length;r++)t[r].screen_y=Math.round(e.convertValue(t[r].y));i.setZeroPosition(Math.min(n,e.convertValue(0)))};var Hv="string",Bv="boolean",Pv="number",Rv="date",$v="object",Gv="moment",Wv={configure:{enabled:{boolean:Bv},filter:{boolean:Bv,function:"function"},container:{dom:"dom"},__type__:{object:$v,boolean:Bv,function:"function"}},alignCurrentTime:{string:Hv,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:Hv},sort:{boolean:Bv},sampling:{boolean:Bv},stack:{boolean:Bv},graphHeight:{string:Hv,number:Pv},shaded:{enabled:{boolean:Bv},orientation:{string:["bottom","top","zero","group"]},groupId:{object:$v},__type__:{boolean:Bv,object:$v}},style:{string:["line","bar","points"]},barChart:{width:{number:Pv},minWidth:{number:Pv},sideBySide:{boolean:Bv},align:{string:["left","center","right"]},__type__:{object:$v}},interpolation:{enabled:{boolean:Bv},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:Pv},__type__:{object:$v,boolean:Bv}},drawPoints:{enabled:{boolean:Bv},onRender:{function:"function"},size:{number:Pv},style:{string:["square","circle"]},__type__:{object:$v,boolean:Bv,function:"function"}},dataAxis:{showMinorLabels:{boolean:Bv},showMajorLabels:{boolean:Bv},showWeekScale:{boolean:Bv},icons:{boolean:Bv},width:{string:Hv,number:Pv},visible:{boolean:Bv},alignZeros:{boolean:Bv},left:{range:{min:{number:Pv,undefined:"undefined"},max:{number:Pv,undefined:"undefined"},__type__:{object:$v}},format:{function:"function"},title:{text:{string:Hv,number:Pv,undefined:"undefined"},style:{string:Hv,undefined:"undefined"},__type__:{object:$v}},__type__:{object:$v}},right:{range:{min:{number:Pv,undefined:"undefined"},max:{number:Pv,undefined:"undefined"},__type__:{object:$v}},format:{function:"function"},title:{text:{string:Hv,number:Pv,undefined:"undefined"},style:{string:Hv,undefined:"undefined"},__type__:{object:$v}},__type__:{object:$v}},__type__:{object:$v}},legend:{enabled:{boolean:Bv},icons:{boolean:Bv},left:{visible:{boolean:Bv},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:$v}},right:{visible:{boolean:Bv},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:$v}},__type__:{object:$v,boolean:Bv}},groups:{visibility:{any:"any"},__type__:{object:$v}},autoResize:{boolean:Bv},throttleRedraw:{number:Pv},clickToUse:{boolean:Bv},end:{number:Pv,date:Rv,string:Hv,moment:Gv},format:{minorLabels:{millisecond:{string:Hv,undefined:"undefined"},second:{string:Hv,undefined:"undefined"},minute:{string:Hv,undefined:"undefined"},hour:{string:Hv,undefined:"undefined"},weekday:{string:Hv,undefined:"undefined"},day:{string:Hv,undefined:"undefined"},week:{string:Hv,undefined:"undefined"},month:{string:Hv,undefined:"undefined"},quarter:{string:Hv,undefined:"undefined"},year:{string:Hv,undefined:"undefined"},__type__:{object:$v}},majorLabels:{millisecond:{string:Hv,undefined:"undefined"},second:{string:Hv,undefined:"undefined"},minute:{string:Hv,undefined:"undefined"},hour:{string:Hv,undefined:"undefined"},weekday:{string:Hv,undefined:"undefined"},day:{string:Hv,undefined:"undefined"},week:{string:Hv,undefined:"undefined"},month:{string:Hv,undefined:"undefined"},quarter:{string:Hv,undefined:"undefined"},year:{string:Hv,undefined:"undefined"},__type__:{object:$v}},__type__:{object:$v}},moment:{function:"function"},height:{string:Hv,number:Pv},hiddenDates:{start:{date:Rv,number:Pv,string:Hv,moment:Gv},end:{date:Rv,number:Pv,string:Hv,moment:Gv},repeat:{string:Hv},__type__:{object:$v,array:"array"}},locale:{string:Hv},locales:{__any__:{any:"any"},__type__:{object:$v}},max:{date:Rv,number:Pv,string:Hv,moment:Gv},maxHeight:{number:Pv,string:Hv},maxMinorChars:{number:Pv},min:{date:Rv,number:Pv,string:Hv,moment:Gv},minHeight:{number:Pv,string:Hv},moveable:{boolean:Bv},multiselect:{boolean:Bv},orientation:{string:Hv},showCurrentTime:{boolean:Bv},showMajorLabels:{boolean:Bv},showMinorLabels:{boolean:Bv},showWeekScale:{boolean:Bv},snap:{function:"function",null:"null"},start:{date:Rv,number:Pv,string:Hv,moment:Gv},timeAxis:{scale:{string:Hv,undefined:"undefined"},step:{number:Pv,undefined:"undefined"},__type__:{object:$v}},width:{string:Hv,number:Pv},zoomable:{boolean:Bv},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:Pv},zoomMin:{number:Pv},zIndex:{number:Pv},__type__:{object:$v}},Uv={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function qv(t,i,e,n){var r,s,o,a,h,u,l;if(!rr(e)&&!Xl("id",e)&&e instanceof Object){var c=n;n=e,e=c}n&&n.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var f=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:Zl,width:null,height:null,maxHeight:null,minHeight:null},this.options=sf.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:br(r=this.on).call(r,this),off:br(s=this.off).call(s,this),emit:br(o=this.emit).call(o,this)},hiddenDates:[],util:{getScale:function(){return f.timeAxis.step.scale},getStep:function(){return f.timeAxis.step.step},toScreen:br(a=f._toScreen).call(a,f),toGlobalScreen:br(h=f._toGlobalScreen).call(h,f),toTime:br(u=f._toTime).call(u,f),toGlobalTime:br(l=f._toGlobalTime).call(l,f)}},this.range=new jf(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Nf(this.body),this.components.push(this.timeAxis),this.currentTime=new od(this.body),this.components.push(this.currentTime),this.linegraph=new Nv(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",(function(t){f.emit("click",f.getEventProperties(t))})),this.on("doubletap",(function(t){f.emit("doubleClick",f.getEventProperties(t))})),this.dom.root.oncontextmenu=function(t){f.emit("contextmenu",f.getEventProperties(t))},this.initialFitDone=!1,this.on("changed",(function(){if(null!=f.itemsData){if(!f.initialFitDone&&!f.options.rollingMode)if(f.initialFitDone=!0,null!=f.options.start||null!=f.options.end){if(null==f.options.start||null==f.options.end)var t=f.getItemRange();var i=null!=f.options.start?f.options.start:t.min,e=null!=f.options.end?f.options.end:t.max;f.setWindow(i,e,{animation:!1})}else f.fit({animation:!1});f.initialDrawDone||!f.initialRangeChangeDone&&(f.options.start||f.options.end)&&!f.options.rollingMode||(f.initialDrawDone=!0,f.dom.root.style.visibility="visible",f.dom.loadingScreen.parentNode.removeChild(f.dom.loadingScreen),f.options.onInitialDrawComplete&&qs((function(){return f.options.onInitialDrawComplete()}),0))}})),n&&this.setOptions(n),e&&this.setGroups(e),i&&this.setItems(i),this._redraw()}qv.prototype=new rd,qv.prototype.setOptions=function(t){!0===hv.validate(t,Wv)&&console.log("%cErrors have been found in the supplied options object.",av),rd.prototype.setOptions.call(this,t)},qv.prototype.setItems=function(t){var i,e=null==this.itemsData;if(i=t?Xl("id",t)?tf(t):tf(new ql(t)):null,this.itemsData&&this.itemsData.dispose(),this.itemsData=i,this.linegraph&&this.linegraph.setItems(null!=i?i.rawDS:null),e)if(null!=this.options.start||null!=this.options.end){var n=null!=this.options.start?this.options.start:null,r=null!=this.options.end?this.options.end:null;this.setWindow(n,r,{animation:!1})}else this.fit({animation:!1})},qv.prototype.setGroups=function(t){var i;i=t?Xl("id",t)?t:new ql(t):null,this.groupsData=i,this.linegraph.setGroups(i)},qv.prototype.getLegend=function(t,i,e){return void 0===i&&(i=15),void 0===e&&(e=15),void 0!==this.linegraph.groups[t]?this.linegraph.groups[t].getLegend(i,e):"cannot find group:'"+t+"'"},qv.prototype.isGroupVisible=function(t){return void 0!==this.linegraph.groups[t]&&(this.linegraph.groups[t].visible&&(void 0===this.linegraph.options.groups.visibility[t]||1==this.linegraph.options.groups.visibility[t]))},qv.prototype.getDataRange=function(){var t=null,i=null;for(var e in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(e)&&1==this.linegraph.groups[e].visible)for(var n=0;n<this.linegraph.groups[e].itemsData.length;n++){var r=this.linegraph.groups[e].itemsData[n],s=sf.convert(r.x,"Date").valueOf();t=null==t||t>s?s:t,i=null==i||i<s?s:i}return{min:null!=t?new Date(t):null,max:null!=i?new Date(i):null}},qv.prototype.getEventProperties=function(t){var i=t.center?t.center.x:t.clientX,e=t.center?t.center.y:t.clientY,n=i-sf.getAbsoluteLeft(this.dom.centerContainer),r=e-sf.getAbsoluteTop(this.dom.centerContainer),s=this._toTime(n),o=nd.customTimeFromTarget(t),a=sf.getTarget(t),h=null;sf.hasParent(a,this.timeAxis.dom.foreground)||this.timeAxis2&&sf.hasParent(a,this.timeAxis2.dom.foreground)?h="axis":sf.hasParent(a,this.linegraph.yAxisLeft.dom.frame)||sf.hasParent(a,this.linegraph.yAxisRight.dom.frame)?h="data-axis":sf.hasParent(a,this.linegraph.legendLeft.dom.frame)||sf.hasParent(a,this.linegraph.legendRight.dom.frame)?h="legend":null!=o?h="custom-time":sf.hasParent(a,this.currentTime.bar)?h="current-time":sf.hasParent(a,this.dom.center)&&(h="background");var u=[],l=this.linegraph.yAxisLeft,c=this.linegraph.yAxisRight;return!l.hidden&&this.itemsData.length>0&&u.push(l.screenToValue(r)),!c.hidden&&this.itemsData.length>0&&u.push(c.screenToValue(r)),{event:t,customTime:o?o.options.id:null,what:h,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:n,y:r,time:s,value:u}},qv.prototype._createConfigurator=function(){return new wv(this,this.dom.container,Uv)},console.warn(["This build has been deprecated.","","In case you are importing this through a URL it will result in a 404 eventually.","In case you are importing this through Node it will be replaced by the peer build eventually.","","Please use the peer or standalone build instead.","Peer: https://visjs.github.io/vis-timeline/examples/timeline/peer-build.html","Standalone: https://visjs.github.io/vis-timeline/examples/timeline/standalone-build.html"].join("\n"));var Vv=Zh();Zl.locale(Vv);var Xv={Core:rd,DateUtil:Ff,Range:jf,stack:xd,TimeStep:zf,components:{items:{Item:Yd,BackgroundItem:Nd,BoxItem:Ad,ClusterItem:Vd,PointItem:Od,RangeItem:zd},BackgroundGroup:Fd,Component:lf,CurrentTime:od,CustomTime:nd,DataAxis:Yv,DataScale:Sv,GraphGroup:Lv,Group:Md,ItemSet:rv,Legend:zv,LineGraph:Nv,TimeAxis:Nf}},Zv={util:Rh,DOMutil:Jh,DataSet:ql,DataView:Vl,Queue:Gl,Timeline:_v,Graph2d:qv,timeline:Xv,moment:Zl,Hammer:Of,keycharm:Bf};t.DOMutil=Jh,t.DataSet=ql,t.DataView=Vl,t.Graph2d=qv,t.Hammer=Of,t.Queue=Gl,t.Timeline=_v,t.default=Zv,t.keycharm=Bf,t.moment=Zl,t.timeline=Xv,t.util=Rh,Object.defineProperty(t,"__esModule",{value:!0})}))}));const x=g(_);function D(t,i){this.log("rangechanged",t.start);this.log("rangechanged",t.end);this.log("periods",i);const e={};for(const t of this.events){if(t.mileage||t.totalFuel){if(!e[t.vehicleId]){e[t.vehicleId]=[]}e[t.vehicleId].push(t)}}let n,r,s=0,o=0,a=0,h=0;for(let i of this.dataSet){if(i.start&&i.end&&i.start>=t.start&&i.end<=t.end&&i.group==="bar"){if(!n){n=i.event}r=i.nextEvent?i.nextEvent:r;if(i.event&&i.event.activity){if(i.event.activity==="D"){s+=i.end.valueOf()-i.start.valueOf()}if(i.event.activity==="A"){o+=i.end.valueOf()-i.start.valueOf()}if(i.event.activity==="W"){a+=i.end.valueOf()-i.start.valueOf()}if(i.event.activity==="R"){h+=i.end.valueOf()-i.start.valueOf()}}}}let u=[];if(this.resourceType==="driver"){if(i&&i.length){for(const e of i){let i=false;let n=null;let r=null;if(e.start&&e.start.ts){if(e.end&&e.end.ts){r=e.end.ts}else{if(e.lastEvent&&e.lastEvent.ts){r=e.lastEvent.ts}}if(new Date(e.start.ts).getTime()>=new Date(t.start).getTime()&&new Date(e.start.ts).getTime()<new Date(t.end).getTime()){n=e.start.ts;if(r){if(new Date(r).getTime()>new Date(t.end).getTime()){r=new Date(t.end)}i=true}}else{if(new Date(e.start.ts).getTime()<new Date(t.start).getTime()){if(r&&new Date(r).getTime()>new Date(t.start).getTime()){if(new Date(r).getTime()>new Date(t.end).getTime()){r=new Date(t.end)}n=new Date(t.start);i=true}}}}if(i){u.push({start:n,end:r})}}}}else{u.push({start:new Date(t.start),end:new Date(t.end)})}this.log("periodList: ",u);let l=0,c=0;for(const t of Object.keys(e)){let i=0,n=0;for(const r of u){let s=null,o=null,a=null,h=null;let u=0;let l=0;for(const i of e[t]){if((i.mileage||i.totalFuel)&&new Date(i.ts).getTime()>=new Date(r.start).getTime()&&new Date(i.ts).getTime()<=new Date(r.end).getTime()){if(i.mileage){if(!s){s=i}else{if(new Date(s.ts).getTime()>new Date(i.ts).getTime()){s=i}}if(!o){o=i}else{if(new Date(o.ts).getTime()<new Date(i.ts).getTime()){o=i}}}if(i.totalFuel){if(!a){a=i}else{if(new Date(a.ts).getTime()>new Date(i.ts).getTime()){a=i}}if(!h){h=i}else{if(new Date(h.ts).getTime()<new Date(i.ts).getTime()){h=i}}}}}if(s&&o){u=o.mileage-s.mileage}if(a&&h){l=h.totalFuel-a.totalFuel}i+=u;n+=l}l+=i;c+=n}this.log("Total mileage: ",Math.round(l*100)/100);this.log("Total fuel: ",Math.round(c*1e3)/1e3);this.startAndEndChange.emit({start:t.start,end:t.end,firstActivity:n,lastActivity:r,available:o/1e3,drive:s/1e3,work:a/1e3,rest:h/1e3,firstLoad:this.firstLoad,mileage:Math.round(l*100)/100,totalFuel:Math.round(c*1e3)/1e3});this.firstLoad=false}function M(t){if(t.item&&this.items.get(t.item).event&&this.items.get(t.item).event.activity!=="D"){this.clickOnTimeline.emit({event:this.items.get(t.item).event,start:this.items.get(t.item).start,end:this.items.get(t.item).end})}else if(t.item&&this.items.get(t.item).event&&this.items.get(t.item).nextEvent&&this.items.get(t.item).event.activity==="D"){this.clickOnTimeline.emit({event:this.items.get(t.item).event,nextEvent:this.items.get(t.item).nextEvent,start:this.items.get(t.item).start,end:this.items.get(t.item).end})}else if(t.item&&this.items.get(t.item).period){this.clickOnTimeline.emit({period:this.items.get(t.item).period,start:this.items.get(t.item).start})}}function S(t){if(t.item&&this.items.get(t.item).event&&this.items.get(t.item).start&&this.items.get(t.item).end){this.doubleClickOnTimeline.emit({event:this.items.get(t.item).event,start:this.items.get(t.item).start,end:this.items.get(t.item).end})}}function F(t){if(t.what==="background"&&this.backgrounds[0]){let r=this.backgrounds.find((i=>i.start&&i.end&&t.time&&new Date(i.start)<=new Date(t.time)&&new Date(t.time)<=new Date(i.end)));if(r){this.tooltipElement.style.visibility="visible";this.tooltipElement.innerHTML=r.title;var i=this.componentElement.getBoundingClientRect();var e=t.event.clientX-i.left;var n=t.event.clientY-i.top;if(e>=i.width-200){e=e-200}this.tooltipElement.style.top=n+10+"px";this.tooltipElement.style.left=e+10+"px"}else{this.tooltipElement.style.visibility="hidden";this.tooltipElement.innerHTML=""}}else{this.tooltipElement.style.visibility="hidden";this.tooltipElement.innerHTML=""}}function T(t,i){let e=[];for(let n of t){if(n.start&&n.start.ts){let t=n.start;const r=i&&new Date(i)>=new Date(n.start.ts)?"start-green":"start";const s=i&&new Date(i)>=new Date(n.start.ts)?"icon-timeline-green":"icon-timeline";e.push({content:`<div class="periodTextParent">\n            <svg class="${s}" aria-hidden="true" ><use xlink:href="#play"></use></svg>`+(this.annotated?`<div class="periodTextStart">${this.prettyDate(new Date(t.ts),"00/00 00:00")}</div>`:"")+`</div>`,start:new Date(n.start.ts),group:"start",editable:false,latLng:t.geo&&t.geo.coordinates?t.geo.coordinates:null,className:r,title:` ${this.i18n.get("serviceBeginning")} ${this.prettyDate(new Date(t.ts),"00/00/0000 00:00")} ${t.address&&(t.address.postalcode||t.address.name)?`</br> ${this.i18n.get("in")} : ${t.address.postalcode?t.address.postalcode:""} ${t.address.name?t.address.name:""}`:""}`,period:n})}if(n.end&&n.end.ts){let t=n.end;const r=i&&new Date(i)>=new Date(n.end.ts)?"end-green":"end";const s=i&&new Date(i)>=new Date(n.end.ts)?"icon-timeline-green":"icon-timeline";e.push({content:`<div class="periodTextParent">\n        <svg class="${s}" aria-hidden="true" ><use xlink:href="#arrival"></use></svg>`+(this.annotated?`<div class="periodTextStop">${this.prettyDate(new Date(t.ts),"00/00 00:00")}</div>`:"")+`</div>`,start:new Date(n.end.ts),group:"start",editable:false,className:r,title:`${this.i18n.get("serviceEnding")} ${this.prettyDate(new Date(t.ts),"00/00/0000 00:00")} ${t.address&&(t.address.postalcode||t.address.name)?`</br> ${this.i18n.get("in")} : ${t.address.postalcode?t.address.postalcode:""} ${t.address.name?t.address.name:""}`:""}`,period:n})}}return e}function j(t,i,e){let n,r,s;if(i.activity==="A"||i.activity==="R"||i.activity==="D"||i.activity==="W"){switch(i.activity){case"R":s=1;n=this.i18n.get("rest");r="rest";break;case"A":s=2;n=this.i18n.get("available");r="available";break;case"W":s=3;n=this.i18n.get("work");r="work";break;case"D":s=4;n=this.i18n.get("drive");r="drive";break}let o=new Date(i.ts);let a=this.prettyDate(o,"00:00");let h=new Date(t.ts);let u=this.prettyDate(h,"00:00");let l=c((h.valueOf()-o.valueOf())/1e3);if(r=="rest"&&h.valueOf()-o.valueOf()>=324e5){r="rest9h"}else if(r=="rest"&&h.valueOf()-o.valueOf()>=27e5){r="rest45m"}else if(r=="rest"&&h.valueOf()-o.valueOf()>=9e5){r="rest15m"}if(this.eventSelect&&new Date(this.eventSelect.start).valueOf()===new Date(o).valueOf()&&new Date(this.eventSelect.end).valueOf()===new Date(h).valueOf()){r+=" eventSelect"}if(i.modified){r+=" modified"}let f={start:o,end:h,content:this.annotated?`<div class="duration">${l}</div>`:"",className:r,group:"bar",editable:false,subgroup:s,item:r,event:i,nextEvent:t,title:`${n} ${this.i18n.get("from")} ${a} ${this.i18n.get("to")}  ${u} (${l}) <br/> ${i.tooltip?`${i.tooltip} <br/>`:""} ${i.mileage?`${this.separateHundredWithSpace(Math.trunc(i.mileage))} km`:""}`,subgroupOrder:s};let d={start:o,end:h,content:this.annotated?`<div class="duration">${l}</div>`:"",className:`${r} allMode`,item:r,group:"all",editable:false,event:i,nextEvent:t,title:`${n} ${this.i18n.get("from")}  ${a} ${this.i18n.get("to")}  ${u} (${l})  <br/>  ${i.tooltip?`${i.tooltip} <br/>`:""} ${i.mileage?`${this.separateHundredWithSpace(Math.trunc(i.mileage))} km`:""}`};if(i.correction||i.autocorrectType){let t={};if(i.autocorrectType){t={ts:i.ts,autocorrect:true,autocorrectType:i.autocorrectType===1?"edit":"create"}}else{t=i.correction}let n=A(o,h,t,this);if(n){this.backgrounds.push(n);e.push(n)}}e.push(f);e.push(d)}}function Y(t,i){let e="other";let n=new Date(t.ts);let r=this.prettyDate(n,"00:00");let s=new Date(t.end);let o=this.prettyDate(s,"00:00");let a=c((s.valueOf()-n.valueOf())/1e3);t.label=t.label?t.label:"?";if(this.activitiesOutsideVehicle&&this.activitiesOutsideVehicle.length){let i=this.getActivityOutsideVehicle(t.customActivityId);t.label=i&&i.label?i.label:t.label}if(t.modified){e+=" modified"}let h={start:t.ts,end:t.end,content:this.annotated?`<div class="duration">${a}</div>`:"",className:e,group:"bar",editable:false,item:"other",event:t,title:`${t.label} ${this.i18n.get("from")} ${r} ${this.i18n.get("to")}  ${o} (${a}) <br/> ${t.tooltip?t.tooltip:""}`};let u={start:n,end:s,content:this.annotated?`<div class="duration">${a}</div>`:"",className:`${e} allMode`,item:"other",group:"all",editable:false,event:t,title:`${t.label} ${this.i18n.get("from")}  ${r} ${this.i18n.get("to")}  ${o} (${a})  <br/>  ${t.tooltip?t.tooltip:""}`};if(t.correction||t.autocorrectType){let e={};if(t.autocorrectType){e={ts:t.ts,autocorrect:true,autocorrectType:t.autocorrectType===1?"edit":"create"}}else{e=t.correction}let r=A(n,s,e,this);if(r){this.backgrounds.push(r);i.push(r)}}i.push(h);i.push(u)}function E(t,i){let e,n,r;switch(i.activity){case"R":r=1;e=this.i18n.get("rest");n="rest";break;case"A":r=2;e=this.i18n.get("available");n="available";break;case"W":r=3;e=this.i18n.get("work");n="work";break;case"D":r=4;e=this.i18n.get("drive");n="drive";break}n+=" supposed";let s=new Date(this.lastEvent_end);let o=this.prettyDate(s,"00:00");let a=new Date;let h=this.prettyDate(a,"00:00");let u=c((a.valueOf()-s.valueOf())/1e3);let l={start:this.lastEvent_end,end:new Date,content:this.annotated?`<div class="duration">${u}</div>`:"",className:n,subgroup:r,group:"bar",editable:false,item:"other",event:i,title:`${e} ${this.i18n.get("from")} ${o} ${this.i18n.get("to")}  ${h} (${u}) <br/> ${i.tooltip?`${i.tooltip} <br/>`:""} `};let f={start:this.lastEvent_end,end:new Date,content:this.annotated?`<div class="duration">${u}</div>`:"",className:`${n} allMode`,item:"other",group:"all",editable:false,event:i,title:`${e} ${this.i18n.get("from")} ${o} ${this.i18n.get("to")}  ${h} (${u}) <br/> ${i.tooltip?`${i.tooltip} <br/>`:""} `};t.push(l);t.push(f)}function A(t,i,e,n){if(e.new&&e.new.label&&e.new.label==="passenger"){return null}let r="";if(!e.autocorrectType){r+=`<span>${n.i18n.get("creationDate")} : <strong>${l(new Date(e.creationTs),"00/00/0000 00:00")}</strong> </span> <br/>`;if(e.origin&&e.origin.activity){r+=`<span>${n.i18n.get("originalActivity")} :  <strong>${n.i18n.get(C(e.origin.activity))} de ${l(new Date(e.origin.ts),"00:00")} ${n.i18n.get("to")} ${l(new Date(e.origin.end),"00:00")}</strong> </span>  <br/>`}if(e.new&&(e.new.label||e.new.activity)){if(e.new.end){r+=`<span>${n.i18n.get("newActivity")} :  <strong>${e.new.label?e.new.label:n.i18n.get(C(e.new.activity))} de ${l(new Date(e.new.ts),"00:00")} ${n.i18n.get("to")} ${l(new Date(e.new.end),"00:00")}</strong> </span>  <br/>`}else{r+=`<span>${n.i18n.get("activity")} :  <strong>${e.new.label?e.new.label:n.i18n.get(C(e.new.activity))} ${n.i18n.get("to")} ${l(new Date(e.new.ts),"00:00")}</strong> </span>  <br/>`}}r+=`<span>${n.i18n.get("author")} : <strong>${e.dispatcherName}</strong> </span>  <br/>`;r+=`<span>Type : <strong>${n.i18n.get(e.type)}</strong> </span>  <br/>`;r+=`<span>${n.i18n.get("reason")} : <strong>${e.comment?e.comment:"?"}</strong> </span> <br/>`}else{r+=`<span>${n.i18n.get("newActivity")} : <strong>${n.i18n.get(C("R"))} ${n.i18n.get("to")} ${l(new Date(e.ts),"00:00")}</strong></span><br/>`;r+=`<span>Type : <strong>${n.i18n.get(e.autocorrectType)}</strong> </span>  <br/>`}return{content:"",start:t,end:i,type:"background",title:`<div> <h4>${e.autocorrect?n.i18n.get("autocorrect"):"Correction"}</h4>${r}</div>`,className:"activity-modified-"+(e.autocorrect?"autocorrect":e.source)}}function C(t){switch(t){case"R":return"rest";case"A":return"available";case"W":return"work";case"D":return"drive";default:return""}}function O(t){return this.activitiesOutsideVehicle.find((i=>i._id===t))}function L(){let t=[];let i=[];let e=[];for(let t of Object.keys(this.events)){let n=this.events[t];if(n.customActivityId){e.push(n)}else{i.push(n)}}let n;for(let e of Object.keys(i)){let r=i[e];if(r.activity&&r.ts){if(r.activity==="U"){r.activity="R"}if(!n){n=r}else{if(r.activity!==n.activity||r.activity===n.activity&&r.correction){this.addActivityOnTimeline(r,n,t);n=r}}}}if(this.lastEvent_end&&(!this.lastLegalFileEvent||this.lastLegalFileEvent&&new Date(this.lastLegalFileEvent)<=new Date(this.lastEvent_end))){this.addActivityOnTimeline({ts:this.lastEvent_end},n,t);this.addSupposedActivity(t,n)}for(let i of Object.keys(e)){let n=e[i];this.addActivityOther(n,t)}return t}function z(t,i){let e=[];function n(t,i,n,r){e.push({start:new Date(t),end:new Date(i),group:"start",content:n,title:r,editable:false,className:e.length&&e[e.length-1].content===n?e[e.length-1].className:e.length&&e[e.length-1].className==="resource-even"?"resource-odd":"resource-even"})}for(const e of t){if(i==="driver"){n(e.start,e.end,e.vehicleId,e.vehicleName)}else if(i==="vehicle"){n(e.start,e.end,e.driverId,e.driverName)}}return e}function I(t){let i=[];for(let e=0;e<t.length;e++){const n=t[e];let r=new Date(n.ts);i.push({id:"note-"+e,className:"note-"+e%2,group:"start",start:r,content:this.annotated?n.text:"",type:"point",title:n.text+" "+this.prettyDate(r,"00:00")})}return i}function N(t){let i=[];let e;t.sort(((t,i)=>t.lastCommunicationTs-i.lastCommunicationTs));for(let n of t){if(n.lastCommunicationTs&&(!e||new Date(n.lastCommunicationTs).valueOf()!==new Date(e).valueOf())){const t=new Date(n.lastCommunicationTs);const r=e?t.valueOf()-new Date(e).valueOf():null;i.push({content:`<div class="lastComContent">${r?this.toHHMMSS(r/1e3):"?"}</div>`,start:t,group:"lastCommunication",editable:false,type:"point",className:"pointLastCom",title:`${this.prettyDate(t,"00/00/0000 00:00:00")}`});e=t}}return i}const H='.vis [class*=span]{min-height:0;width:auto}.vis-current-time{background-color:#ff7f6e;width:2px;z-index:1;pointer-events:none}.vis-rolling-mode-btn{height:40px;width:40px;position:absolute;top:7px;right:20px;border-radius:50%;font-size:28px;cursor:pointer;opacity:.8;color:#fff;font-weight:700;text-align:center;background:#3876c2}.vis-rolling-mode-btn:before{content:"\\26F6"}.vis-rolling-mode-btn:hover{opacity:1}.vis-panel{position:absolute;padding:0;margin:0;box-sizing:border-box}.vis-panel.vis-bottom,.vis-panel.vis-center,.vis-panel.vis-left,.vis-panel.vis-right,.vis-panel.vis-top{border:1px #bfbfbf}.vis-panel.vis-center,.vis-panel.vis-left,.vis-panel.vis-right{border-top-style:solid;border-bottom-style:solid;overflow:hidden}.vis-left.vis-panel.vis-vertical-scroll,.vis-right.vis-panel.vis-vertical-scroll{height:100%;overflow-x:hidden;overflow-y:scroll}.vis-left.vis-panel.vis-vertical-scroll{direction:rtl}.vis-left.vis-panel.vis-vertical-scroll .vis-content{direction:ltr}.vis-right.vis-panel.vis-vertical-scroll{direction:ltr}.vis-right.vis-panel.vis-vertical-scroll .vis-content{direction:rtl}.vis-panel.vis-bottom,.vis-panel.vis-center,.vis-panel.vis-top{border-left-style:solid;border-right-style:solid}.vis-background{overflow:hidden}.vis-panel>.vis-content{position:relative}.vis-panel .vis-shadow{position:absolute;width:100%;height:1px;box-shadow:0 0 10px rgba(0,0,0,.8)}.vis-panel .vis-shadow.vis-top{top:-1px;left:0}.vis-panel .vis-shadow.vis-bottom{bottom:-1px;left:0}.vis-timeline{position:relative;border:1px solid #bfbfbf;overflow:hidden;padding:0;margin:0;box-sizing:border-box}.vis-loading-screen{width:100%;height:100%;position:absolute;top:0;left:0}.vis-graph-group0{fill:#4f81bd;fill-opacity:0;stroke-width:2px;stroke:#4f81bd}.vis-graph-group1{fill:#f79646;fill-opacity:0;stroke-width:2px;stroke:#f79646}.vis-graph-group2{fill:#8c51cf;fill-opacity:0;stroke-width:2px;stroke:#8c51cf}.vis-graph-group3{fill:#75c841;fill-opacity:0;stroke-width:2px;stroke:#75c841}.vis-graph-group4{fill:#ff0100;fill-opacity:0;stroke-width:2px;stroke:#ff0100}.vis-graph-group5{fill:#37d8e6;fill-opacity:0;stroke-width:2px;stroke:#37d8e6}.vis-graph-group6{fill:#042662;fill-opacity:0;stroke-width:2px;stroke:#042662}.vis-graph-group7{fill:#00ff26;fill-opacity:0;stroke-width:2px;stroke:#00ff26}.vis-graph-group8{fill:#f0f;fill-opacity:0;stroke-width:2px;stroke:#f0f}.vis-graph-group9{fill:#8f3938;fill-opacity:0;stroke-width:2px;stroke:#8f3938}.vis-timeline .vis-fill{fill-opacity:.1;stroke:none}.vis-timeline .vis-bar{fill-opacity:.5;stroke-width:1px}.vis-timeline .vis-point{stroke-width:2px;fill-opacity:1}.vis-timeline .vis-legend-background{stroke-width:1px;fill-opacity:.9;fill:#fff;stroke:#c2c2c2}.vis-timeline .vis-outline{stroke-width:1px;fill-opacity:1;fill:#fff;stroke:#e5e5e5}.vis-timeline .vis-icon-fill{fill-opacity:.3;stroke:none}.vis-custom-time{background-color:#6e94ff;width:2px;cursor:move;z-index:1}.vis-custom-time>.vis-custom-time-marker{background-color:inherit;color:#fff;font-size:12px;white-space:nowrap;padding:3px 5px;top:0;cursor:initial;z-index:inherit}.vis-panel.vis-background.vis-horizontal .vis-grid.vis-horizontal{position:absolute;width:100%;height:0;border-bottom:1px solid}.vis-panel.vis-background.vis-horizontal .vis-grid.vis-minor{border-color:#e5e5e5}.vis-panel.vis-background.vis-horizontal .vis-grid.vis-major{border-color:#bfbfbf}.vis-data-axis .vis-y-axis.vis-major{width:100%;position:absolute;color:#4d4d4d;white-space:nowrap}.vis-data-axis .vis-y-axis.vis-major.vis-measure{padding:0;margin:0;border:0;visibility:hidden;width:auto}.vis-data-axis .vis-y-axis.vis-minor{position:absolute;width:100%;color:#bebebe;white-space:nowrap}.vis-data-axis .vis-y-axis.vis-minor.vis-measure{padding:0;margin:0;border:0;visibility:hidden;width:auto}.vis-data-axis .vis-y-axis.vis-title{position:absolute;color:#4d4d4d;white-space:nowrap;bottom:20px;text-align:center}.vis-data-axis .vis-y-axis.vis-title.vis-measure{padding:0;margin:0;visibility:hidden;width:auto}.vis-data-axis .vis-y-axis.vis-title.vis-left{bottom:0;-webkit-transform-origin:left top;-moz-transform-origin:left top;-ms-transform-origin:left top;-o-transform-origin:left top;transform-origin:left bottom;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg);transform:rotate(-90deg)}.vis-data-axis .vis-y-axis.vis-title.vis-right{bottom:0;-webkit-transform-origin:right bottom;-moz-transform-origin:right bottom;-ms-transform-origin:right bottom;-o-transform-origin:right bottom;transform-origin:right bottom;-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.vis-legend{background-color:rgba(247,252,255,.65);padding:5px;border:1px solid #b3b3b3;box-shadow:2px 2px 10px rgba(154,154,154,.55)}.vis-legend-text{white-space:nowrap;display:inline-block}.vis-labelset{position:relative;overflow:hidden;box-sizing:border-box}.vis-labelset .vis-label{position:relative;left:0;top:0;width:100%;color:#4d4d4d;box-sizing:border-box}.vis-labelset .vis-label{border-bottom:1px solid #bfbfbf}.vis-labelset .vis-label.draggable{cursor:pointer}.vis-group-is-dragging{background:rgba(0,0,0,.1)}.vis-labelset .vis-label:last-child{border-bottom:none}.vis-labelset .vis-label .vis-inner{display:inline-block;padding:5px}.vis-labelset .vis-label .vis-inner.vis-hidden{padding:0}.vis-itemset{position:relative;padding:0;margin:0;box-sizing:border-box}.vis-itemset .vis-background,.vis-itemset .vis-foreground{position:absolute;width:100%;height:100%;overflow:visible}.vis-axis{position:absolute;width:100%;height:0;left:0;z-index:1}.vis-foreground .vis-group{position:relative;box-sizing:border-box;border-bottom:1px solid #bfbfbf}.vis-foreground .vis-group:last-child{border-bottom:none}.vis-nesting-group{cursor:pointer}.vis-label.vis-nested-group.vis-group-level-unknown-but-gte1{background:#f5f5f5}.vis-label.vis-nested-group.vis-group-level-0{background-color:#fff}.vis-ltr .vis-label.vis-nested-group.vis-group-level-0 .vis-inner{padding-left:0}.vis-rtl .vis-label.vis-nested-group.vis-group-level-0 .vis-inner{padding-right:0}.vis-label.vis-nested-group.vis-group-level-1{background-color:rgba(0,0,0,.05)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-1 .vis-inner{padding-left:15px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-1 .vis-inner{padding-right:15px}.vis-label.vis-nested-group.vis-group-level-2{background-color:rgba(0,0,0,.1)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-2 .vis-inner{padding-left:30px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-2 .vis-inner{padding-right:30px}.vis-label.vis-nested-group.vis-group-level-3{background-color:rgba(0,0,0,.15)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-3 .vis-inner{padding-left:45px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-3 .vis-inner{padding-right:45px}.vis-label.vis-nested-group.vis-group-level-4{background-color:rgba(0,0,0,.2)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-4 .vis-inner{padding-left:60px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-4 .vis-inner{padding-right:60px}.vis-label.vis-nested-group.vis-group-level-5{background-color:rgba(0,0,0,.25)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-5 .vis-inner{padding-left:75px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-5 .vis-inner{padding-right:75px}.vis-label.vis-nested-group.vis-group-level-6{background-color:rgba(0,0,0,.3)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-6 .vis-inner{padding-left:90px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-6 .vis-inner{padding-right:90px}.vis-label.vis-nested-group.vis-group-level-7{background-color:rgba(0,0,0,.35)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-7 .vis-inner{padding-left:105px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-7 .vis-inner{padding-right:105px}.vis-label.vis-nested-group.vis-group-level-8{background-color:rgba(0,0,0,.4)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-8 .vis-inner{padding-left:120px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-8 .vis-inner{padding-right:120px}.vis-label.vis-nested-group.vis-group-level-9{background-color:rgba(0,0,0,.45)}.vis-ltr .vis-label.vis-nested-group.vis-group-level-9 .vis-inner{padding-left:135px}.vis-rtl .vis-label.vis-nested-group.vis-group-level-9 .vis-inner{padding-right:135px}.vis-label.vis-nested-group{background-color:rgba(0,0,0,.5)}.vis-ltr .vis-label.vis-nested-group .vis-inner{padding-left:150px}.vis-rtl .vis-label.vis-nested-group .vis-inner{padding-right:150px}.vis-group-level-unknown-but-gte1{border:1px solid red}.vis-label.vis-nesting-group:before{display:inline-block;width:15px}.vis-label.vis-nesting-group.expanded:before{content:"\\25BC"}.vis-label.vis-nesting-group.collapsed:before{content:"\\25B6"}.vis-rtl .vis-label.vis-nesting-group.collapsed:before{content:"\\25C0"}.vis-ltr .vis-label:not(.vis-nesting-group):not(.vis-group-level-0){padding-left:15px}.vis-rtl .vis-label:not(.vis-nesting-group):not(.vis-group-level-0){padding-right:15px}.vis-overlay{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10}.vis-time-axis{position:relative;overflow:hidden}.vis-time-axis.vis-foreground{top:0;left:0;width:100%}.vis-time-axis.vis-background{position:absolute;top:0;left:0;width:100%;height:100%}.vis-time-axis .vis-text{position:absolute;color:#4d4d4d;padding:3px;overflow:hidden;box-sizing:border-box;white-space:nowrap}.vis-time-axis .vis-text.vis-measure{position:absolute;padding-left:0;padding-right:0;margin-left:0;margin-right:0;visibility:hidden}.vis-time-axis .vis-grid.vis-vertical{position:absolute;border-left:1px solid}.vis-time-axis .vis-grid.vis-vertical-rtl{position:absolute;border-right:1px solid}.vis-time-axis .vis-grid.vis-minor{border-color:#e5e5e5}.vis-time-axis .vis-grid.vis-major{border-color:#bfbfbf}.vis-item{position:absolute;color:#1a1a1a;border-color:#97b0f8;border-width:1px;background-color:#d5ddf6;display:inline-block;z-index:1}.vis-item.vis-selected{border-color:#ffc200;background-color:#fff785;z-index:2}.vis-editable.vis-selected{cursor:move}.vis-item.vis-point.vis-selected{background-color:#fff785}.vis-item.vis-box{text-align:center;border-style:solid;border-radius:2px}.vis-item.vis-point{background:0 0}.vis-item.vis-dot{position:absolute;padding:0;border-width:4px;border-style:solid;border-radius:4px}.vis-item.vis-range{border-style:solid;border-radius:2px;box-sizing:border-box}.vis-item.vis-background{border:none;background-color:rgba(213,221,246,.4);box-sizing:border-box;padding:0;margin:0}.vis-item .vis-item-overflow{position:relative;width:100%;height:100%;padding:0;margin:0;overflow:hidden}.vis-item-visible-frame{white-space:nowrap}.vis-item.vis-range .vis-item-content{position:relative;display:inline-block}.vis-item.vis-background .vis-item-content{position:absolute;display:inline-block}.vis-item.vis-line{padding:0;position:absolute;width:0;border-left-width:1px;border-left-style:solid}.vis-item .vis-item-content{white-space:nowrap;box-sizing:border-box;padding:5px}.vis-item .vis-onUpdateTime-tooltip{position:absolute;background:#4f81bd;color:#fff;width:200px;text-align:center;white-space:nowrap;padding:5px;border-radius:1px;transition:.4s;-o-transition:.4s;-moz-transition:.4s;-webkit-transition:.4s}.vis-item .vis-delete,.vis-item .vis-delete-rtl{position:absolute;top:0;width:24px;height:24px;box-sizing:border-box;padding:0 5px;cursor:pointer;-webkit-transition:background .2s linear;-moz-transition:background .2s linear;-ms-transition:background .2s linear;-o-transition:background .2s linear;transition:background .2s linear}.vis-item .vis-delete{right:-24px}.vis-item .vis-delete-rtl{left:-24px}.vis-item .vis-delete-rtl:after,.vis-item .vis-delete:after{content:"\\00D7";color:red;font-family:arial,sans-serif;font-size:22px;font-weight:700;-webkit-transition:color .2s linear;-moz-transition:color .2s linear;-ms-transition:color .2s linear;-o-transition:color .2s linear;transition:color .2s linear}.vis-item .vis-delete-rtl:hover,.vis-item .vis-delete:hover{background:red}.vis-item .vis-delete-rtl:hover:after,.vis-item .vis-delete:hover:after{color:#fff}.vis-item .vis-drag-center{position:absolute;width:100%;height:100%;top:0;left:0;cursor:move}.vis-item.vis-range .vis-drag-left{position:absolute;width:24px;max-width:20%;min-width:2px;height:100%;top:0;left:-4px;cursor:w-resize}.vis-item.vis-range .vis-drag-right{position:absolute;width:24px;max-width:20%;min-width:2px;height:100%;top:0;right:-4px;cursor:e-resize}.vis-range.vis-item.vis-readonly .vis-drag-left,.vis-range.vis-item.vis-readonly .vis-drag-right{cursor:auto}.vis-item.vis-cluster{vertical-align:center;text-align:center;border-style:solid;border-radius:2px}.vis-item.vis-cluster-line{padding:0;position:absolute;width:0;border-left-width:1px;border-left-style:solid}.vis-item.vis-cluster-dot{position:absolute;padding:0;border-width:4px;border-style:solid;border-radius:4px}.vis .overlay{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10}.vis-active{box-shadow:0 0 10px #86d5f8}div.vis-configuration{position:relative;display:block;float:left;font-size:12px}div.vis-configuration-wrapper{display:block;width:700px}div.vis-configuration-wrapper::after{clear:both;content:"";display:block}div.vis-configuration.vis-config-option-container{display:block;width:495px;background-color:#fff;border:2px solid #f7f8fa;border-radius:4px;margin-top:20px;left:10px;padding-left:5px}div.vis-configuration.vis-config-button{display:block;width:495px;height:25px;vertical-align:middle;line-height:25px;background-color:#f7f8fa;border:2px solid #ceced0;border-radius:4px;margin-top:20px;left:10px;padding-left:5px;cursor:pointer;margin-bottom:30px}div.vis-configuration.vis-config-button.hover{background-color:#4588e6;border:2px solid #214373;color:#fff}div.vis-configuration.vis-config-item{display:block;float:left;width:495px;height:25px;vertical-align:middle;line-height:25px}div.vis-configuration.vis-config-item.vis-config-s2{left:10px;background-color:#f7f8fa;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-item.vis-config-s3{left:20px;background-color:#e4e9f0;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-item.vis-config-s4{left:30px;background-color:#cfd8e6;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-header{font-size:18px;font-weight:700}div.vis-configuration.vis-config-label{width:120px;height:25px;line-height:25px}div.vis-configuration.vis-config-label.vis-config-s3{width:110px}div.vis-configuration.vis-config-label.vis-config-s4{width:100px}div.vis-configuration.vis-config-colorBlock{top:1px;width:30px;height:19px;border:1px solid #444;border-radius:2px;padding:0;margin:0;cursor:pointer}input.vis-configuration.vis-config-checkbox{left:-5px}input.vis-configuration.vis-config-rangeinput{position:relative;top:-5px;width:60px;padding:1px;margin:0;pointer-events:none}input.vis-configuration.vis-config-range{-webkit-appearance:none;border:0 solid #fff;background-color:rgba(0,0,0,0);width:300px;height:20px}input.vis-configuration.vis-config-range::-webkit-slider-runnable-track{width:300px;height:5px;background:#dedede;background:-moz-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#dedede),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-o-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:linear-gradient(to bottom,#dedede 0,#c8c8c8 99%);border:1px solid #999;box-shadow:#aaa 0 0 3px 0;border-radius:3px}input.vis-configuration.vis-config-range::-webkit-slider-thumb{-webkit-appearance:none;border:1px solid #14334b;height:17px;width:17px;border-radius:50%;background:#3876c2;background:-moz-linear-gradient(top,#3876c2 0,#385380 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#3876c2),color-stop(100%,#385380));background:-webkit-linear-gradient(top,#3876c2 0,#385380 100%);background:-o-linear-gradient(top,#3876c2 0,#385380 100%);background:-ms-linear-gradient(top,#3876c2 0,#385380 100%);background:linear-gradient(to bottom,#3876c2 0,#385380 100%);box-shadow:#111927 0 0 1px 0;margin-top:-7px}input.vis-configuration.vis-config-range:focus{outline:0}input.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track{background:#9d9d9d;background:-moz-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#9d9d9d),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:-o-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:linear-gradient(to bottom,#9d9d9d 0,#c8c8c8 99%)}input.vis-configuration.vis-config-range::-moz-range-track{width:300px;height:10px;background:#dedede;background:-moz-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#dedede),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-o-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:linear-gradient(to bottom,#dedede 0,#c8c8c8 99%);border:1px solid #999;box-shadow:#aaa 0 0 3px 0;border-radius:3px}input.vis-configuration.vis-config-range::-moz-range-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#385380}input.vis-configuration.vis-config-range:-moz-focusring{outline:1px solid #fff;outline-offset:-1px}input.vis-configuration.vis-config-range::-ms-track{width:300px;height:5px;background:0 0;border-color:transparent;border-width:6px 0;color:transparent}input.vis-configuration.vis-config-range::-ms-fill-lower{background:#777;border-radius:10px}input.vis-configuration.vis-config-range::-ms-fill-upper{background:#ddd;border-radius:10px}input.vis-configuration.vis-config-range::-ms-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#385380}input.vis-configuration.vis-config-range:focus::-ms-fill-lower{background:#888}input.vis-configuration.vis-config-range:focus::-ms-fill-upper{background:#ccc}.vis-configuration-popup{position:absolute;background:rgba(57,76,89,.85);border:2px solid #f2faff;line-height:30px;height:30px;width:150px;text-align:center;color:#fff;font-size:14px;border-radius:4px;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out}.vis-configuration-popup:after,.vis-configuration-popup:before{left:100%;top:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.vis-configuration-popup:after{border-color:rgba(136,183,213,0);border-left-color:rgba(57,76,89,.85);border-width:8px;margin-top:-8px}.vis-configuration-popup:before{border-color:rgba(194,225,245,0);border-left-color:#f2faff;border-width:12px;margin-top:-12px}div.vis-tooltip{position:absolute;visibility:hidden;padding:5px;white-space:nowrap;font-family:verdana;font-size:14px;color:#000;background-color:#f5f4ed;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;border:1px solid #808074;box-shadow:3px 3px 10px rgba(0,0,0,.2);pointer-events:none;z-index:5}.vis-item.other{background-color:var(--primary-custom-activity-color, #7f8c8d);border-color:var(--secondary-custom-activity-color, #424242)}.vis-item.work{background-color:var(--primary-work-color, #d0000d);border-color:var(--secondary-work-color, #b92602)}.vis-item.available{background-color:var(--primary-available-color, #e67d20);border-color:var(--secondary-available-color, #c25c03)}.vis-item.drive{background-color:var(--primary-drive-color, #01599d);border-color:var(--secondary-drive-color, #023d69)}.vis-item.rest{background-color:var(--primary-rest-color, #2f7f33);border-color:var(--secondary-rest-color, #16721b)}.vis-item.rest15m{background:linear-gradient(90deg, var(--light-rest-color, #67ac6a) 50%, var(--primary-rest-color, #2f7f33) 50%);background-size:10px 10px;border-color:var(--secondary-rest-color, #16721b)}.vis-item.rest45m{background:linear-gradient(\n        135deg,\n        var(--light-rest-color, #67ac6a) 25%,\n        var(--primary-rest-color, #2f7f33) 25%,\n        var(--primary-rest-color, #2f7f33) 50%,\n        var(--light-rest-color, #67ac6a) 50%,\n        var(--light-rest-color, #67ac6a) 75%,\n        var(--primary-rest-color, #2f7f33) 75%\n    );background-size:10px 10px;border-color:var(--secondary-rest-color, #16721b)}.vis-item.rest9h{background:linear-gradient(\n        180deg,\n        var(--light-rest-color, #67ac6a) 25%,\n        var(--primary-rest-color, #2f7f33) 25%,\n        var(--primary-rest-color, #2f7f33) 50%,\n        var(--light-rest-color, #67ac6a) 50%,\n        var(--light-rest-color, #67ac6a) 75%,\n        var(--primary-rest-color, #2f7f33) 75%\n    );background-size:10px 10px;background-color:var(--primary-rest-color, #2f7f33);border-color:var(--secondary-rest-color, #16721b)}.vis-item.resource-odd{height:5px;background:rgb(246, 234, 54)}.vis-item.resource-even{height:5px;background:rgb(165, 49, 241)}.vis-item.start,.vis-item.end{color:var(--primary-color, #921a1d);background-color:white;font-size:22px;z-index:2;border-color:var(--primary-color-shade, #7a1a1e)}.vis-item.start-green,.vis-item.end-green{color:green;background-color:white;font-size:22px;z-index:2;border-color:green}.icon-timeline{width:1.1em;height:1.1em;overflow:hidden;fill:var(--primary-color, #921a1d)}.icon-timeline-green{width:1.1em;height:1.1em;overflow:hidden;fill:green}.vis-item.drive.allMode{height:55px}.vis-item.work.allMode{height:40px}.vis-item.other{height:70px;z-index:10}.vis-item.rest.allMode{height:22px}.vis-item.rest15m.allMode{height:22px}.vis-item.rest45m.allMode{height:22px}.vis-item.rest9h.allMode{height:22px}.vis-item.available.allMode{height:28px}.vis-range{border-radius:0px !important}.intervalBar.vis-selected{z-index:3;background-color:rgba(255, 196, 0, 0.4)}.intervalBar{z-index:3;background-color:rgba(var(--primary-color-rgba, 146, 26, 29), 0.4);border-color:var(--primary-color, #921a1d)}.customTimeEvent{width:8px}.vis-item{cursor:pointer}.eventSelect{border:5px solid black !important}.vis-item.available.modified{background:repeating-linear-gradient(\n        60deg,\n        white,\n        white 3px,\n        var(--primary-available-color, #e67d20) 3px,\n        var(--primary-available-color, #e67d20) 10px\n    ) !important}.vis-item.work.modified{background:repeating-linear-gradient(\n        60deg,\n        white,\n        white 3px,\n        var(--primary-work-color, #d0000d) 3px,\n        var(--primary-work-color, #d0000d) 10px\n    ) !important}.vis-item.drive.modified{background:repeating-linear-gradient(\n        60deg,\n        white,\n        white 3px,\n        var(--primary-drive-color, #01599d) 3px,\n        var(--primary-drive-color, #01599d) 10px\n    ) !important}.vis-item.rest.modified,.vis-item.rest15m.modified,.vis-item.rest45m.modified,.vis-item.rest9h.modified{background:repeating-linear-gradient(\n        60deg,\n        white,\n        white 3px,\n        var(--primary-rest-color, #2f7f33) 3px,\n        var(--primary-rest-color, #2f7f33) 10px\n    ) !important}.vis-item.other.modified{background:repeating-linear-gradient(\n        60deg,\n        white,\n        white 3px,\n        var(--primary-custom-activity-color, #7f8c8d) 3px,\n        var(--primary-custom-activity-color, #7f8c8d) 10px\n    ) !important}.periodTextParent{position:relative;z-index:3;height:24px}.periodTextStart{position:absolute;right:35px;top:-4px;font-size:12px;z-index:-1}.periodTextStop{position:absolute;left:35px;top:14px;font-size:12px;z-index:-1}.duration{font-size:12px;color:#ffffff;font-weight:bold}.actionBar{position:absolute;right:0;z-index:10;background-color:whitesmoke;border-radius:5px;border:1px solid rgb(192, 192, 192)}.actionBar button{background-color:transparent;color:black;padding:4px 2px;border:0px solid transparent}.vis-label .vis-inner{height:80px}.note-0{color:black;top:-35px;font-size:12px}.note-1{color:black;top:-52px;font-size:12px}.vis-item.drive.supposed{background:linear-gradient(\n        45deg,\n        var(--primary-drive-color, #01599d) 1%,\n        rgba(var(--primary-drive-rgba, 1, 89, 157), 0.4) 1%,\n        rgba(var(--primary-drive-rgba, 1, 89, 157), 0.4) 49%,\n        var(--primary-drive-color, #01599d) 49%,\n        var(--primary-drive-color, #01599d) 51%,\n        rgba(var(--primary-drive-rgba, 1, 89, 157), 0.4) 51%,\n        rgba(var(--primary-drive-rgba, 1, 89, 157), 0.4) 99%,\n        var(--primary-drive-color, #01599d) 99%\n    );background-size:6px 6px;background-position:50px 50px}.vis-item.work.supposed{background:linear-gradient(\n        45deg,\n        var(--primary-work-color, #d0000d) 1%,\n        rgba(var(--primary-work-rgba, 208, 0, 13), 0.4) 1%,\n        rgba(var(--primary-work-rgba, 208, 0, 13), 0.4) 49%,\n        var(--primary-work-color, #d0000d) 49%,\n        var(--primary-work-color, #d0000d) 51%,\n        rgba(var(--primary-work-rgba, 208, 0, 13), 0.4) 51%,\n        rgba(var(--primary-work-rgba, 208, 0, 13), 0.4) 99%,\n        var(--primary-work-color, #d0000d) 99%\n    );background-size:6px 6px;background-position:50px 50px}.vis-item.available.supposed{background:linear-gradient(\n        45deg,\n        var(--primary-available-color, #e67d20) 1%,\n        rgba(var(--primary-available-rgba, 230, 125, 32), 0.4) 1%,\n        rgba(var(--primary-available-rgba, 230, 125, 32), 0.4) 49%,\n        var(--primary-available-color, #e67d20) 49%,\n        var(--primary-available-color, #e67d20) 51%,\n        rgba(var(--primary-available-rgba, 230, 125, 32), 0.4) 51%,\n        rgba(var(--primary-available-rgba, 230, 125, 32), 0.4) 99%,\n        var(--primary-available-color, #e67d20) 99%\n    );background-size:6px 6px;background-position:50px 50px}.vis-item.rest.supposed{background:linear-gradient(\n        45deg,\n        var(--primary-rest-color, #2f7f33) 1%,\n        rgba(var(--primary-rest-rgba, 47, 127, 51), 0.4) 1%,\n        rgba(var(--primary-rest-rgba, 47, 127, 51), 0.4) 49%,\n        var(--primary-rest-color, #2f7f33) 49%,\n        var(--primary-rest-color, #2f7f33) 51%,\n        rgba(var(--primary-rest-rgba, 47, 127, 51), 0.4) 51%,\n        rgba(var(--primary-rest-rgba, 47, 127, 51), 0.4) 99%,\n        var(--primary-rest-color, #2f7f33) 99%\n    );background-size:6px 6px;background-position:50px 50px}.activity-modified-chronology{background:linear-gradient(\n        45deg,\n        #fff 12.5%,\n        rgba(255, 191, 112, 0.5) 12.5%,\n        rgba(255, 191, 112, 0.5) 37.5%,\n        #fff 37.5%,\n        #fff 62.5%,\n        rgba(255, 191, 112, 0.5) 62.5%,\n        rgba(255, 191, 112, 0.5) 87.5%,\n        #fff 87.5%\n    );background-size:100px 100px;background-position:50px 50px}.activity-modified-legalfiles{background:linear-gradient(\n        45deg,\n        #fff 12.5%,\n        rgba(0, 128, 0, 0.5) 12.5%,\n        rgba(0, 128, 0, 0.5) 37.5%,\n        #fff 37.5%,\n        #fff 62.5%,\n        rgba(0, 128, 0, 0.5) 62.5%,\n        rgba(0, 128, 0, 0.5) 87.5%,\n        #fff 87.5%\n    );background-size:100px 100px;background-position:50px 50px}.activity-modified-autocorrect{background:linear-gradient(\n        45deg,\n        #fff 12.5%,\n        rgba(128, 128, 128, 0.5) 12.5%,\n        rgba(128, 128, 128, 0.5) 37.5%,\n        #fff 37.5%,\n        #fff 62.5%,\n        rgba(128, 128, 128, 0.5) 62.5%,\n        rgba(128, 128, 128, 0.5) 87.5%,\n        #fff 87.5%\n    );background-size:100px 100px;background-position:50px 50px}.toolipCorrection{visibility:hidden;color:rgb(0, 0, 0);border:1px solid black;background-color:rgb(255, 255, 255);border-radius:6px;padding:5px;font-size:11px;position:absolute;z-index:1000;display:flex;flex-wrap:wrap;max-width:230px}.tooltipCorrectif{color:darkred;font-size:11px}.tooltipCorrectif h4{margin:0;font-size:12px}.toolipCorrection h4{margin:0;text-align:center;font-size:13px;text-transform:uppercase}.pointLastCom{border-color:#4CAF50}.lastComContent{font-size:12px}';const B=class{constructor(n){t(this,n);this.clickOnTimeline=i(this,"clickOnTimeline",7);this.doubleClickOnTimeline=i(this,"doubleClickOnTimeline",7);this.moveCustomBar=i(this,"moveCustomBar",7);this.changeCustomBar=i(this,"changeCustomBar",7);this.intervalChange=i(this,"intervalChange",7);this.startAndEndChange=i(this,"startAndEndChange",7);this.stackChange=i(this,"stackChange",7);this.periods=[];this.notes=[];this.lastLegalFileEvent=null;this.lastCommunications=null;this.stack=true;this.haveCustomBar=false;this.haveIntervalBar=false;this.annotated=false;this.actionBar=false;this.firstLoad=true;this.backgrounds=[];this.periodFlags=[];this.lastCommunicationsItems=[];this.toHHMMSS=f;this.prettyDate=l;this.separateHundredWithSpace=d;this.log=s("s3pChart:timeline");this.rangechanged=D;this.click=M;this.setPeriodFlags=T;this.addActivityOnTimeline=j;this.setPeriodActivities=L;this.addActivityOther=Y;this.addSupposedActivity=E;this.getActivityOutsideVehicle=O;this.setPeriodResources=z;this.setLastCommunications=N;this.setNotes=I;this.doubleClick=S;this.mouseOver=F;this.resourcesUrl=e(this,"resourcesUrl")}async componentDidLoad(){await this.initialization();await this.setItems(false)}async componentWillLoad(){this.i18n=new v(this.el);await this.i18n.load(this.resourcesUrl)}async initialization(){this.options={editable:{add:false,updateTime:true,updateGroup:false,remove:false,overrideItems:false},onMove:(t,i)=>{let e;if(t.start<t.end){e=this.setMilleageDiff(t.start,t.end)}if(e&&e.diff&&e.end&&e.start){t.content=e.diff;if(e.start.ts!==e.end.ts){t.start=e.start.ts;t.end=e.end.ts}}else{t.content="???"}if(new Date(t.start).valueOf()>=new Date(t.end).valueOf()){t.end=new Date(new Date(t.start).setMinutes(new Date(t.start).getMinutes()+10))}this.intervalChange.emit({start:t.start,end:t.end});i(t)},selectable:true,stack:false,stackSubgroups:this.stack,locale:"fr",align:"center"};this.setGroup();this.timeline=new x.Timeline(this.timelineElement,new x.DataSet([]),this.options,this.groups);this.timeline.on("rangechanged",(t=>this.rangechanged(t,this.periods)));this.timeline.on("click",(t=>this.click(t)));this.timeline.on("doubleClick",(t=>this.doubleClick(t)));this.timeline.on("mouseOver",(t=>this.mouseOver(t)));this.timelineElement.addEventListener("mouseleave",(()=>{this.tooltipElement.style.visibility="hidden";this.tooltipElement.innerHTML=""}))}async setItems(t){let i=[];this.backgrounds=[];if(typeof this.periods==="string"){this.periods=JSON.parse(this.periods)}this.log("periods in setItems",this.periods);this.log("events in setItems",this.events);if(this.periods[0]){this.periodFlags=this.setPeriodFlags(this.periods,this.lastLegalFileEvent)}if(this.lastCommunications&&this.lastCommunications.length){this.lastCommunicationsItems=this.setLastCommunications(this.lastCommunications)}if(typeof this.events==="string"){this.events=JSON.parse(this.events)}i=i.concat(this.setPeriodActivities());if(this.notes&&this.notes[0]){i=i.concat(this.setNotes(this.notes))}if(this.events&&this.events[0]){if(this.pairVehicleDriver){i=i.concat(this.setPeriodResources(this.pairVehicleDriver,this.resourceType))}let e;if(this.display_start&&this.display_end){e=(new Date(this.display_end).valueOf()+new Date(this.display_start).valueOf())/2}if(i[0]&&i[0].start&&i[i.length-1]&&i[i.length-1].end){if(!e){e=(new Date(i[0].start).valueOf()+new Date(i[i.length-1].end).valueOf())/2}}if(this.periodFlags){i=i.concat(this.periodFlags)}if(this.lastCommunicationsItems){i=i.concat(this.lastCommunicationsItems)}this.dataSet=i;this.items=new x.DataSet(i);this.setStartAndEndOnTimeline();this.timeline.setItems(this.items);this.log("data in initialization",i);let n;switch(this.barPosition){case"left":n=new Date(new Date(this.display_start).setMinutes(new Date(this.display_start).getMinutes()+30));break;case"middle":n=e;break;case"right":n=new Date(new Date(this.display_end).setMinutes(new Date(this.display_end).getMinutes()-30));break;default:n=new Date(new Date(this.display_start).setMinutes(new Date(this.display_start).getMinutes()+30));break}this.setCustomBar(n);if(t){this.rangechanged({start:this.display_start,end:this.display_end},this.periods)}}}setMilleageDiff(t,i){let e=this.events;e.sort(((t,i)=>{if(new Date(t.ts).valueOf()<new Date(i.ts).valueOf()){return-1}if(new Date(t.ts).valueOf()>new Date(i.ts).valueOf()){return 1}return 0}));let n,r;let s,o;for(let a of Object.keys(e)){const h=Math.abs(new Date(e[a].ts).valueOf()-new Date(t).valueOf());const u=Math.abs(new Date(e[a].ts).valueOf()-new Date(i).valueOf());if(e[a].mileage&&(s==null||s>h)){s=Math.abs(new Date(e[a].ts).valueOf()-new Date(t).valueOf());n=e[a]}if(e[a].mileage&&(o==null||o>u)){o=Math.abs(new Date(e[a].ts).valueOf()-new Date(i).valueOf());r=e[a]}}let a;if(r&&r.mileage&&n&&n.mileage){a=r.mileage-n.mileage;a=(Math.round(a*100)/100).toString()+"km"}this.log("mileage in setMilleageDiff",a);this.log("eventStart in setMilleageDiff",n);this.log("eventEnd in setMilleageDiff",r);return{diff:a,start:n,end:r}}setIntervalBar(t,i){this.log("start in setIntervalBar",t);this.log("end in setIntervalBar",i);const e=this.setMilleageDiff(t,i);return{id:"intervalBarItem",content:e&&e.diff?e.diff:"???",className:"intervalBar",start:e&&e.start&&e.start.ts?e.start.ts:t,end:e&&e.end&&e.end.ts?e.end.ts:i,group:"start"}}setCustomBar(t){if(this.haveCustomBar){try{this.timeline.setCustomTime(new Date(t),"customTimeEvent")}catch(i){this.timeline.addCustomTime(new Date(t),"customTimeEvent")}this.timeline.on("timechange",(t=>{let i;for(let e of Object.keys(this.dataSet)){let n=this.dataSet[e];if(n.start<t.time&&n.end>t.time&&n.event&&n.event.activity&&n.event.activity!=="D"){i=n}}if(i){this.moveCustomBar.emit(t.time)}}));this.timeline.on("timechanged",(t=>{this.changeCustomBar.emit(t.time)}))}else{try{this.timeline.removeCustomTime("customTimeEvent")}catch(t){}}}setGroup(){this.groups=new x.DataSet([{id:"lastCommunication",content:"",visible:this.lastCommunications&&this.lastCommunications.length?true:false,className:"lastCommunication"},{id:"start",content:"",visible:true,className:"groupPeriod"},{id:"all",content:"",visible:this.stack?false:true},{id:"bar",content:"",subgroupOrder:function(t,i){return t.subgroupOrder-i.subgroupOrder},visible:this.stack?true:false,subgroupStack:{1:true,2:true,3:true,4:true}}])}async toggleAnnoted(){let t=this.timeline.getWindow();this.annotated=!this.annotated;this.display_start=t.start;this.display_end=t.end;this.setItems(false)}async setZoomIn(t=.2){this.log("zoomIn in setZoomIn",t);this.timeline.zoomIn(t)}async setZoomOut(t=.2){this.log("zoomOut in setZoomOut",t);this.timeline.zoomOut(t)}async setStack(t){let i=this.timeline.getWindow();this.stack=t;this.options.stackSubgroups=t;let e=["all","bar"];for(let t of e){this.groups.update({id:t,visible:!this.groups.get(t).visible})}this.options["start"]=new Date(i.start);this.options["end"]=new Date(i.end);this.timeline.setGroups(this.groups);this.timeline.setOptions(this.options);this.timeline.redraw();localStorage.setItem("timeGroup",`${this.stack}`);this.stackChange.emit(this.stack)}async moveRight(){this.move(-.2)}async moveLeft(){this.move(.2)}move(t){let i=this.timeline.getWindow();let e=i.end-i.start;this.timeline.setWindow({start:i.start.valueOf()-e*t,end:i.end.valueOf()-e*t})}async updateStartAndEnd(t,i){this.display_start=t;this.display_end=i;this.setStartAndEndOnTimeline()}setStartAndEndOnTimeline(){if(this.display_start){this.options["start"]=this.display_start}if(this.display_end){this.options["end"]=this.display_end}this.timeline.setOptions(this.options)}async updatePeriodAndEvent(t,i,e,n){this.firstLoad=true;this.log("lastEvent_end in updatePeriodAndEvent",e);this.log("events in updatePeriodAndEvent",t);this.log("periods in updatePeriodAndEvent",i);this.log("lastCommunications in updatePeriodAndEvent",n);if(this.periodFlags){this.log("initialization periodFlags in updatePeriodAndEvent");this.periodFlags=[]}this.events=t;this.periods=i;this.lastEvent_end=e;this.lastCommunications=n;this.groups.update({id:"lastCommunication",visible:this.lastCommunications&&this.lastCommunications.length?true:false});this.timeline.setGroups(this.groups);this.timeline.redraw();this.setItems(true)}render(){return n("div",{class:"s3pChartComponent",ref:t=>this.componentElement=t},n("div",{class:"toolipCorrection",ref:t=>this.tooltipElement=t}),this.actionBar?n("div",{class:"actionBar"},n("button",{onClick:()=>this.setZoomIn()},n("s3p-icon-v2",{name:"add",size:"small",center:true})),n("button",{onClick:()=>this.setZoomOut()},n("s3p-icon-v2",{name:"remove",size:"small",center:true})),n("button",{onClick:()=>this.moveLeft()},n("s3p-icon-v2",{name:"play-skip-back",size:"small",center:true})),n("button",{onClick:()=>this.moveRight()},n("s3p-icon-v2",{name:"play-skip-forward",size:"small",center:true})),n("button",{onClick:()=>this.toggleAnnoted()},n("s3p-icon-v2",{name:this.annotated?"bookmark":"bookmark",size:"small",center:true})),n("button",{onClick:()=>this.setStack(!this.stack)},n("s3p-icon-v2",{name:!this.stack?"caret-down":"caret-up",size:"small",center:true}))):"",n("div",{id:"timeline",ref:t=>this.timelineElement=t}),n("div",{class:"load-icon"},n("svg",{xmlns:"http://www.w3.org/2000/svg"},n("symbol",{id:"arrival",viewBox:"0 0 1792 1792"},n("path",{d:"M832 1000v-192q-181 16-384 117v185q205-96 384-110zm0-418v-197q-172 8-384 126v189q215-111 384-118zm832 463v-184q-235 116-384 71v-224q-20-6-39-15-5-3-33-17t-34.5-17-31.5-15-34.5-15.5-32.5-13-36-12.5-35-8.5-39.5-7.5-39.5-4-44-2q-23 0-49 3v222h19q102 0 192.5 29t197.5 82q19 9 39 15v188q42 17 91 17 120 0 293-92zm0-427v-189q-169 91-306 91-45 0-78-8v196q148 42 384-90zm-1344-362q0 35-17.5 64t-46.5 46v1266q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-1266q-29-17-46.5-46t-17.5-64q0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm1472 64v763q0 39-35 57-10 5-17 9-218 116-369 116-88 0-158-35l-28-14q-64-33-99-48t-91-29-114-14q-102 0-235.5 44t-228.5 102q-15 9-33 9-16 0-32-8-32-19-32-56v-742q0-35 31-55 35-21 78.5-42.5t114-52 152.5-49.5 155-19q112 0 209 31t209 86q38 19 89 19 122 0 310-112 22-12 31-17 31-16 62 2 31 20 31 55z"})),n("symbol",{id:"play",viewBox:"0 0 512 512"},n("path",{d:"M256 464c114.875 0 208-93.125 208-208S370.875 48 256 48 48 141.125 48 256s93.125 208 208 208zm-32-112V160l96 96-96 96z"})))))}get el(){return r(this)}};B.style=H;export{b as s3p_add_custom_activity,k as s3p_tabs_v2,B as s3p_timeline};
//# sourceMappingURL=p-c0532257.entry.js.map