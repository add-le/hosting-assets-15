{"version":3,"names":["formActivityCss","FormActivity","constructor","hostRef","this","activity","label","externalCode","valorize","serviceTime","flatRate","durante","amplitude","async","log","debug","i18n","el","load","resourcesUrl","lastActivity","Object","assign","updateActivity","event","type","value","checked","setDuration","e","isHours","duration","hours","Math","floor","minutes","target","parseInt","send","sendEditActivity","emit","isDisabled","JSON","stringify","_id","render","h","class","get","id","name","onInput","onChange","toHHMMSS","onBlur","ev","disabled","onClick"],"sources":["./node_modules/@s3pweb/s3p-chart/dist/collection/components/customActivity/formActivities/formActivity.css?tag=s3p-form-activity","./node_modules/@s3pweb/s3p-chart/dist/collection/components/customActivity/formActivities/formActivity.js"],"sourcesContent":[".container-input {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.container-input label {\n  margin: 12px;\n  padding-top: 5px;\n}\n.formActivity button {\n  width: 100%;\n}\n.formActivity {\n  width: 95%;\n  margin: auto;\n}\n.input-duration {\n  width: 50px;\n}\n.input-label {\n  width: calc(100% - 145px);\n}\n","import { Component, h, Prop, Element, Event, State } from '@stencil/core';\nimport debug from \"debug/src/browser\";\nimport { toHHMMSS } from '../../../utils/utils';\nimport { i18n } from '../../../utils/i18n';\nexport class FormActivity {\n    constructor() {\n        this.activity = { label: \"\", externalCode: \"\", valorize: false, serviceTime: false, flatRate: false, durante: 0, amplitude: false };\n    }\n    async componentWillLoad() {\n        this.log = debug('s3pChart:timeline');\n        this.i18n = new i18n(this.el);\n        await this.i18n.load(this.resourcesUrl);\n        this.lastActivity = Object.assign({}, this.activity);\n    }\n    async componentDidLoad() {\n    }\n    /**\n     * update activity object\n     * @param event\n     * @param type\n     */\n    updateActivity(event, type) {\n        let activity = this.activity;\n        this.activity = null;\n        switch (type) {\n            case 'label':\n                activity.label = event.value;\n                break;\n            case 'externalCode':\n                activity.externalCode = event.value;\n                break;\n            case 'valorize':\n                activity.valorize = event.checked;\n                break;\n            case 'serviceTime':\n                activity.serviceTime = event.checked;\n                activity.amplitude = event.checked === true ? true : activity.amplitude;\n                break;\n            case 'amplitude':\n                activity.amplitude = event.checked;\n                break;\n            case 'flatRate':\n                activity.flatRate = event.checked;\n                if (activity.flatRate) {\n                    activity.durante = 0;\n                }\n                break;\n        }\n        this.activity = activity;\n    }\n    /**\n     * calculate duration on input\n     * @param e\n     * @param isHours\n     */\n    setDuration(e, isHours) {\n        let duration = 0;\n        let activity = this.activity;\n        this.activity = null;\n        const hours = Math.floor(activity.durante / 60);\n        const minutes = Math.floor(activity.durante - hours * 60);\n        if (e.target.value || e.target.value === 0) {\n            let value = e.target.value;\n            if (isHours) {\n                duration = (parseInt(value) * 60);\n                activity.durante = duration + minutes;\n            }\n            else {\n                duration = parseInt(value);\n                activity.durante = duration + hours * 60;\n            }\n        }\n        this.activity = activity;\n    }\n    /**\n     * send event with activity\n     */\n    send() {\n        this.sendEditActivity.emit(this.activity);\n    }\n    /**\n     * return if button must be disabled\n     */\n    isDisabled() {\n        //@ts-ignore\n        if ((JSON.stringify(this.lastActivity) !== JSON.stringify(this.activity) || !this.activity._id) && this.activity.label && (!this.activity.flatRate || (this.activity.flatRate && this.activity.durante))) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    render() {\n        return (h(\"div\", { class: \"formActivity s3pChartComponent\" },\n            h(\"h3\", { class: \"center-text\" }, this.i18n.get(\"createAnOutsideVehicleActivity\")),\n            h(\"div\", { class: \"container-input\" },\n                h(\"label\", null, this.i18n.get('label')),\n                h(\"input\", { type: \"text\", id: \"label\", name: \"label\", class: \"input-custom input-label\", value: this.activity.label, onInput: (e) => { this.updateActivity(e.target, \"label\"); } })),\n            h(\"div\", { class: \"container-input\" },\n                h(\"label\", null, this.i18n.get('externalCode')),\n                h(\"input\", { type: \"text\", id: \"externalCode\", name: \"externalCode\", class: \"input-custom input-label\", value: this.activity.externalCode, onInput: (e) => { this.updateActivity(e.target, \"externalCode\"); } })),\n            h(\"div\", { class: \"container-input\" },\n                h(\"label\", { class: \"customCheckboxContainer resource-line-title\" },\n                    this.i18n.get('valorize'),\n                    h(\"input\", { type: \"checkbox\", value: \"valorise\", checked: this.activity.valorize, onChange: (e) => { this.updateActivity(e.target, \"valorize\"); } }),\n                    h(\"span\", { class: \"customCheckmark\" })),\n                h(\"label\", { class: \"customCheckboxContainer resource-line-title\" },\n                    this.i18n.get(\"inServiceTime\"),\n                    h(\"input\", { type: \"checkbox\", value: \"valorise\", checked: this.activity.serviceTime, onChange: (e) => { this.updateActivity(e.target, \"serviceTime\"); } }),\n                    h(\"span\", { class: \"customCheckmark\" })),\n                h(\"label\", { class: \"customCheckboxContainer resource-line-title\" },\n                    this.i18n.get(\"amplitude\"),\n                    h(\"input\", { type: \"checkbox\", value: \"valorise\", checked: this.activity.amplitude, onChange: (e) => { this.updateActivity(e.target, \"amplitude\"); } }),\n                    h(\"span\", { class: \"customCheckmark\" })),\n                h(\"div\", null,\n                    h(\"label\", { class: \"customCheckboxContainer resource-line-title\" },\n                        this.i18n.get('flatRate'),\n                        h(\"input\", { type: \"checkbox\", value: \"valorise\", checked: this.activity.flatRate, onChange: (e) => { this.updateActivity(e.target, \"flatRate\"); } }),\n                        h(\"span\", { class: \"customCheckmark\" }))),\n                this.activity.flatRate ?\n                    h(\"div\", null,\n                        h(\"label\", null, this.i18n.get('durante')),\n                        h(\"input\", { type: \"text\", class: \"input-custom input-duration\", value: toHHMMSS(this.activity.durante ? this.activity.durante * 60 : 0, \"hours\"), onBlur: (ev) => { this.setDuration(ev, true); } }),\n                        \"h\",\n                        h(\"input\", { type: \"text\", class: \"input-custom input-duration\", value: toHHMMSS(this.activity.durante ? this.activity.durante * 60 : 0, \"minutes\"), onBlur: (ev) => { this.setDuration(ev, false); } })) : \"\"),\n            h(\"button\", { class: \"btnChart\", disabled: this.isDisabled(), onClick: () => this.send() }, this.i18n.get(\"validate\"))));\n    }\n    static get is() { return \"s3p-form-activity\"; }\n    static get originalStyleUrls() { return {\n        \"$\": [\"formActivity.css\"]\n    }; }\n    static get styleUrls() { return {\n        \"$\": [\"formActivity.css\"]\n    }; }\n    static get properties() { return {\n        \"activity\": {\n            \"type\": \"unknown\",\n            \"mutable\": false,\n            \"complexType\": {\n                \"original\": \"{ label: string; externalCode: string; valorize: boolean; serviceTime: boolean; flatRate: boolean; durante: number; amplitude: boolean; }\",\n                \"resolved\": \"{ label: string; externalCode: string; valorize: boolean; serviceTime: boolean; flatRate: boolean; durante: number; amplitude: boolean; }\",\n                \"references\": {}\n            },\n            \"required\": false,\n            \"optional\": false,\n            \"docs\": {\n                \"tags\": [],\n                \"text\": \"\"\n            },\n            \"defaultValue\": \"{ label: \\\"\\\", externalCode: \\\"\\\", valorize: false, serviceTime: false, flatRate: false, durante: 0, amplitude: false }\"\n        }\n    }; }\n    static get contextProps() { return [{\n            \"name\": \"resourcesUrl\",\n            \"context\": \"resourcesUrl\"\n        }]; }\n    static get states() { return {\n        \"lastActivity\": {}\n    }; }\n    static get events() { return [{\n            \"method\": \"sendEditActivity\",\n            \"name\": \"sendEditActivity\",\n            \"bubbles\": true,\n            \"cancelable\": true,\n            \"composed\": true,\n            \"docs\": {\n                \"tags\": [],\n                \"text\": \"\"\n            },\n            \"complexType\": {\n                \"original\": \"any\",\n                \"resolved\": \"any\",\n                \"references\": {}\n            }\n        }]; }\n    static get elementRef() { return \"el\"; }\n}\n"],"mappings":"+LAAA,MAAMA,EAAkB,0Q,MCIXC,EAAY,MACrBC,YAAAC,G,6DACIC,KAAKC,SAAW,CAAEC,MAAO,GAAIC,aAAc,GAAIC,SAAU,MAAOC,YAAa,MAAOC,SAAU,MAAOC,QAAS,EAAGC,UAAW,O,yCAEhIC,0BACIT,KAAKU,IAAMC,EAAM,qBACjBX,KAAKY,KAAO,IAAIA,EAAKZ,KAAKa,UACpBb,KAAKY,KAAKE,KAAKd,KAAKe,cAC1Bf,KAAKgB,aAAeC,OAAOC,OAAO,GAAIlB,KAAKC,S,CAE/CQ,yB,CAOAU,eAAeC,EAAOC,GAClB,IAAIpB,EAAWD,KAAKC,SACpBD,KAAKC,SAAW,KAChB,OAAQoB,GACJ,IAAK,QACDpB,EAASC,MAAQkB,EAAME,MACvB,MACJ,IAAK,eACDrB,EAASE,aAAeiB,EAAME,MAC9B,MACJ,IAAK,WACDrB,EAASG,SAAWgB,EAAMG,QAC1B,MACJ,IAAK,cACDtB,EAASI,YAAce,EAAMG,QAC7BtB,EAASO,UAAYY,EAAMG,UAAY,KAAO,KAAOtB,EAASO,UAC9D,MACJ,IAAK,YACDP,EAASO,UAAYY,EAAMG,QAC3B,MACJ,IAAK,WACDtB,EAASK,SAAWc,EAAMG,QAC1B,GAAItB,EAASK,SAAU,CACnBL,EAASM,QAAU,C,CAEvB,MAERP,KAAKC,SAAWA,C,CAOpBuB,YAAYC,EAAGC,GACX,IAAIC,EAAW,EACf,IAAI1B,EAAWD,KAAKC,SACpBD,KAAKC,SAAW,KAChB,MAAM2B,EAAQC,KAAKC,MAAM7B,EAASM,QAAU,IAC5C,MAAMwB,EAAUF,KAAKC,MAAM7B,EAASM,QAAUqB,EAAQ,IACtD,GAAIH,EAAEO,OAAOV,OAASG,EAAEO,OAAOV,QAAU,EAAG,CACxC,IAAIA,EAAQG,EAAEO,OAAOV,MACrB,GAAII,EAAS,CACTC,EAAYM,SAASX,GAAS,GAC9BrB,EAASM,QAAUoB,EAAWI,C,KAE7B,CACDJ,EAAWM,SAASX,GACpBrB,EAASM,QAAUoB,EAAWC,EAAQ,E,EAG9C5B,KAAKC,SAAWA,C,CAKpBiC,OACIlC,KAAKmC,iBAAiBC,KAAKpC,KAAKC,S,CAKpCoC,aAEI,IAAKC,KAAKC,UAAUvC,KAAKgB,gBAAkBsB,KAAKC,UAAUvC,KAAKC,YAAcD,KAAKC,SAASuC,MAAQxC,KAAKC,SAASC,SAAWF,KAAKC,SAASK,UAAaN,KAAKC,SAASK,UAAYN,KAAKC,SAASM,SAAW,CACtM,OAAO,K,KAEN,CACD,OAAO,I,EAGfkC,SACI,OAAQC,EAAE,MAAO,CAAEC,MAAO,kCACtBD,EAAE,KAAM,CAAEC,MAAO,eAAiB3C,KAAKY,KAAKgC,IAAI,mCAChDF,EAAE,MAAO,CAAEC,MAAO,mBACdD,EAAE,QAAS,KAAM1C,KAAKY,KAAKgC,IAAI,UAC/BF,EAAE,QAAS,CAAErB,KAAM,OAAQwB,GAAI,QAASC,KAAM,QAASH,MAAO,2BAA4BrB,MAAOtB,KAAKC,SAASC,MAAO6C,QAAUtB,IAAQzB,KAAKmB,eAAeM,EAAEO,OAAQ,QAAQ,KAClLU,EAAE,MAAO,CAAEC,MAAO,mBACdD,EAAE,QAAS,KAAM1C,KAAKY,KAAKgC,IAAI,iBAC/BF,EAAE,QAAS,CAAErB,KAAM,OAAQwB,GAAI,eAAgBC,KAAM,eAAgBH,MAAO,2BAA4BrB,MAAOtB,KAAKC,SAASE,aAAc4C,QAAUtB,IAAQzB,KAAKmB,eAAeM,EAAEO,OAAQ,eAAe,KAC9MU,EAAE,MAAO,CAAEC,MAAO,mBACdD,EAAE,QAAS,CAAEC,MAAO,+CAChB3C,KAAKY,KAAKgC,IAAI,YACdF,EAAE,QAAS,CAAErB,KAAM,WAAYC,MAAO,WAAYC,QAASvB,KAAKC,SAASG,SAAU4C,SAAWvB,IAAQzB,KAAKmB,eAAeM,EAAEO,OAAQ,WAAW,IAC/IU,EAAE,OAAQ,CAAEC,MAAO,qBACvBD,EAAE,QAAS,CAAEC,MAAO,+CAChB3C,KAAKY,KAAKgC,IAAI,iBACdF,EAAE,QAAS,CAAErB,KAAM,WAAYC,MAAO,WAAYC,QAASvB,KAAKC,SAASI,YAAa2C,SAAWvB,IAAQzB,KAAKmB,eAAeM,EAAEO,OAAQ,cAAc,IACrJU,EAAE,OAAQ,CAAEC,MAAO,qBACvBD,EAAE,QAAS,CAAEC,MAAO,+CAChB3C,KAAKY,KAAKgC,IAAI,aACdF,EAAE,QAAS,CAAErB,KAAM,WAAYC,MAAO,WAAYC,QAASvB,KAAKC,SAASO,UAAWwC,SAAWvB,IAAQzB,KAAKmB,eAAeM,EAAEO,OAAQ,YAAY,IACjJU,EAAE,OAAQ,CAAEC,MAAO,qBACvBD,EAAE,MAAO,KACLA,EAAE,QAAS,CAAEC,MAAO,+CAChB3C,KAAKY,KAAKgC,IAAI,YACdF,EAAE,QAAS,CAAErB,KAAM,WAAYC,MAAO,WAAYC,QAASvB,KAAKC,SAASK,SAAU0C,SAAWvB,IAAQzB,KAAKmB,eAAeM,EAAEO,OAAQ,WAAW,IAC/IU,EAAE,OAAQ,CAAEC,MAAO,sBAC3B3C,KAAKC,SAASK,SACVoC,EAAE,MAAO,KACLA,EAAE,QAAS,KAAM1C,KAAKY,KAAKgC,IAAI,YAC/BF,EAAE,QAAS,CAAErB,KAAM,OAAQsB,MAAO,8BAA+BrB,MAAO2B,EAASjD,KAAKC,SAASM,QAAUP,KAAKC,SAASM,QAAU,GAAK,EAAG,SAAU2C,OAASC,IAASnD,KAAKwB,YAAY2B,EAAI,KAAK,IAC/L,IACAT,EAAE,QAAS,CAAErB,KAAM,OAAQsB,MAAO,8BAA+BrB,MAAO2B,EAASjD,KAAKC,SAASM,QAAUP,KAAKC,SAASM,QAAU,GAAK,EAAG,WAAY2C,OAASC,IAASnD,KAAKwB,YAAY2B,EAAI,MAAM,KAAU,IACxNT,EAAE,SAAU,CAAEC,MAAO,WAAYS,SAAUpD,KAAKqC,aAAcgB,QAAS,IAAMrD,KAAKkC,QAAUlC,KAAKY,KAAKgC,IAAI,a"}