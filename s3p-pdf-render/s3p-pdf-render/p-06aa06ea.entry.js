import{r as t,c as e,g as i,h as s,a}from"./p-d5a6e412.js";import{b as l}from"./p-6f5893c5.js";import{t as n}from"./p-98feef0c.js";import{i as c}from"./p-924cb6ab.js";import"./p-3e8ff66b.js";const r=".container-input{display:flex;align-items:center;justify-content:space-between}.container-input label{margin:12px;padding-top:5px}.formActivity button{width:100%}.formActivity{width:95%;margin:auto}.input-duration{width:50px}.input-label{width:calc(100% - 145px)}";const o=class{constructor(s){t(this,s);this.sendEditActivity=e(this,"sendEditActivity",7);this.activity={label:"",externalCode:"",valorize:false,serviceTime:false,flatRate:false,durante:0,amplitude:false};this.resourcesUrl=i(this,"resourcesUrl")}async componentWillLoad(){this.log=l("s3pChart:timeline");this.i18n=new c(this.el);await this.i18n.load(this.resourcesUrl);this.lastActivity=Object.assign({},this.activity)}async componentDidLoad(){}updateActivity(t,e){let i=this.activity;this.activity=null;switch(e){case"label":i.label=t.value;break;case"externalCode":i.externalCode=t.value;break;case"valorize":i.valorize=t.checked;break;case"serviceTime":i.serviceTime=t.checked;i.amplitude=t.checked===true?true:i.amplitude;break;case"amplitude":i.amplitude=t.checked;break;case"flatRate":i.flatRate=t.checked;if(i.flatRate){i.durante=0}break}this.activity=i}setDuration(t,e){let i=0;let s=this.activity;this.activity=null;const a=Math.floor(s.durante/60);const l=Math.floor(s.durante-a*60);if(t.target.value||t.target.value===0){let n=t.target.value;if(e){i=parseInt(n)*60;s.durante=i+l}else{i=parseInt(n);s.durante=i+a*60}}this.activity=s}send(){this.sendEditActivity.emit(this.activity)}isDisabled(){if((JSON.stringify(this.lastActivity)!==JSON.stringify(this.activity)||!this.activity._id)&&this.activity.label&&(!this.activity.flatRate||this.activity.flatRate&&this.activity.durante)){return false}else{return true}}render(){return s("div",{class:"formActivity s3pChartComponent"},s("h3",{class:"center-text"},this.i18n.get("createAnOutsideVehicleActivity")),s("div",{class:"container-input"},s("label",null,this.i18n.get("label")),s("input",{type:"text",id:"label",name:"label",class:"input-custom input-label",value:this.activity.label,onInput:t=>{this.updateActivity(t.target,"label")}})),s("div",{class:"container-input"},s("label",null,this.i18n.get("externalCode")),s("input",{type:"text",id:"externalCode",name:"externalCode",class:"input-custom input-label",value:this.activity.externalCode,onInput:t=>{this.updateActivity(t.target,"externalCode")}})),s("div",{class:"container-input"},s("label",{class:"customCheckboxContainer resource-line-title"},this.i18n.get("valorize"),s("input",{type:"checkbox",value:"valorise",checked:this.activity.valorize,onChange:t=>{this.updateActivity(t.target,"valorize")}}),s("span",{class:"customCheckmark"})),s("label",{class:"customCheckboxContainer resource-line-title"},this.i18n.get("inServiceTime"),s("input",{type:"checkbox",value:"valorise",checked:this.activity.serviceTime,onChange:t=>{this.updateActivity(t.target,"serviceTime")}}),s("span",{class:"customCheckmark"})),s("label",{class:"customCheckboxContainer resource-line-title"},this.i18n.get("amplitude"),s("input",{type:"checkbox",value:"valorise",checked:this.activity.amplitude,onChange:t=>{this.updateActivity(t.target,"amplitude")}}),s("span",{class:"customCheckmark"})),s("div",null,s("label",{class:"customCheckboxContainer resource-line-title"},this.i18n.get("flatRate"),s("input",{type:"checkbox",value:"valorise",checked:this.activity.flatRate,onChange:t=>{this.updateActivity(t.target,"flatRate")}}),s("span",{class:"customCheckmark"}))),this.activity.flatRate?s("div",null,s("label",null,this.i18n.get("durante")),s("input",{type:"text",class:"input-custom input-duration",value:n(this.activity.durante?this.activity.durante*60:0,"hours"),onBlur:t=>{this.setDuration(t,true)}}),"h",s("input",{type:"text",class:"input-custom input-duration",value:n(this.activity.durante?this.activity.durante*60:0,"minutes"),onBlur:t=>{this.setDuration(t,false)}})):""),s("button",{class:"btnChart",disabled:this.isDisabled(),onClick:()=>this.send()},this.i18n.get("validate")))}get el(){return a(this)}};o.style=r;export{o as s3p_form_activity};
//# sourceMappingURL=p-06aa06ea.entry.js.map