import{r as t,c as i,g as s,h as e,a as n}from"./p-d5a6e412.js";import{b as a}from"./p-6f5893c5.js";import{a as l,p as r}from"./p-98feef0c.js";import{i as c}from"./p-924cb6ab.js";import"./p-3e8ff66b.js";const h=".intervalCorrection{display:flex;align-items:center}.actionTable{display:flex;align-items:center}.headerCorrection{display:flex;align-items:center;justify-content:space-between}";const o=class{constructor(e){t(this,e);this.sendIntervalCorrectionTable=i(this,"sendIntervalCorrectionTable",7);this.intervalDate={start:null,end:null};this.resourcesUrl=s(this,"resourcesUrl")}async componentWillLoad(){this.log=a("s3pChart:correctionTable");this.i18n=new c(this.el);await this.i18n.load(this.resourcesUrl);this.start=(new Date).setHours(0,0,0,0);this.end=new Date;this.intervalDate={start:new Date((new Date).setHours(0,0,0,0)),end:new Date}}async componentDidLoad(){}setInterval(t,i){this.intervalDate[i]=t.detail}setActivity(t){switch(t){case"R":return e("div",{class:"activity restActivity",title:"Repos"},e("img",{class:"icon-tachy",src:"https://gedmouv.io/assets/Break.png"}));case"A":return e("div",{class:"activity availableActivity",title:"Disponible"},e("img",{class:"icon-tachy",src:"https://gedmouv.io/assets/Available.png"}));case"W":return e("div",{class:"activity workActivity",title:"Travail"},e("img",{class:"icon-tachy",src:"https://gedmouv.io/assets/Work.png"}));case"D":return e("div",{class:"activity driverActivity",title:"Conduite"},e("img",{class:"icon-tachy",src:"https://gedmouv.io/assets/Driving.png"}));default:return e("div",{class:"activity otherActivity"},this.setCustomActivity(t))}}setCustomActivity(t){if(this.activitiesOutsideVehicle&&this.activitiesOutsideVehicle.length){const i=this.activitiesOutsideVehicle.find((i=>i._id===t));return i&&i.label?i.label:"?"}else{return"?"}}sendInterval(){if(this.intervalDate.start&&this.intervalDate.end&&new Date(this.intervalDate.start).valueOf()<new Date(this.intervalDate.end).valueOf()){this.sendIntervalCorrectionTable.emit(this.intervalDate);this.inputDateTimeStart.setError(false);this.inputDateTimeEnd.setError(false)}else{this.inputDateTimeStart.setError(true);this.inputDateTimeEnd.setError(true)}}returnDurante(t,i){const s=new Date(i).valueOf()-new Date(t).valueOf();return l(s/1e3)}render(){return e("div",{class:"s3pChartComponent"},e("div",{class:"headerCorrection"},e("div",{class:"intervalCorrection"},e("span",null,this.i18n.get("from")),e("s3p-input-datetime",{idInput:"intervalStart",date:this.start,ref:t=>this.inputDateTimeStart=t,onDateTimeChange:t=>{this.setInterval(t,"start")}}),e("span",null,this.i18n.get("to")),e("s3p-input-datetime",{idInput:"intervalEnd",date:this.end,ref:t=>this.inputDateTimeEnd=t,onDateTimeChange:t=>{this.setInterval(t,"end")}}),e("button",{class:"btnChart",onClick:()=>{this.sendInterval()}},e("s3p-icon-v2",{name:"checkmark",center:true}))),e("div",{class:"actionTable"},e("button",{class:"btnChart"},e("s3p-icon-v2",{name:"download-outline",center:true})),e("button",{class:"btnChart"},e("s3p-icon-v2",{name:"print-outline",center:true})))),this.listCorrection?e("table",{class:"tableCustom"},e("tr",null,e("th",{rowSpan:2},this.i18n.get("driver")),e("th",{colSpan:4},this.i18n.get("newActivity")),e("th",{colSpan:4},this.i18n.get("originalActivity")),e("th",{colSpan:4},"Action")),e("tr",null,e("th",null,this.i18n.get("activity")),e("th",null,this.i18n.get("start")),e("th",null,this.i18n.get("end")),e("th",null,this.i18n.get("durante")),e("th",null,this.i18n.get("activity")),e("th",null,this.i18n.get("start")),e("th",null,this.i18n.get("end")),e("th",null,this.i18n.get("durante")),e("th",null,this.i18n.get("user")),e("th",null,"Type"),e("th",null,"Date"),e("th",null,this.i18n.get("comment"))),this.listCorrection.map((t=>e("tr",null,e("td",null,t.resourceName?t.resourceName:""),e("td",null,t.new&&t.new.activity?this.setActivity(t.new.activity):""),e("td",null,t.new&&t.new.ts?r(new Date(t.new.ts),"00/00/0000 00:00"):""),e("td",null,t.new&&t.new.end?r(new Date(t.new.end),"00/00/0000 00:00"):""),e("td",null,t.new&&t.new.end&&t.new.ts?this.returnDurante(t.new.ts,t.new.end):""),t.origin?[e("td",null,this.setActivity(t.origin.activity)),e("td",null,r(new Date(t.origin.ts),"00/00/0000 00:00")),e("td",null,t.new&&t.origin.end?r(new Date(t.origin.end),"00/00/0000 00:00"):""),e("td",null,t.origin&&t.origin.end&&t.origin.ts?this.returnDurante(t.origin.ts,t.origin.end):"")]:e("td",{colSpan:4},this.i18n.get("noOriginalActivity")),e("td",null,t.dispatcherName?t.dispatcherName:""),e("td",null,this.i18n.get(t.type)),e("td",null,r(new Date(t.creationTs),"00/00/0000 00:00")),e("td",null,t.comment))))):"")}get el(){return n(this)}};o.style=h;export{o as s3p_corrections_table};
//# sourceMappingURL=p-ba2d233a.entry.js.map